var Faug=new function(){var e,t,a,i,r,n,s,o,l,d,c={},u={},f={},m={},h={},g={},p={"":{}},v={},y={},b=void 0,_={},w={},F={},x={},O={},k=!1,T="c",S="u",A="d",N="ra",C="YYYY-MM-DD",P="YYYY-MM-DD HH:mm:ss",j="HH:mm:ss",D="X",I={defaultroute:"",routes:{}},B=!1,E="faug-freeze-element",z=void 0,V=0,M={},R=!0,L={},U="__SCOPED_VAR__"+(new Date).getTime()+"__",q="__EVERY__"+(new Date).getTime()+"__",H=void 0,J=void 0,W=0,X={},G={},Y="__RARGS__"+(new Date).getTime()+"__",Q=void 0,K=!1,Z=void 0,ee=void 0,te=!1,ae="USD",ie=!1,re={},ne="",se="",oe=!1,le=void 0,de=!1,ce=!1,ue={},fe={},me=!1,he=!0,ge={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},pe={},ve=!1,ye=!1,be=!1,_e=-2,we={},Fe=!1,xe=void 0,Oe=void 0,$e=void 0,ke=void 0,Te=void 0,Se=void 0,Ae=void 0,Ne={layout:{},form:{ele:"form",style:"width:95%;",class:"form",validationErrorMsg:"Please Fill all the mandatory fields",file:{maxSizeMb:null,errorFunc:null},element:{container:{class:"form-group",ele:"div",style:"",attrs:{},class:""},label:{ele:"label",style:"",attrs:{},class:"",requiredHtml:"<span style='color:red'>*</span>"},icon:{ele:"i",style:"",attrs:{},class:""},this:{class:"form-control",style:"",attrs:{}},helptext:{class:"help-block",ele:"span",errorSeparator:"<br/>",errorClass:"has-error",successClass:"has-success",errorText:" is Required",errorPos:"append",style:"",attrs:{}}},radio:{this:{ele:"input",style:"",attrs:{},class:""},label:{ele:"label",style:"",attrs:{},class:""},container:{class:"radio",ele:"div",style:"",attrs:{}}},checkbox:{this:{ele:"input",style:"",attrs:{},class:""},label:{ele:"label",style:"",attrs:{},class:""},container:{class:"radio",ele:"div",style:"",attrs:{}}},groupMarker:{html:'<div class="clearfix">&nbsp;</div>'},object:{section:{ele:"div",style:"",attrs:{},class:""},container:{class:"form-group clearfix",ele:"div",style:"",attrs:{}}},array:{container:{class:"form-group clearfix",attrs:{}},section:{ele:"div",eleIfAbsent:"b",style:"margin-top:10px;display:inline-block;",attrs:{}},header:{ele:"div",style:"",attrs:{},class:""},addButton:{ele:"button",style:"float:right",attrs:{},class:""},remButton:{ele:"button",style:"float:right",attrs:{},class:""},this:{class:"div",header:{ele:"div",style:"",attrs:{},class:"",remButton:{ele:"button",style:"float:right",attrs:{},class:""},minlabel:{ele:"span",style:"",attrs:{},class:""},minmaxButton:{ele:"span",style:"float:right",attrs:{}}},container:{class:"form-group clearfix",ele:"div",style:"",attrs:{}}}},actionsArea:{ele:"ul",class:"list-group",style:"",attrs:{},edit:{ele:"li",style:"",class:"list-group-item",label:"Edit",attrs:{}},delete:{ele:"li",style:"",class:"list-group-item",label:"Delete",attrs:{}},appendTo:"body"},submitButton:{ele:"input",label:"Create",style:"",attrs:{},class:""},resetButton:{ele:"button",class:"btn-primary pull-right",style:"margin-bottom:20px;",text:"Reset",attrs:{}},progress:{ele:"progress",style:"",attrs:{},class:""}},viewer:{editButton:{ele:"button",style:"",attrs:{},class:""},deleteButton:{ele:"button",msg:"Are you sure?",style:"",attrs:{},class:""},this:{table:{ele:"table",style:"width:100%;",class:"table table-striped table-bordered table-hover",container:{ele:"div",style:"overflow-x:auto",attrs:{},class:""},header:{ele:"thead",rowEle:"tr",colEle:"th",style:"",attrs:{},class:""},row:{ele:"tr",style:"",attrs:{},class:""},column:{ele:"td",style:"",attrs:{},class:""}},default:{ele:"div",style:"",attrs:{},class:""},dropdown:{ele:"ul",class:"dropdown-menu",itemEle:"li",style:"",attrs:{}}},pagination:{html:'<button class="faug-trigger-read-prev-button">Previous</button><button class="faug-trigger-read-next-button">Next</button>'}},helperForm:{ele:"form",style:"width:95%;",class:"form",attrs:{}},search:{selector:null,regex:null,errorFunc:null},input:{regex:null,errorFunc:null},table:{search:{regex:null},settings:{template:"<div class='container-fluid'><div class='row'><div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'><ul class='_t_stg_lst list-group column-list'><%itemshtml%></ul></div><div class='col-lg-12 col-md-12 col-sm-12 col-xs-12'><button class='_t_stg_but btn btn-success pull-right'>Apply</button></div></div></div>",items:{itemshtml:{template:"<li class='ui-state-default list-group-item <%active%>' style='margin: 2px 2px;border-radius: 0px;cursor: move;text-transform: capitalize;'><i class='glyphicon glyphicon-resize-vertical margin-right-15 font-size-12'></i><%name%></li>"}}},container:{template:"<div class='_t_mc container-fluid col-md-12'><%header%><%body%><%notfound%><%footer%></div>",items:{header:{template:"<div class='_t_hc row' style='margin:20px 0 20px 0'><%itemperpage_yes%><%itemperpage_no%><%blank%><%searchdownload%></div>",items:{itemperpage_yes:{cond:"|=|true:object@page_enabled",template:"<div class='_t_h1 col-md-2 row' style='padding-left: 0px;'><div class='col-md-2'><i style='font-size:25px;padding-top:5px;' class='_t_stg fa fa-cog cursor-pointer' aria-hidden='true'></i></div><div class='col-md-10'><select class='_t_ps form-control'><%options%></select></div></div>"},itemperpage_no:{cond:"|!=|true:object@page_enabled",template:"<div class='_t_h1 col-md-1' style='padding-left: 0px;'><div class='col-md-2'><i style='font-size:25px;padding-top:5px;' class='_t_stg fa fa-cog cursor-pointer' aria-hidden='true'></i></div></div>"},blank:"<div class='_t_h2 col-md-6'>&nbsp;</div>",searchdownload:{template:"<div class='_t_h3 col-md-4 col-sm-12 col-xs-12' style='padding-right: 0px;'><div class='_t_h3_s col-md-10'><%search%></div><%download%><%downloadpdf%></div>",items:{search:{cond:"|=|true:object@search_enabled",template:"<input type='text' class='_t_sb form-control' placeholder='Search' value='<%_f_search_text%>'/>"},download:{cond:"|=|true:object@dwnld_enabled",template:"<div class='_t_h3_d floatingRightBtn'><i style='font-size:25px;padding-top:5px;' class='_t_dw fa fa-download'></i></div>"},downloadpdf:{cond:"|=|true:object@dwnldpdf_enabled",template:"<div class='_t_h3_dp floatingRightBtn'><i style='font-size:25px;padding-top:5px;' class='_t_dwpdf fa fa-file-pdf'></i></div>"}}}}},body:"<div class='_t_bc'></div>",notfound:"<div class='_t_gc row hidden' style='margin:20px 0 20px 0'><center><p>No Data Found</p></center></div>",footer:{template:"<div class='_t_fc row' style='margin:20px 0 20px 0'><%previous%><%pagination%><%next%></div>",items:{previous:"<div class='_t_f1 col-md-1' style='padding-left: 0px;'><button type='button' class='_t_f11 previous btn'>Previous</button></div>",pagination:{template:"<div class='_t_f2 col-md-10 <%isHidden%>'><center><div class='_t_f21'>Page <span class='_t_f211w'><input type='text' class='_t_f211'></span> of <span class='_t_f212'></span></div></center></div>",items:{isHidden:{cond:"|=|true:object@invoke_apionchange",template:"hidden"}}},next:{template:"<div class='_t_f3 col-md-1 <%pullRight%>' style='padding-right: 0px;'><button type='button' class='_t_f31 btn next pull-right'>Next</button></div>",items:{pullRight:{cond:"|=|true:object@invoke_apionchange",template:"pull-right"}}}}}}},items:{table:"<table class='_t_tl table'>",thead:"<thead class='_t_th'>",theadtr:"<tr class='_t_hr'>",theadth:"<th class='_t_hc'>",tbody:"<tbody class='_t_tb'>",tbodytr:"<tr class='_t_rw'>",tbodytd:"<td><%content%></td>",pagelistitem:"<option value='<%pagenum%>' <%selected%>><%display%></option>",sorthtml:"<i class='fa fa-fw fa-sort'></i>"}},freezeLoaderHtml:'<h3><img src="resources/busy.gif" /> Just a moment...</h3>',freezeUiContainer:"",modal:{template:"<div id='<%id%>' class='modal fade' role='dialog'><div class='modal-dialog' style='<%width%><%height%>'><div class='modal-content'><%header%><%body%><%footer%></div></div></div>",items:{header:{template:"<div class='modal-header'><%closebutton%><%headerContent%></div>",items:{closebutton:{cond:"|=|true:object@isCloseAllwd",template:"<button type='button' class='close' data-dismiss='modal'>&times;</button>"}}},body:"<div class='modal-body clearfix'><%html%></div>",footer:"<div class='modal-footer'><%footerContent%></div>"}}};this.escapeHtml=function(e){return Ie(e)?"":String(e).replace(/[&<>"'`=\/]/g,(function(e){return ge[e]}))},this.eh=this.escapeHtml,this.unEscapeHtml=function(e){return Ie(e)?"":e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/&amp;/g,"&")).replace(/&lt;/g,"<")).replace(/&gt;/g,">")).replace(/&quot;/g,'"')).replace(/&#39;/g,"'")).replace(/&#x2F;/g,"/")).replace(/&#x60;/g,"`")).replace(/&#x3D;/g,"=")).replace(/&#34;/g,'"')},this.ueh=this.unEscapeHtml,this.getConfigPath=function(){return"fjs-config.json"},this.copy=function(e){if(je("Object",e)){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[a]=this.copy(e[a]));return t}if(je("Array",e)){t=[];for(var i=0;i<e.length;i++)t.push(this.copy(e[i]));return t}return e},this.getProperty=function(t){return"loadconfigafterauth"==t?K:"stateFreeze"==t?Z:"inited"==t?nt:"initialLoaderScreen"==t?R:"isRecord"==t?ce:"baseUrl"==t?ne:"pbaseUrl"==t?se:"templateResources"==t?this.copy(e):"debugEnabled"==t?k:"catchApiUncaughtExceptions"==t?he:"prefilterRegex"==t?le:"generateCorrelationId"==t?de:"authObject"==t?b:"errFn"==t?Ae:"errRegex"==t?Se:"numApiWebWorkers"==t?W:void 0},this.gp=this.getProperty,this.setProperty=function(e,t){"loadconfigafterauth"==e&&je("Boolean",t)?K=t:"stateFreeze"!=e||void 0!==t&&!je("Array",t)?"recorder"==e?n=t:"previousElement"==e?H=t:"cdfs"==e?Ne=t:"catchApiUncaughtExceptions"==e?he=t:"baseUrl"==e?ne=t:"pbaseUrl"==e&&(se=t):Z=t},this.sp=this.setProperty,this.getString=function(e){return e?e+"":e},this.getSchemaHtmlTemplatesStr=function(){return JSON.stringify(X)},this.getOtherHtmlTemplatesStr=function(){return JSON.stringify(G)},this.getSchemaMapStr=function(){return JSON.stringify(u)},this.getRouteArgs=function(){return this.copy(x[Y])},this.getRouteArg=function(e){return x[Y][e]};var Ce=[["resources/javascript-xpath-latest-cmp.js"],["resources/bootstrap.min.js"],["resources/json2.js"],["resources/jquery.dataTables.js"],["resources/dataTables.bootstrap.js"],["resources/canvas-datagrid.js"],["resources/jspdf.min.js"],["resources/jspdf.plugin.autotable.min.js"],["resources/csv.min.js"]];this.dependencies=function(e,t){if(e&&e.length>0){var a=!0===window.onlyFaugCore;t&&(this.deps=[]);for(var i=0;i<e.length;i++)a||this.deps.push([e[i]])}};var Pe=this.dependencies;this.settings=function(e,t,a,i,r,n,s,o,l,d,c,u,f,m){t&&(k=t),a&&(T=a),i&&i,r&&(S=r),n&&(A=n),s&&(N=s),o&&(C=o),l&&(P=l),d&&(j=d),c&&(D=c),u&&(B=u),f&&(E=f),m&&(z=m)},this.initAuthObject=function(e,t,a,i){Fg.isN(i)&&!1!==i&&0!==i&&(i=!0),b={aTokenName:e,aTokenValue:t,aTokenWhere:a},K&&i&&__loadfaugconfig(b)},this.ia=this.initAuthObject,this.getSchemaMap=function(){return this.copy(u)};this.getSchemaMap;this.gsm=this.getSchemaMap,this.is=function(e,t){var a=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&a===e};var je=this.is;this.isNode=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName};this.isNode;this.isElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName};this.isElement;this.ise=this.isElement,this.byId=function(e){return Ie(e)?$(""):0==e.indexOf("#")?$(document.getElementById(e.substring(1))):$(document.getElementById(e))};var De=this.byId;this.bi=this.byId,this.byName=function(e){return $(document.getElementsByName(e))};this.byName;this.bn=this.byName,this.byIdEsc=function(e){if(!Ie(e))try{return $(e).length>0?$(e):0==e.indexOf("#")?$(document.getElementById(e.substring(1))):$(document.getElementById(e))}catch(t){return 0==e.indexOf("#")?$(document.getElementById(e.substring(1))):$(document.getElementById(e))}return $("")};this.byIdEsc;this.byie=this.byIdEsc,this.isN=function(e){return void 0===e||null==e||""===e};var Ie=this.isN;this.returnIfN=function(e,t){return Ie(e)?t:e};var Be=this.returnIfN;function Ee(e,t,a){var i=t[e],r=a.split("|");if("len"==r[0]||"length"==r[0])i=i.length;else if("regex"==r[0])return M[r[2]]||(M[r[2]]=new RegExp(r[2])),M[r[2]].test(i);return"="==r[1]?i==r[2]:"!="==r[1]?i!=r[2]:"<"==r[1]?i<r[2]:"<="==r[1]?i<=r[2]:">"==r[1]?i>r[2]:">="==r[1]?i>=r[2]:"!tb"==r[1]?i&&""!=i.trim():"tb"==r[1]?i&&""==i.trim():"!n"==r[1]?null!==i:"n"==r[1]?null===i:"u"==r[1]?void 0===i:"!u"==r[1]?void 0!==i:"e"==r[1]&&(null==i||""==i.trim())}function ze(e,t){if(!e)return[!1];var a,i=e.split("@");i.length>3?a=i[3].trim():("this"==i[0]&&3==i.length||"parent"==i[0]&&3==i.length)&&(a=i[2].trim());var r=!1;if("id"==i[0]){var n="#"+i[2];t=$(n)}else if("parent"==i[0])t=t.parent();else if("name"==i[0]){n='[name="'+i[2]+'"]';t=$(n)}else if("class"==i[0]){n="."+i[2];t=$(n)}else if("selector"==i[0]){n=i[2];t=$(n)}else if(0==i[0].indexOf("group:")){var s=i[0].split(":");if(s.length>=5)for(var o=s[1],l=s[2],d=s[3],c=s[4],u=s.length>5?s[5]:"",f=i[2],m=0;m<o;m++){n=("id"==c?"#":"")+f+(m+1);if("class"==l&&$(n).hasClass(d)){r=!0,t=$(n);break}if("attr"==l&&""!=u&&$(n).attr(d)==u||$(n).is("["+d+"]")){r=!0,t=$(n);break}}}return!r||0==i[0].indexOf("group:")&&r?function(e,t,a){var i,r=!0,n=t[0],s=t[1],o=0==n.indexOf("constant:"),l="value"==n,d="var"==n,c="gvar"==n,u="data"==n,f="route"==n,m="form"==n;if(e&&"object"==n)return(i=e[t[1]])&&a&&(i=$t(a,{value:i},!1,void 0,!1)),[!0,i];if(!e||0==e.length||o||d||l||c||u||f||m){if(d)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),(i=Fg.getVar(t[1]))&&a&&(i=$t(a,{value:i},!1,void 0,!1)),[!0,v?!i:i];if(c)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),(i=Vt(t[1]))&&a&&(i=$t(a,{value:i},!1,void 0,!1)),[!0,v?!i:i];if(f)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),(i=x[Y][t[1]])&&a&&(i=$t(a,{value:i},!1,void 0,!1)),[!0,v?!i:i];if(u){(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1));var h=Gt(e);if(h)return(i=h[t[1]])&&a&&(i=$t(a,{value:i},!1,void 0,!1)),[!0,v?!i:i]}else if(m){(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1));var g=function(e){var t=e.closest(".faug-form");if(t.length>0&&void 0!==t.attr("faug-sch-name"))return t.serializeObject(t.attr("faug-sch-name"))}(e);if(g){let e=[];if(-1!=t[1].indexOf("|")){let a=t[1].split("|");for(const t of a)e.push(t)}else e.push(t[1]);for(const t of e)if((i=g[t])&&a&&(i=$t(a,{value:i},!1,void 0,!1)),void 0!==i)break;return[!0,v?!i:i]}}else{if(o){var p=n.substring(9);return"undefined"==p?[!0,void 0]:"null"==p?[!0,null]:"true"==p?[!0,!0]:"false"==p?[!0,!1]:(a&&(i=$t(a,{value:p},!1,void 0,!1)),[!0,i])}var v;if(t.length>1)return(v=0==t[1].indexOf("!"))&&(t[1]=t[1].substring(1)),i=t[1],t[1]&&a&&(i=$t(a,{value:i},!1,void 0,!1)),[!0,v?!i:i]}return[!1]}return"value"==s?i=e.first().val():"text"==s?i=e.first().text():"html"==s?i=e.first().html():-1!=s.indexOf("a:")?i=e.first().attr(s.substring(2)):"valuetrim"==s?i=e.first().val().trim():"texttrim"==s?i=e.first().text().trim():"htmltrim"==s?i=e.first().html().trim():r=!1,r&&i&&a&&(i=$t(a,{value:i},!1,void 0,!1)),[r,i]}(t,i,a):[!1]}function Ve(e,t,a,i){if(-1!=e.indexOf(":")){var r,n=e.substring(0,e.indexOf(":")),s=e.substring(e.indexOf(":")+1);if("func"==n){var o=Ge(s,[t,a,i]);return!!o.valid&&o.result}var l=n.split("|"),d=a&&t.length>0?a:ze(s,t);if(d[0]){if("!n"==l[1])return null!==d[1];if("n"==l[1])return null===d[1];if("u"==l[1])return void 0===d[1];if("!u"==l[1])return void 0!==d[1];if("e"==l[1])return null===d[1]||void 0===d[1]||""==d[1].trim();if(void 0===d[1])return!1;if(r=d[1]+"","len"==l[0]||"length"==l[0])r=r.trim().length;else if("regex"==l[0])return M[l[2]]||(M[l[2]]=new RegExp(l[2])),M[l[2]].test(r);try{if(!isNaN(r)){var c=1*l[2];isNaN(c)||(l[2]=c)}}catch(e){}if("="==l[1])return r==l[2];if("!="==l[1])return r!=l[2];if("<"==l[1])return r<l[2];if("<="==l[1])return r<=l[2];if(">"==l[1])return r>l[2];if(">="==l[1])return r>=l[2];if("!tb"==l[1])return r&&""!=r.trim();if("tb"==l[1])return r&&""==r.trim()}}return!0}this.infixToPostfixEvaluate=function(e){if(!e||0==e.length)return!0;if(1==e.length)return e[0];for(var t,a,i,r=[],n=[],s=0;s<e.length;s++)if("&&"==e[s]||"||"==e[s]||"("==e[s])r.push(e[s]);else if(")"==e[s])for(;r.length>0;){var o=r[r.length-1];r.splice(-1,1),"("!=o&&n.push(o)}else n.push(e[s]),r.length>0&&("&&"==r[r.length-1]||"||"==r[r.length-1])&&(n.push(r[r.length-1]),r.splice(-1,1));n=n.reverse();for(var l=0,d=[];l<n.length;)if("&&"==n[l]||"||"==n[l]?(i&&d.push(i),i=n[l],t=void 0,a=void 0):void 0!==i&&void 0===a?a=n[l]:void 0!==i&&void 0!==a&&void 0===t?t=n[l]:d.push(n[l]),void 0!==t&&void 0!==a&&void 0!==i&&(a="&&"==i?t&&a:t||a,t=void 0,i=void 0,d.push(a)),++l==n.length&&d.length>0){if(n=d,1==d.length)break;d=[],l=0}return n[0]};var Me=this.infixToPostfixEvaluate;function Re(e,t,a){var i=!0;if(e){je("String",e)&&(e=[e]);for(var r=[],n=0;n<e.length;n++){var s=e[n];Ie(s)||("&&"==s.trim()||"||"==s.trim()||"("==s.trim()||")"==s.trim()?r.push(s.trim()):r.push(Ve(s,t,void 0,a)))}i=Me(r)}return i}function Le(e,t,a){var i=!0,r=[];if(e&&e.cond)for(var n=0;n<e.cond.length;n++){var s=e.cond[n];if(s.length>1&&s[0]){var o=Ve(s[0],t,a);!o&&s[1]?r.push(s[1]):r.push(void 0),i&=o}}return[i,r]}function Ue(e){var a=t.getDialog(e,He);return a||He(e)}function qe(e,t){var a=e.cond;if((e.show||e.hide)&&Re(a,t)){var i=e.showclass?e.showclass:void 0,r=e.hideclass?e.hideclass:void 0,n=e.show,s=e.hide;if(n&&n.length>0)for(var o=0;o<n.length;o++)i&&r?(De(n[o]).removeClass(r),De(n[o]).addClass(i)):i?De(n[o]).addClass(i):r?De(n[o]).removeClass(r):De(n[o]).show();if(s&&s.length>0)for(o=0;o<s.length;o++)i&&!r?(De(s[o]).removeClass(i),De(s[o]).addClass(r)):i?De(s[o]).removeClass(i):r?De(s[o]).addClass(r):De(s[o]).hide()}}function He(e){return function(t,a,i,r,n){t&&!a&&(a=$(t.currentTarget),t.stopPropagation()),J=H,t&&"hashchange"!=t.type&&(H=$(t.currentTarget));var s=x[Y],o=Gt(J),l=Gt(H),d=(e.crudop,e.load),c={};if(e.vars)for(var u in e.vars){if(e.vars.hasOwnProperty(u))(h=ze(e.vars[u],a))[0]&&(c[u]=h[1])}var m=[t,a,l,o,s,i,c];if(e.varAssign)for(var u in e.varAssign){var h;if(e.varAssign.hasOwnProperty(u))(h=ze(e.varAssign[u],a))[0]&&Fg.addGlobalVar(u,h[1])}var g=Re(e.cond,a,m);if(g||!0===n){var p=!0;if(!Ie(d)&&!Ie(d.selector)&&!Ie(d.template)&&(!d.checkPresence||d.checkPresence&&0==$(d.checkPresence).length)){p=!1;if(Re(d.cond,a)||!0===n)if(!Ie(d.store_var)&&!Ie(d.store_var.name)&&!Ie(d.store_var.key)&&f[d.store_var.name]&&Fg.g(d.store_var.key)&&f[d.store_var.name][Fg.g(d.store_var.key)]){var v=f[d.store_var.name][Fg.g(d.store_var.key)];$.get(d.template,function(e,t,a,i,r){return function(n){Je(e,t,i,e.load.selector,a,n,r)}}(e,m,v,a,r))}else $(d.selector).load(d.template,function(e,t,a){return function(){Je(e,t,a,void 0,void 0,void 0,r)}}(e,m,a))}p&&Je(e,m,a,void 0,void 0,void 0,r)}return g}}function Je(e,a,i,n,s,o,l){var d=e.eleid,c=e.jqselector,f=e.func,m=e.outfunc,h=(e.load,e.crudop),g=e.showhide,p=e.routeTo,v=e.preRouteTo,y=e.draw,b=e.every,_=e.forRoute;if(we)for(var w in we)"windows"!=w&&we.hasOwnProperty(w)&&w!=r&&(clearInterval(we[w]),delete we[w]);h&&!je("Array",h)&&(h=[h]),y&&!je("Array",y)&&(y=[y]),a.push(!0);var F=[];if(l){for(var O=0;O<l.length;O++)F.push(l[O]);for(O=3;O<a.length;O++)F.push(a[O])}else for(O=0;O<a.length;O++)F.push(a[O]);if(n&&o&&(o=t.templateEngine(o,s,!1),$(n).html(o)),v){var k={};if(a[4]){var T=a[4];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}if(a[6]){T=a[6];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}v=$t(v,k,void 0,void 0,!1),Kt(v)}if(Ie(f)||Ge(f,F),h)for(var A=0;A<h.length;A++){var N=u[h[A].schemaName].crud[h[A].op];if(h[A].vars)for(var S in N.transientVars={},h[A].vars){if(h[A].vars.hasOwnProperty(S))(C=ze(h[A].vars[S],a[1]))[0]&&(N.transientVars[S]=C[1])}if(a[4]){N.transientVars||(N.transientVars={});T=a[4];for(var S in T)T.hasOwnProperty(S)&&(N.transientVars[S]=T[S])}if(a[6]){N.transientVars||(N.transientVars={});T=a[6];for(var S in T)T.hasOwnProperty(S)&&(N.transientVars[S]=T[S])}if(h[A].setVars)for(var S in h[A].setVars){if(h[A].setVars.hasOwnProperty(S))(C=ze(h[A].setVars[S],a[1]))[0]&&Fg.addVar(S,C[1])}if(h[A].setGlobals)for(var S in h[A].setGlobals){var C;if(h[A].setGlobals.hasOwnProperty(S))(C=ze(h[A].setGlobals[S],a[1]))[0]&&Fg.addGlobalVar(S,C[1])}Ct(1==h.length?f:null,h[A],[a[0],a[1]],d,c)}if(y)for(A=0;A<y.length;A++){var P=y[A];if(P.schemaName){var j=!0===P.show;"edit"===P.type?ft(P.schemaName,void 0,j):"editCM"===P.type?ft(P.schemaName,a[2],j):"editPM"===P.type?ft(P.schemaName,a[3],j):"reset"===P.type?mt(P.schemaName):ut(P.schemaName,void 0,j)}}if(g)for(A=0;A<g.length;A++)qe(g[A],i);if(Ie(m)||Ge(m,F),b&&b.duration&&!isNaN(b.duration)){var D=!0;if(b.forRoute)for(var I=0;I<b.forRoute.length;I++)D|=r==_[I];if(D&&!we[r])return void(we[r]=setInterval((function(){x[q]=!0,Fg.routeTo(Fg.getRoute()),x[q]=!1}),b.duration))}if(p){k={};if(a[4]){T=a[4];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}if(a[6]){T=a[6];for(var S in T)T.hasOwnProperty(S)&&(k[S]=T[S])}p=$t(p,k,void 0,void 0,!1),Kt(p)}}this.execSchemaCallBack=function(e,t,a,i,r){if(e in u){var n=u[e];if(n.crud&&t in n.crud){var s=n.crud[t];"callbacks"in s&&Xe(s.callbacks,a,[i],r)}}};this.execSchemaCallBack;this.escb=this.execSchemaCallBack;var We=null;this.execCallBack=function(e,t,a,i){void 0===i&&(i=!0),i&&a.unshift(t);var r={valid:!1,result:void 0},n={};if(e){if(void 0!==e&&void 0!==e[t]){e[t];var s=void 0;if(je("Object",e[t])){for(var o in e[t])if(e[t].hasOwnProperty(o)&&"controlEvents"==o&&je("Array",e[t][o]))for(var l=e[t][o],d=0;d<l.length;d++){var c=l[d].jqselector,u=l[d].eleid,f=l[d].event;if(je("Array",l[d].cond)||(l[d].cond=[l[d].cond]),f)for(var m=f.split(","),h=0;h<m.length;h++)Ie(u)?Ie(c)?$(window).off(m[h]+".fg"):$(c).off(m[h]+".fg"):Ie(c)?De(u).off(m[h]+".fg"):De(u).off(m[h]+".fg",c)}for(var o in e[t])if(e[t].hasOwnProperty(o)&&"controlEvents"==o&&je("Array",e[t][o]))for(l=e[t][o],d=0;d<l.length;d++){c=l[d].jqselector,u=l[d].eleid,f=l[d].event;var g=l[d].delay;l[d].crudop;if(je("Array",l[d].cond)||(l[d].cond=[l[d].cond]),f)for(m=f.split(","),h=0;h<m.length;h++){var p=function(e,t){return function(a){if($(this).attr("data-regex")&&Ae){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!new RegExp($(this).attr("data-regex")).test($(this).val()))return Fg.execFunc(Ae,[$(this)]),a.stopPropagation(),!1}else if(Se&&Ae){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!Se.test($(this).val()))return Fg.execFunc(Ae,[$(this)]),a.stopPropagation(),!1}else if(xe&&(xe===e.jqselector||xe===e.eleid)&&Oe&&"file"!=$(this).prop("type")&&""!=$(this).val()&&!Oe.test($(this).val()))return Fg.execFunc($e,[$(this)]),!1;if($(".faug-scrollable-menu").attr("prev-child-bgc")||$(".faug-scrollable-menu").attr("prev-child-bgc",$(".faug-scrollable-menu").children().eq(0).css("background-color")),$(".faug-scrollable-menu").is(":visible")&&(38==a.keyCode||40==a.keyCode||13==a.keyCode))return 38==a.keyCode?(-2==_e&&(_e=1),0==_e&&(_e=faugScrollableListLength),--_e>=0&&($(".faug-scrollable-menu").children().css("background-color",$(".faug-scrollable-menu").attr("prev-child-bgc")),$(".faug-scrollable-menu").children().eq(_e).css("background-color","#cccccc"),$(".faug-scrollable-menu").children().eq(_e)[0].scrollIntoView(!1))):40==a.keyCode?(-2==_e&&(_e=-1),++_e==faugScrollableListLength&&(_e=0),_e<faugScrollableListLength&&($(".faug-scrollable-menu").children().css("background-color",$(".faug-scrollable-menu").attr("prev-child-bgc")),$(".faug-scrollable-menu").children().eq(_e).css("background-color","#cccccc"),$(".faug-scrollable-menu").children().eq(_e)[0].scrollIntoView(!1))):13==a.keyCode&&$(".faug-scrollable-menu").children().eq(_e>=0?_e:0).trigger("click"),a.stopPropagation(),!1;var i=Ue;"keyup"!=t.toLowerCase()&&"keydown"!=t.toLowerCase()&&"keypress"!=t.toLowerCase()||(g||(g=1e3),i=function(e){return function(t,a){clearTimeout(We),We=setTimeout(function(t,a){return function(){13==t.keyCode&&t.stopPropagation(),Ue(e)(t,a)}}(t,a),g)}}),i(e)(a)}};Ie(u)?Ie(c)?$(window).off(m[h]+".fg",p(l[d],m[h])):($(c).on(m[h]+".fg",p(l[d],m[h])),"INPUT"!=$(c).prop("tagName")&&"TEXTAREA"!=De(u).prop("tagName")||$(c).attr("data-rgo","1")):Ie(c)?(De(u).on(m[h]+".fg",p(l[d],m[h])),"INPUT"!=De(u).prop("tagName")&&"TEXTAREA"!=De(u).prop("tagName")||De(u).attr("data-rgo","1")):(De(u).on(m[h]+".fg",c,p(l[d],m[h])),"INPUT"!=De(u).prop("tagName")&&"TEXTAREA"!=De(u).prop("tagName")||De(u).attr("data-rgo","1"))}}else n[o]=e[t][o]}He(n)(void 0,void 0,void 0,a)}}else if(t){var v=x[Y],y={};if(s)for(var b in s)if(s.hasOwnProperty(b)){var _=ze(s[b],void 0);_[0]&&(y[b]=_[1])}a.push(v),a.push(y),r=Ge(t,a)}return r};var Xe=this.execCallBack;this.ecb=this.execCallBack,this.execFunc=function(e,t,a){var i={valid:!1,result:void 0};try{if(e){if("function"==typeof e)i.result=a?e.apply(null,t):e(t),i.valid=!0;else if(je("String",e)){var r=window[e];-1!=e.indexOf(".")&&(r=st(window,e)),"function"==typeof r&&(i.result=a?r.apply(null,t):r(t),i.valid=!0)}}else;}catch(e){console.error(e)}return i};var Ge=this.execFunc;function Ye(t,a){t=templateFile;var i={rows:null,options:null,row:null},r=0;je("Array",e[templateFile])&&(t=e[templateFile][0],i=e[templateFile][1],r=3==e[templateFile].length?e[templateFile][2]:0),$.get(t,function(e,t,a,i,r){return function(n){X[t]=a?[n,3,a]:[n,i],e(t,n,a,a?3:0),r()}}(Ot,t,i,r,a))}function Qe(e,t,a){$.get(e,function(e,t){return function(a){try{try{var i=JSON.stringify(a,aa);a=JSON.parse(i)}catch(t){t+=" ("+e+")",console.log("Problem templatizing schema "+t)}vt(a,!1,!1,!1,!1,!1,!0,t)}catch(t){t+=" ("+e+")",console.log("Problem parsing schema "+t)}}}(t,a))}function Ke(e){return e.headers?{method:e.method,headers:e.headers,status:e.status,responseURL:e.responseURL,responseText:e.responseText,responseXML:e.responseXML,responseJSON:e.responseJSON,statusText:e.statusText,readyState:e.readyState,getAllResponseHeaders:function(){return this.headers},statusCode:function(){return this.status},getResponseHeader:function(e){for(var t=this.headers.split("\n"),a=[],i=0;i<t.length;i++){e==t[i].substring(0,t[i].indexOf(": "))&&a.push(t[i].substring(t[i].indexOf(": ")+2))}return 1==a.length?a[0]:0!=a.length?a:void 0}}:e}this.ef=this.execFunc,this.clearApiCache=function(e,t,a){if(!Ie(e)&&!Ie(t)){var i=e+t;for(var r in Ie(a)||(i=a),fe)fe.hasOwnProperty(r)&&0==r.indexOf(i)&&delete fe[r]}},this.cac=this.clearApiCache,this.ajaxGet=function(e,t,a,i,r,n,s,o,l){Ze(e,"GET",t,"",null,a,i,r,n,s,o,l)},this.aj=this.ajaxGet,this.ajaxPost=function(e,t,a,i,r,n,s,o,l,d,c){Ze(e,"POST",t,a,i,r,n,s,o,l,d,c)},this.apo=this.ajaxPost,this.ajaxPut=function(e,t,a,i,r,n,s,o,l,d,c){Ze(e,"PUT",t,a,i,r,n,s,o,l,d,c)},this.apu=this.ajaxPut,this.ajaxDelete=function(e,t,a,i,r,n,s,o,l,d,c){Ze(e,"DELETE",t,a,i,r,n,s,o,l,d,c)},this.ad=this.ajaxDelete,this.ajaxCall=function(e,t,a,i,r,n,s,o,l,d,c,u){if(null==l&&(l=!0),l){var f=t+a+r;et(e,t,a,i,r,n,u).done(function(e,t,a){return function(i,r,n){null==i&&(i=n.responseText),u&&!isNaN(u)&&(fe[t]={t:(new Date).getTime(),d:i}),a&&(e?(e.unshift(i),a.apply(null,e)):a(i))}}(d,f,s)).fail(function(e,t,a){return function(t,i){null==t&&(t=i.responseText),a&&(e?(e.unshift(t),a.apply(null,e)):a(t))}}(c,0,o))}else{le&&!Fg.isN(ne)&&le.test(a)&&0!=a.indexOf(ne)&&(a=0==a.indexOf("/")?ne+a:ne+"/"+a),n=n||{},b&&("queryparam"===b.aTokenWhere?-1===a.indexOf("?")?a+="?"+b.aTokenName+"="+b.aTokenValue:"?"===a[a.length-1]?a+=b.aTokenName+"="+b.aTokenValue:a+="&"+b.aTokenName+"="+b.aTokenValue:"header"!==b.aTokenWhere||n.hasOwnProperty(b.aTokenName)||(n[b.aTokenName]=b.aTokenValue)),"application/json"===i&&!Fg.isN(r)&&Fg.is("String",r)&&JSON.parse(r),e&&Pt(!0);f=t+a+r;if(je("String",de)){var m=Fg.execFunc(de,[a,t]);m.valid&&m.result&&(n["X-Correlation-Id"]=m.result,-1==a.indexOf("?")?a+="?X_Correlation_Id="+m.result:"?"==a[a.length-1]?a+="X_Correlation_Id="+m.result:a+="&X_Correlation_Id="+m.result)}if(/get/i.test(t)&&(r=void 0,i=void 0),u&&fe[f]&&(new Date).getTime()-fe[f].t<u){e&&Pt(!1);var h=fe[f].d;s&&(d?(d.unshift(h),s.apply(null,d)):s(h))}else $.ajax({headers:n,type:t,processData:!1,url:a,contentType:i,data:r,async:l}).done((function(t,a,i){e&&Pt(!1);var r=i.responseJSON;if(null==r)try{r=JSON.parse(i.responseText)}catch(e){i.parseErr=e,r=i.responseText}u&&!isNaN(u)&&(fe[f]={t:(new Date).getTime(),d:r}),s&&(d?(d.unshift(r),s.apply(null,d)):s(r))})).fail((function(t,a,i){if(e&&Pt(!1),499==t.status){var r=atob(t.responseText);return Fg.sp("baseUrl",r),void $.ajax(this)}var n=t.responseJSON;if(null==n)try{n=JSON.parse(t.responseText)}catch(e){t.parseErr=e,n=t.responseText}o&&(c?(c.unshift(n),o.apply(null,c)):o(n))}))}};var Ze=this.ajaxCall;this.ac=this.ajaxCall,this.get=function(e,t,a,i){return et(e,"GET",t,"",null,a,i)},this.post=function(e,t,a,i,r,n){return et(e,"POST",t,a,i,r,n)},this.put=function(e,t,a,i,r,n){return et(e,"PUT",t,a,i,r,n)},this.del=function(e,t,a,i,r,n){return et(e,"DELETE",t,a,i,r,n)},this.api=function(e,t,a,i,r,n,s){-1===document.URL.indexOf("http://")&&document.URL.indexOf("https://");if(W<=0||"undefined"==typeof Worker){n=n||{},b&&("queryparam"==b.aTokenWhere?-1==a.indexOf("?")?a+="?"+b.aTokenName+"="+b.aTokenValue:"?"==a[a.length-1]?a+=b.aTokenName+"="+b.aTokenValue:a+="&"+b.aTokenName+"="+b.aTokenValue:"header"==b.aTokenWhere&&!n.hasOwnProperty(b.aTokenName)&&b.aTokenValue&&(n[b.aTokenName]=b.aTokenValue)),"application/json"==i&&!Fg.isN(r)&&Fg.is("String",r)&&JSON.parse(r),e&&Pt(!0);var l=t+a+r;if(je("String",de))(c=Fg.execFunc(de,[a,t])).valid&&c.result&&(n["X-Correlation-Id"]=c.result,-1==a.indexOf("?")?a+="?X_Correlation_Id="+c.result:"?"==a[a.length-1]?a+="X_Correlation_Id="+c.result:a+="&X_Correlation_Id="+c.result);if(/get/i.test(t)&&(r=void 0,i=void 0),le&&!Fg.isN(ne)&&le.test(a)&&0!=a.indexOf(ne)&&(a=0==a.indexOf("/")?ne+a:ne+"/"+a),s){if(fe[l]&&(new Date).getTime()-fe[l].t<s){var d=fe[l].d;return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,t){return function(){t&&Fg.freezeUI(!1),e._d&&e._d(d)}}(this,e),100),this}}.init()}return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,o){return function(){$.ajax({headers:n,type:t,processData:!1,dataType:"text",url:a,contentType:i,data:r,async:!0}).always((function(e,t,a){o&&Pt(!1)})).done((function(t,a,i){if(t="json"===i.responseType?i.response:void 0,204!=i.status&&!t&&i.responseText)try{t=JSON.parse(i.responseText),i.responseJSON=t}catch(e){i.parseErr=e,t=i.responseText}s&&!isNaN(s)&&(fe[l]={t:(new Date).getTime(),d:t}),e._d&&e._d(t,a,i)})).fail((function(t,a,i){if(i="json"===t.responseType?t.response:void 0,204!=t.status){if(499==t.status){var r=atob(t.responseText);return Fg.sp("baseUrl",r),void $.ajax(this)}if(!i&&t.responseText)try{i=JSON.parse(t.responseText),t.responseJSON=i}catch(i){t.parseErr=i,i=t.responseText}}e._f&&e._f(i,t,a)}))}}(this,e),100),this}}.init()}return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,s){return function(){$.ajax({headers:n,type:t,processData:!1,dataType:"text",url:a,contentType:i,data:r,async:!0}).always((function(e,t,a){s&&Pt(!1)})).done((function(t,a,i){if(t="json"===i.responseType?i.response:void 0,204!=i.status&&!t&&i.responseText)try{t=JSON.parse(i.responseText),i.responseJSON=t}catch(e){i.parseErr=e,t=i.responseText}e._d&&e._d(t,a,i)})).fail((function(t,a,i){if(i="json"===t.responseType?t.response:void 0,204!=t.status){if(499==t.status){var r=atob(t.responseText);return Fg.sp("baseUrl",r),void $.ajax(this)}if(!i&&t.responseText)try{i=JSON.parse(t.responseText),t.responseJSON=i}catch(i){t.parseErr=i,i=t.responseText}}e._f&&e._f(i,t,a)}))}}(this,e),100),this}}.init()}if(W>0){n=n||{},b&&("queryparam"==b.aTokenWhere?-1==a.indexOf("?")?a+="?"+b.aTokenName+"="+b.aTokenValue:"?"==a[a.length-1]?a+=b.aTokenName+"="+b.aTokenValue:a+="&"+b.aTokenName+"="+b.aTokenValue:"header"!=b.aTokenWhere||n.hasOwnProperty(b.aTokenName)||(n[b.aTokenName]=b.aTokenValue)),"application/json"==i&&!Fg.isN(r)&&Fg.is("String",r)&&JSON.parse(r);var c;l=t+a+r;if(je("String",de))(c=Fg.execFunc(de,[a,t])).valid&&c.result&&(n["X-Correlation-Id"]=c.result,-1==a.indexOf("?")?a+="?X_Correlation_Id="+c.result:"?"==a[a.length-1]?a+="X_Correlation_Id="+c.result:a+="&X_Correlation_Id="+c.result);/get/i.test(t)&&(r=void 0,i=void 0),le&&!Fg.isN(ne)&&le.test(a)&&0!=a.indexOf(ne)&&(a=0==a.indexOf("/")?ne+a:ne+"/"+a),e&&Pt(!0);var u=[t,a,i,r,n,s,e,(new Error).stack];if(s){if(fe[l]&&(new Date).getTime()-fe[l].t<s){d=fe[l].d;return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,t){return function(){t&&Fg.freezeUI(!1),e._d&&e._d(d)}}(this,e),100),this}}.init()}var f=o.execute(u);return{_d:null,_f:null,done:function(e){return this._d=e,this},fail:function(e){return this._f=e,this},init:function(){return setTimeout(function(e,t){f.done((function(a,i,r){s&&!isNaN(s)&&(fe[l]={t:(new Date).getTime(),d:a}),t&&Fg.freezeUI(!1),e._d&&e._d(a,i,r)})).fail((function(a,i){t&&Pt(!1),e._f&&e._f(a,i)}))}(this,e),100),this}}.init()}return o.execute(u)}};var et=this.api;function tt(e,t,a,i,r){var n="";if(je("Object",i)){for(var s in i)i.hasOwnProperty(s)&&null!=i[s]&&void 0!==i[s]&&(n+=s+'="'+Wt(Fg.eh(i[s]))+'" ');i=n}if(null==r&&(r="div"),null==e||void 0===e)return[t,a,i,r];var o="",l="",d="";if(e.hasOwnProperty("el")&&(r=e.el),e.hasOwnProperty("attrpos")&&(o=e.attrpos),e.hasOwnProperty("stylepos")&&(l=e.stylepos),e.hasOwnProperty("classpos")&&(d=e.classpos),""==o&&(o="append"),""==l&&(l="append"),""==d&&(d="append"),void 0!==e.style&&""!=e.style&&("append"==l?t+=";"+e.style+";":t="prepend"==l?e.style+";"+t:e.style+";"),void 0!==e.attrs){var c="";for(var s in e.attrs)e.attrs.hasOwnProperty(s)&&null!=e.attrs[s]&&void 0!==e.attrs[s]&&(c+=s+'="'+Wt(Fg.eh(e.attrs[s]))+'" ');"append"==o?i+=" "+c:"prepend"==o?t=i+" "+c:i=c}return void 0!==e.class&&""!=e.class&&("append"==d?a+=" "+Fg.eh(e.class):a="prepend"==d?" "+Fg.eh(e.class)+" "+a:Fg.eh(e.class)+" "),[Wt(t),Wt(a),i,r]}function at(e,t,a,i,r,n,s,o,l,d,c,u,f,m,h,g){var p,v;s&&je("Array",s)?(p=s[0],s.length>1&&(v=s[1])):p=s;var y=!1;n&&n.hasOwnProperty("showhelptext")&&(y=1==n.showhelptext||1==n.showhelptext);var b,_,w=Fg.getString(Ne.form.element.container.style),F=Fg.copy(Ne.form.element.container.attrs),O=Fg.getString(Ne.form.element.container.class),$=Fg.getString(Ne.form.element.container.ele),k=Fg.getString(Ne.form.element.label.style),T=Fg.copy(Ne.form.element.label.attrs),S=Fg.getString(Ne.form.element.label.class),A=Fg.getString(Ne.form.element.label.ele),N=Fg.getString(Ne.form.element.this.style),C=Fg.copy(Ne.form.element.this.attrs),P=Fg.getString(Ne.form.element.this.class),j=e,D=Fg.getString(Ne.form.element.icon.style),I=Fg.copy(Ne.form.element.icon.attrs),B=Fg.getString(Ne.form.element.icon.class),E=Fg.getString(Ne.form.element.icon.ele),z=void 0;void 0!==t&&(w=t[0],O=t[1],F=t[2],$=t.length>3?t[3]:$),void 0!==a&&(k=a[0],S=a[1],T=a[2],A=a[3]>3?a[3]:A),void 0!==r&&(N=r[0],P=r[1],C=r[2],j=r[3]>3?r[3]:j),void 0!==i&&(D=i[0],B=i[1],I=i[2],E=i[3]>3?i[3]:E),!n||!0!==n.transient&&"true"!==n.transient||(C["faug-transient"]="yes");var V=void 0,M=void 0,R=void 0,L=void 0,U=void 0,q=void 0;Ie(o)||(V=o,o&&(void 0!==o.label&&(M=o.label.custom),void 0!==o.container&&(R=o.container.custom),void 0!==o.helpText&&(L=o.helpText.custom),void 0!==o.icon&&(U=o.icon.custom),_=o.customTemplate),"radio"!=z&&"checkbox"!=z||(P=P.replace("form-control",""))),Ie(n)||(V=n.custom,n.hasOwnProperty("custom")&&(void 0!==n.custom.label&&(M=n.custom.label.custom),void 0!==n.custom.container&&(R=n.custom.container.custom),void 0!==n.custom.helpText&&(b=n.custom.helpText,L=n.custom.helpText.custom),void 0!==n.custom.icon&&(U=n.custom.icon.custom),void 0!==n.custom.opts&&(q=n.custom.opts),void 0!==n.custom.customTemplate&&(_=n.custom.customTemplate)),"radio"!=(z=n.ui)&&"checkbox"!=z||(P=P.replace("form-control","")));var H=C.value,J=C.id;C.id=void 0;var W="";-1!=P.indexOf("faug-comp-add-button")?W=" faug-comp-add-button":-1!=P.indexOf("faug-comp-remove-button")?W=" faug-comp-remove-button":-1!=P.indexOf("faug-comp-min-button")?W=" faug-comp-min-button":-1!=P.indexOf("faug-comp-max-button")?W=" faug-comp-max-button":-1!=P.indexOf("faug-input-reset")?W=" faug-input-reset":-1!=P.indexOf("faug-input-submit")&&(W=" faug-input-submit"),-1!=P.indexOf("faug-comp-min-state")?W=" faug-comp-min-state":-1!=P.indexOf("faug-comp-max-state")&&(W=" faug-comp-max-state");var X=tt(V,N,P,C,j);if(N=X[0],P=X[1],C=X[2],j=X[3],P+=W,k=(X=tt(M,k,S,T,A))[0],S=X[1],T=X[2],A=X[3],D=(X=tt(U,D,B,I,E))[0],B=X[1],I=X[2],E=X[3],w=(X=tt(R,w,O,F,$))[0],O=X[1],F=X[2],$=X[3],$=Be($,"div"),A=Be(A,"label"),j=Be(j,e),E=Be(E,"i"),n&&"html"==n.type&&n.value){var G=n.value;return!0===n.isTemplate&&(G=$t(G,Vt())),!0===n.container&&(G=Mt($,null,w,O,F,G,!0)),G}Ie(n)||(n.type?C+=' faug-data-type="'+Wt(Fg.eh(n.type))+'" ':C+=' faug-data-type="other" ');var Q="";if(y){var K=Fg.getString(Ne.form.element.helptext.style),Z=Fg.getString(Ne.form.element.helptext.class),ee=Fg.copy(Ne.form.element.helptext.attrs),te=Fg.getString(Ne.form.element.helptext.ele);!b||void 0!==b.show&&b.show||(K="display:none;"),b&&(Q=b.value),K=(X=tt(L,K,Z,ee,te))[0],Z=X[1],ee=X[2],te=X[3],Q=Mt(te=Be(te,"span"),null,K,Z,ee,Q,!0)}var ae="";U&&U.html&&(ae=U.html);var ie=d?Mt(E,null,D,B,I,ae,!0):"";M&&M.html&&(c=M.html),n.required&&n.required+"".toLowerCase()=="true"&&(M&&M.requiredHtml?!0!==n["required-nohtm"]&&(c+=M.requiredHtml):Ne.form.element.label.requiredHtml&&!0!==n["required-nohtm"]&&(c+=Ne.form.element.label.requiredHtml));var re,ne=l?Mt(A,null,k,S,T,c,!0):"";n&&n.posistioning&&(re=n.posistioning,(""!=ne&&-1==re.indexOf("label")||""!=ie&&-1==re.indexOf("icon")||""!=Q&&-1==re.indexOf("helptext")||-1==re.indexOf("this"))&&(re=void 0)),re||(re=["label","icon","this","helptext","html"]);var se=n?n.html:"";se||(se="");var oe="value";(void 0!==n&&n.serializeValuePosition&&0==(oe=n.serializeValuePosition).indexOf("a:")&&(oe=oe.substring(2)),void 0!==n&&n.serializeValueFunction)&&(C+=' faug-serialize-function="'+Wt(n.serializeValueFunction)+'" ');if(C+=' faug-serialize-position="'+Wt(Fg.eh(oe))+'" ',(h=!0===h)&&(F+=' faug-read-only="true"'),void 0!==n&&u){var le="",de=n.hasOwnProperty("default")?n.default:null,ce=n.attrAssign;!je("Array",n.attrAssign)&&ce&&(ce=[n.attrAssign]),ce||(ce=[]);for(var ue=0;ue<ce.length;ue++){var fe=ce[ue];fe&&fe.to&&(fe.fromVar?le=Wt(fe.to)+'"'+Wt(Fg.eh(Vt(fe.fromVar)))+'" ':fe.fromRoute?le=Wt(fe.to)+'"'+Wt(Fg.eh(x[Y][fe.fromRoute]))+'" ':v&&fe.fromData&&(le=Wt(fe.to)+'"'+Wt(Fg.eh(v[fe.fromData]))+'" '))}var me=n.valueAssign;!je("Array",n.valueAssign)&&me&&(me=[n.valueAssign]),me||(me=[]);for(ue=0;ue<me.length;ue++){var he=me[ue];he&&(de=v&&he.fromData?v[he.fromData]:he.fromVar?Vt(he.fromVar):he.fromRoute?x[Y][he.fromRoute]:Vt(he))}var ge=n.hasOwnProperty("defaultIndex")?n.defaultIndex:null;if(C+=n.hasOwnProperty("multiple")&&n.multiple?"multiple=true ":"",void 0!==z&&null!=z||(z="select"),z=z.toLowerCase(),null==(null!=f&&ge<f.length&&ge>=0?ge:null)&&null!=de&&null==p&&(p=de),null!=p&&null!=f){ge=null;for(ue=0;ue<f.length;ue++)if(f[ue][0]==p+""){ge=ue;break}}var pe="";if(null!=p){var ve="str@"+p;je("Array",p)&&p.length>1&&(ve="jsn@"+Wt(JSON.stringify(p))),F+=' acvalue="'+Fg.eh(ve)+'"'}else ge&&(F+=' acvalue="ind@'+ge+'"');if(h)pe=Mt(j="div",null,N,P,C,pe="",!0);else if("select"==z){if(!0===n.addId&&(C+=' id="'+Wt(J)+'" '),n.hasOwnProperty("multiple")&&n.multiple?(C+="multiple=true ",P+=" faug-input-select-multiple "):P+=" faug-input-select ",j="select",null!=f){Ie(ge);for(ue=0;ue<f.length;ue++){var ye=f[ue].length>1?f[ue][1]:f[ue][0],be=null!=ge&&ge==ue?"selected":"";pe+='<option value="'+Wt(Fg.eh(f[ue][0]))+'" '+le+be+">"+Fg.eh(ye)+"</option>"}}pe=Mt(j,null,N,P,C,pe,!0)}else if("radio"==z){var _e=Fg.getString(Ne.form.radio.label.style),we=Fg.copy(Ne.form.radio.label.attrs),Fe=Fg.getString(Ne.form.radio.label.class),xe=Fg.getString(Ne.form.radio.label.ele),Oe=Fg.getString(Ne.form.radio.container.style),$e=Fg.copy(Ne.form.radio.container.attrs),ke=Fg.getString(Ne.form.radio.container.class),Te=Fg.getString(Ne.form.radio.container.ele);V&&(V.innerlabel&&(De=V.innerlabel.custom),V.innercontainer&&(Ee=V.innercontainer.custom)),Oe=(X=tt(Ee,Oe,ke,$e,Te))[0],ke=X[1],$e=X[2],Te=X[3],_e=(X=tt(De,_e,Fe,null,xe))[0],Fe=X[1],xe=X[3];var Se="";if(De&&void 0!==De.labelpos&&null!==De.labelpos&&(Se=De.labelpos),""==Se&&(Se="contained"),null!=f){Ie(ge),j=Fg.getString(Ne.form.radio.this.ele),C+='type="radio" '+le,P+=" faug-input-radio ";for(ue=0;ue<f.length;ue++){var Ae=C+'type="radio" value="'+Wt(Fg.eh(f[ue][0]))+'" ';J&&(Ae+=' id="'+Wt(J+ue)+'" ',we||(we={}),we.for=J+ue);var Ce=(X=tt(De,null,null,we,null))[2];ye=f[ue].length>1?Fg.eh(f[ue][1]):Fg.eh(f[ue][0]);Ae+=null!=ge&&ge==ue?"checked":"";var Pe="";"before"==Se?(Pe=Mt(xe,null,_e,Fe,Ce,ye,!0),Pe+=Mt(j,null,N,P,Ae,null,!0)):"contained"==Se?(Pe=Mt(j,null,N,P,Ae,null,!0),Pe=Mt(xe,null,_e,Fe,Ce,ye+Pe,!0)):"after"==Se&&(Pe=Mt(j,null,N,P,Ae,null,!0),Pe+=Mt(xe,null,_e,Fe,Ce,ye,!0)),pe+=Mt(Te,null,Oe,ke,$e,Pe,!0)}}}else if("checkbox"==z){var De,Ee;_e=Fg.getString(Ne.form.checkbox.label.style),we=Fg.copy(Ne.form.checkbox.label.attrs),Fe=Fg.getString(Ne.form.checkbox.label.class),xe=Fg.getString(Ne.form.checkbox.label.ele),Oe=Fg.getString(Ne.form.checkbox.container.style),$e=Fg.copy(Ne.form.checkbox.container.attrs),ke=Fg.getString(Ne.form.checkbox.container.class),Te=Fg.getString(Ne.form.checkbox.container.ele);V&&(V.innerlabel&&(De=V.innerlabel.custom),V.innercontainer&&(Ee=V.innercontainer.custom)),Oe=(X=tt(Ee,Oe,ke,null,Te))[0],ke=X[1],$e=X[2],Te=X[3],_e=(X=tt(De,_e,Fe,null,xe))[0],Fe=X[1],xe=X[3];Se="";if(De&&void 0!==De.labelpos&&null!==De.labelpos&&(Se=De.labelpos),""==Se&&(Se="contained"),(!f||je(f,"Array")&&0==f.length)&&(f=[[""]],Se="after"),null!=f){Ie(ge),j=Fg.getString(Ne.form.checkbox.this.ele),C+='type="checkbox" ',P+=" faug-input-checkbox ";for(ue=0;ue<f.length;ue++){Ae=C+'type="checkbox" value="'+Wt(f[ue][0])+'" ';J&&(Ae+=' id="'+Wt(J+ue)+'" ',we||(we={}),we.for=J+ue);Ce=(X=tt(De,null,null,we,null))[2],ye=f[ue].length>1?Fg.eh(f[ue][1]):Fg.eh(f[ue][0]);Ae+=null!=ge&&ge==ue?'checked="checked"':"";Pe="";"before"==Se?(Pe=Mt(xe,null,_e,Fe,Ce,ye,!0),Pe+=Mt(j,null,N,P,Ae,null,!0)):"contained"==Se?(Pe=Mt(j,null,N,P,Ae,null,!0),Pe=Mt(xe,null,_e,Fe,Ce,ye+Pe,!0)):"after"==Se&&(Pe=Mt(j,null,N,P,Ae,null,!0),Pe+=Mt(xe,null,_e,Fe,Ce,ye,!0)),pe+=Mt(Te,null,Oe,ke,$e,Pe,!0)}}}if(_&&!1!==n.show){var ze={label:ne,icon:ie,helptext:Q,html:se,element:pe,cc:O,cs:w,ca:F};if(q)for(var Ve in q)q.hasOwnProperty(Ve)&&!/label|icon|helptext|customhtml|element|cc|cs|ca/.test(Ve)&&(ze[Ve]=q[Ve]);return $t(_,ze,!1)}var Me=pe;pe="";for(var Re=0;Re<re.length;Re++)"label"==re[Re]?pe+=ne:"icon"==re[Re]?pe+=ie:"helptext"==re[Re]?pe+=Q:"this"==re[Re]?pe+=Me:"html"==re[Re]&&(pe+=se);return g?pe:Mt($,null,w,O,F,pe,!0)}if(n&&!0===n.addId&&(C+=' id="'+Wt(J)+'" '),h&&(p=H,j="div"),("input"==j||"hidden"==j||Ie(p))&&(p=""),m)return Mt(j,null,N,P,C,p,!0);"input"!=j&&"hidden"!=j&&"textarea"!=j||z&&(P+=" faug-input-"+z+" ");var Le=n.elementHtml?n.elementHtml:Mt(j,null,N,P,C,Fg.eh(p),!0);if(!_||n&&!1===n.show){pe="";for(Re=0;Re<re.length;Re++)"label"==re[Re]?pe+=ne:"icon"==re[Re]?pe+=ie:"helptext"==re[Re]?pe+=Q:"this"==re[Re]?pe+=Le:"html"==re[Re]&&(pe+=se);return g?pe:Mt($,null,w,O,F,pe,!0)}return $t(_,ze={label:ne,icon:ie,helptext:Q,html:se,element:Le,cc:O,cs:w,ca:F},!1)}var it="abcdefghijklmnopqrstuvwxyz ~`!@#$%^&*()_+-=[]\\;'/.,<>?:\"{}|";function rt(e,a,i,r,n,s,o,c,u,f,g,v,b,O,T){T=!0===T,isTreeView=!0===a.tree;let S=!isNaN(a.columns)&&1*a.columns>0&&1*a.columns<=6?1*a.columns:void 0;var A,N,I;if(S=S?" col-md-"+S:"",b=!0===b,o&&je("Array",o)?(A=o[0],o.length>1&&(N=o[1])):A=o,Fg.isN(i)||Fg.isN(i.type))return"";if("copyof"==i.type&&!Ie(i.target)){if(e.properties&&e.properties[i.target]){var B=JSON.parse(JSON.stringify(e.properties[i.target]));return Ie(i.show)||(B.show=i.show),Ie(i.display)||(B.display=i.display),Ie(i.events)||(B.events=i.events),Ie(i.section)||(B.section=i.section),Ie(i.groupMarker)||(B.groupMarker=i.groupMarker),rt(e,a,B,r,n,s,o,c,u,f,g,void 0,b)}return""}if("html"==i.type&&i.value){if(i.showForAliases&&i.showForAliases.length>0&&-1==i.showForAliases.indexOf(a.name)||i.hideForAliases&&i.hideForAliases.length>0&&-1!=i.hideForAliases.indexOf(a.name))return"";if(i.condition&&!Re(i.condition,void 0,[a,i,A]))return"";var E=Fg.getString(Ne.form.element.container.style),z=Fg.copy(Ne.form.element.container.attrs),V=Fg.getString(Ne.form.element.container.class);if(i.custom&&i.custom.container&&"clear"!==i.custom.container.classpos&&(V=Fg.getString(Ne.form.element.container.class)),null!=s&&void 0!==s)if(je("Array",s))for(var M=0;M<s.length;M++)for(var R in s[M])s[M].hasOwnProperty(R)&&(z[R]=s[M][R]);else if(je("Object",s))for(var R in s)z[R]=s[R];var L=!0;return i.hasOwnProperty("show")&&(L=i.show),L||(E+="display:none;"),/true|yes|1/.test(i.required)&&(V+=" required has-error"),z.id=n+"_cont",at(Ne.form.element.container.ele+"",[E,V,z],void 0,void 0,void 0,i,void 0,g,!1,!1,"",!0,[],void 0,b)}if("string"==(I=i.type)||"number"==I||"integer"==I||"file"==I||"fileasbase64"==I||"boolean"==I||"date"==I||"float"==I||"double"==I||"decimal"==I||"datetime"==I||"time"==I||"timestamp"==I||"customdate"==I||"email"==I||"url"==I||"password"==I){if(i.showForAliases&&i.showForAliases.length>0&&-1==i.showForAliases.indexOf(a.name)||i.hideForAliases&&i.hideForAliases.length>0&&-1!=i.hideForAliases.indexOf(a.name))return"";if(i.condition&&!Re(i.condition,void 0,[a,i,A]))return"";var U=!1,q=(E=Fg.getString(Ne.form.element.container.style),z=Fg.copy(Ne.form.element.container.attrs),V=Fg.getString(Ne.form.element.container.class),Fg.getString(Ne.form.element.container.ele)),H=Fg.getString(Ne.form.element.label.style),J=Fg.copy(Ne.form.element.label.attrs),W=Fg.getString(Ne.form.element.label.class),X=(Fg.getString(Ne.form.element.label.ele),Fg.getString(Ne.form.element.this.style)),G=Fg.copy(Ne.form.element.this.attrs),Q=Fg.getString(Ne.form.element.this.class),K=(Fg.getString(Ne.form.element.this.ele),Fg.getString(Ne.form.element.icon.style)),Z=Fg.copy(Ne.form.element.icon.attrs),ee=Fg.getString(Ne.form.element.icon.class);Fg.getString(Ne.form.element.icon.ele);(i.custom&&i.custom.container&&"clear"!==i.custom.container.classpos||!i.custom||!i.custom.container)&&(V=Fg.getString(Ne.form.element.container.class));var ae=null==A?"":A,ie=A;if("string"==typeof ae&&""!=ae&&(ae=ae.replace(/"/g,"&quot;")),null!=s&&void 0!==s)if(je("Array",s))for(M=0;M<s.length;M++)for(var R in s[M])s[M].hasOwnProperty(R)&&(z[R]=s[M][R]);else if(je("Object",s))for(var R in s)z[R]=s[R];var re={};re.name=n,re.id=n,i.hasOwnProperty("isattr")&&(re.isattr=i.isattr),m[a.name]&&i.hasOwnProperty("edit")&&!i.edit&&(re.disabled=!0),i.hasOwnProperty("showlabel")&&(u&=1==i.showlabel||1==i.showlabel),i.hasOwnProperty("showicon")&&(U=1==i.showicon||1==i.showicon),(i.custom&&"clear"!==i.custom.classpos||!i.custom)&&(Q=Fg.getString(Ne.form.element.this.class));var ne=null;null!=f&&(ne=f.substring(0,1).toUpperCase()+f.substring(1)),i.hasOwnProperty("display")&&(ne=te&&!1!==i.translate?Fg.translate(i.display):i.display);L=!0;i.hasOwnProperty("show")&&(L=i.show);var se=!1;L&&!1!==i.decoratePicker&&("date"==i.type?(se=!0,Q+=" faug-date ",re["faug-date-format"]=C):"datetime"==i.type?(se=!0,Q+=" faug-datetime ",re["faug-date-format"]=P):"time"==i.type?(se=!0,Q+=" faug-time ",re["faug-date-format"]=j):"timestamp"==i.type?(se=!0,Q+=" faug-timestamp ",re["faug-date-format"]=D):"customdate"==i.type&&(se=!0,Q+=" faug-customdate "),i.dateFormat&&(re["faug-date-format"]=i.dateFormat),""===i.default?(ae=null,re["faug-date-default"]=""):re["faug-date-default"]="val"),L||(E+="display:none;");var oe={};i.hasOwnProperty("events")&&(oe=Fg.copy(i.events)),i.validations&&i.validations.cond||(i.validations=void 0),/true|yes|1/.test(i.required+"")&&!0!==i["added--required"]&&(i.validations||(i.validations={},i.validations.cond=[]),i.validations.cond.push(["len|>|0:this@value",ne+Ne.form.element.helptext.errorText]),i.validations.errorselector="helpText",i["added--required"]=!0);i.hasOwnProperty("multiple")&&i.multiple;var le=function(e,t,a,i){return function(i,r){var n=!0;if((e.validationForAliases&&e.validationForAliases.length>0&&-1==e.validationForAliases.indexOf(t.name)||e.noValidationForAliases&&e.noValidationForAliases.length>0&&-1!=e.noValidationForAliases.indexOf(t.name))&&(n=!1),e.enum||function(e,t){void 0===t&&(t=e.getAttribute("faug-data-type")),"boolean"==(t=t.toLowerCase())?Fg.isBoolean(e.value)||k&&alert("A Boolean value was expected.."):"number"==t||"integer"==t?Fg.isNumber(e.value)||(k&&alert("A Numeric value was expected.."),e.value=""):"aplha-strict"==t?Fg.isStrictAlpha(e.value)||(k&&alert("A Strict alphabetical value was expected.."),e.value=""):"alpha"==t?Fg.isAlpha(e.value)||(k&&alert("A Alphabetical value was expected.."),e.value=""):"alpha-numeric"==t?Fg.isAlphaNumeric(e.value)||(k&&alert("An Alphanumeric value was expected.."),e.value=""):"float"==t||"double"==t?Fg.isFloat(e.value)||(k&&alert("A Floating point value was expected.."),e.value=""):"char"==t&&1!=e.value.length&&k&&alert("A Character value was expected..")}(i[0],e.type),n&&e.validations){if(!/true|yes|1/.test(e.required)&&Fg.isN(i.val()))return;var s=Le(e.validations,i);if(s[0]){if("helpText"==e.validations.errorselector)0==(c=(o=i.parent()).find(".help-block")).length?(c=(o=De(a+"_cont")).find(".help-block")).length>0&&c.hide():c.hide(),o.addClass("has-success"),o.removeClass("has-error")}else{for(var o,c,u=s[1],f="",m=0;m<u.length;m++)if(u[m]){f+=Fg.eh(u[m])+"<br/>";break}if("helpText"==e.validations.errorselector)0==(c=(o=i.parent()).find(".help-block")).length?(c=(o=De(a+"_cont")).find(".help-block")).length>0&&(c.html(f),c.show()):(c.html(f),c.show()),o.addClass("has-error"),o.removeClass("has-success");"text"!=i.attr("type")&&"number"!=i.attr("type")&&"url"!=i.attr("type")&&"email"!=i.attr("type")||i.val("")}}if(Xe(t.callbacks,"modelChanged",[i]),"function"==typeof FgBind){let e=i.attr("name").replace(/\['/g,"").replace(/\']/g,".").replace(/\]/g,"].").replace(/\[/g,"").replace(/\]/g,"");"."==e[e.length-1]&&(e=e.substring(0,e.length-1));const t=i.closest("form").data("fg-bind");i.data("fg-no-chng",!0);try{Fg.setref(t,e,i.val())}catch(r){}i.data("fg-no-chng",!1)}if(!Ie(e.copyto)){var h=e.copyto.split(",");for(var g in h){var p="";-1!=a.lastIndexOf("['")?(p=a.substring(0,a.lastIndexOf("['")),p+="['"+h[g]+"']"):p=h[g],i.val()&&$('[name="'+p+'"]').val(i.val())}}if(void 0!==t.__ishelper&&void 0===t.form.submit){void 0!==t.resetStartOnModelChange&&t.resetStartOnModelChange&&void 0!==t.crudop&&(t.crudop.start=0);var v=De(t.id).serializeObject(t.name,!0);(n=Re(e.cond,i))&&Ft({schemaName:t.schemaName,op:t.crudopName},t.defviewerId,!0,!0,v)}if($(i).attr("ftype")&&"file"==$(i).attr("type")&&(i[0].files[0].size/1024/1024).toFixed(4)>l)return Fg.execFunc(d,[i]),!1;if($(i).attr("ftype")&&"base64"==$(i).attr("ftype")&&"file"==$(i).attr("type")){var y=new FileReader;y.onloadend=function(e){return function(){var t=this.result;if(-1!=t.indexOf("data:image")&&$(e).attr("compress")&&1*$(e).attr("compress")<100&&1*$(e).attr("compress")>0)try{var a=1*$(e).attr("compress"),i=t.substring(t.indexOf(":")+1,t.indexOf(";")),r=new Image;r.src=t;var n=document.createElement("canvas");n.width=r.naturalWidth,n.height=r.naturalHeight;n.getContext("2d").drawImage(r,0,0);t=n.toDataURL(i,a/100)}catch(e){}e.data=t.substring(t.indexOf(",")+1)}}(i[0]),y.readAsDataURL(i[0].files[0])}}}(i,a,n),de="change",ce=!1;if(!i.noevents){void 0===oe[de]?(oe[de]=[],oe[de][0]=le):oe[de].push(le);var ue=function(e,t){if(("INPUT"==e.prop("tagName")||"TEXTAREA"==e.prop("tagName"))&&Se&&Ae)if(e.attr("data-rgo","1"),e.attr("data-regex")&&Ae){if(""!=e.val()&&"file"!=e.prop("type")&&!new RegExp(e.attr("data-regex")).test(e.val()))return Fg.execFunc(Ae,[e]),t.stopPropagation(),!1}else if("file"!=e.prop("type")&&""!=e.val()&&!Se.test(e.val()))return Fg.execFunc(Ae,[e]),t.stopPropagation(),!1};if(void 0===oe.input?(oe.input=[],oe.input[0]=ue):oe.input.push(ue),se&&i.dateConfig){var fe=function(e,a,i,r){return function(a,i){var r=C;a.attr("faug-date-format")&&(r=a.attr("faug-date-format"));var n,s=!a.hasClass("faug-date");a.val()?n=a.val():""===e.dateConfig.value||""===a.attr("faug-date-default")?n=void 0:"val"===a.attr("faug-date-default")&&(n=t.formatDate(null,r)),t.configureDateTimePicker(a,e.dateConfig,He,i,r,n,s)}}(i);void 0===oe[de="default"]?(oe[de]=[],oe[de][0]=fe):oe[de].push(fe)}if((i.templateFile||i.genericTemplateFile)&&i.enum&&i.enum.length>0){ce=!0;var me=function(e,t,a,i,r,n){return function(i,s){var o=e.hasOwnProperty("default")?e.default:null;Ie(r)&&(r=o);var l=e.valueAssign;!je("Array",e.valueAssign)&&l&&(l=[e.valueAssign]),l||(l=[]);for(var d=0;d<l.length;d++){var c=l[d];c&&(r=n&&c.fromData?n[c.fromData]:c.fromVar?Vt(c.fromVar):c.fromRoute?x[Y][c.fromRoute]:Vt(c))}var u={};for(var f in e.vars)if(e.vars.hasOwnProperty(f)){var h=ze(e.vars[f],i);h[0]&&(u[f]=h[1])}var g=e.templateFile?"templateFile":"genericTemplateFile",p=void 0!==a.__ishelper?a.id:void 0;p||(m[a.name]&&(p=a.editForm.id),p||(p=a.form.id));var v={isTransient:!0===e.transient||"true"===e.transient,elName:t,rows:e.enum,selectedVal:r,details:a,vars:u},y=Tt(e[g],v);Faug.byId(t+"_cont").append(y),Dt(void 0,a,p,t,!0)}}(i,n,a,void 0!==a.__ishelper?a.id:a.form.id,ie,N);void 0===oe[de="defaultOnce"]?(oe[de]=[],oe[de][0]=me):oe[de].push(me)}}if(h[a.name][n]=oe,G=_t(G,re),/true|yes|1/.test(i.required)&&(Q+=" required",V+=" required",G.required=!0),V+=S,Q+=" faug-"+i.type+"-type",G["faug-data-type"]=i.type,z.id=n+"_cont","boolean"==i.type)return at("select",[E,V,z],[H,W,J],[K,ee,Z],[X,Q,G],i,[ie,N],g,u,U,ne,!0,[[""]],void 0,b,O);if(i.hasOwnProperty("enum")){var he=null;if(je("Array",i.enum)&&i.enum.length>0)he=i.enum;else if(je("String",i.enum)){he=null;var ge=window[i.enum];he="function"==typeof ge?ge():ge}return ce&&(he=[]),at("select",[E,V,z],[H,W,J],[K,ee,Z],[X,Q,G],i,[ie,N],g,u,U,ne,!0,he,void 0,b,O)}if(i.hasOwnProperty("ui")&&"textarea"==i.ui){var pe=i.hasOwnProperty("default")?i.default:null;Ie(ae)&&(ae=pe);var ve=i.attrAssign;!je("Array",i.attrAssign)&&ve&&(ve=[i.attrAssign]),ve||(ve=[]);for(var ye=0;ye<ve.length;ye++){(we=ve[ye])&&we.to&&(we.fromVar?G[we.to]=Vt(we.fromVar):we.fromRoute?G[we.to]=x[Y][we.fromRoute]:N&&we.fromData&&(G[we.to]=N[we.fromData]))}G.spellcheck="true";var be=i.valueAssign;!je("Array",i.valueAssign)&&be&&(be=[i.valueAssign]),be||(be=[]);for(ye=0;ye<be.length;ye++){(Fe=be[ye])&&(ae=N&&Fe.fromData?N[Fe.fromData]:Fe.fromVar?Vt(Fe.fromVar):Fe.fromRoute?x[Y][Fe.fromRoute]:Vt(Fe))}return at("textarea",[E,V,z],[H,W,J],[K,ee,Z],[X,Q,G],i,[ae,N],g,u,U,ne,void 0,void 0,void 0,b,O)}var _e=i.ui;void 0!==_e&&null!=_e||(_e="text"),"file"==i.type?(y[a.name]=!0,_e="file"):"fileasbase64"==i.type?(_e="file",G.ftype="base64"):"url"==i.type?(_e="url",G.ftype="url"):"email"==i.type?(_e="email",G.ftype="email"):"password"==i.type?(_e="password",G.ftype="password"):i.type,G.type=_e;pe=!se&&i.hasOwnProperty("default")?i.default:null;Ie(ae)&&(ae=pe);ve=i.attrAssign;!je("Array",i.attrAssign)&&ve&&(ve=[i.attrAssign]),ve||(ve=[]);for(ye=0;ye<ve.length;ye++){var we;(we=ve[ye])&&we.to&&(we.fromVar?G[we.to]=Vt(we.fromVar):we.fromRoute?G[we.to]=x[Y][we.fromRoute]:N&&we.fromData&&(G[we.to]=N[we.fromData]))}be=i.valueAssign;!je("Array",i.valueAssign)&&be&&(be=[i.valueAssign]),be||(be=[]);for(ye=0;ye<be.length;ye++){var Fe;(Fe=be[ye])&&(ae=N&&Fe.fromData?N[Fe.fromData]:Fe.fromVar?Vt(Fe.fromVar):Fe.fromRoute?x[Y][Fe.fromRoute]:Vt(Fe))}return G.value=ae,i.ui=i.ui?i.ui:_e,at("input",[E,V,z],[H,W,J],[K,ee,Z],[X,Q,G],i,null,g,u,U,ne,void 0,void 0,void 0,b,O)}if("object"==i.type){if(i.showForAliases&&i.showForAliases.length>0&&-1==i.showForAliases.indexOf(a.name)||i.hideForAliases&&i.hideForAliases.length>0&&-1!=i.hideForAliases.indexOf(a.name))return"";if(i.condition&&!Re(i.condition,void 0,[a,i,A]))return"";if(i.hasOwnProperty("properties")){var xe;""==n&&(n=a.name),xe=n+"_cont";var Oe=null==A?{}:A,$e="";i.hasOwnProperty("section")&&($e=Mt(Fg.getString(Ne.form.object.section.ele),i.custom.headerlb,"",null,null,i.section,!0,!1,!1,null,null));L=!0;i.hasOwnProperty("show")&&(L=i.show);E=Fg.getString(Ne.form.object.container.style),z={id:xe},V=Fg.getString(Ne.form.object.container.class),q=Fg.getString(Ne.form.object.container.ele);if(L||(E+="display:none;"),E=(Ot=tt(i.custom,E,V,z,q))[0],V=Ot[1],z=Ot[2],q=Ot[3],q=Be(q,"div"),null!=s&&void 0!==s)if(je("Array",s))for(M=0;M<s.length;M++)for(var R in s[M])s[M].hasOwnProperty(R)&&(z+=" "+Fg.eh(R)+'="'+Fg.eh(s[M][R])+'" ');else if(je("Object",s))for(var R in s)z+=" "+Fg.eh(R)+'="'+Fg.eh(s[R])+'" ';null!=A&&void 0!==i.editMinimize&&i.editMinimize&&(E+=";display:none;");var ke=n;0==ke.indexOf(a.name)&&(ke=ke.replace(a.name,""));var Te="",Ce=!Ie(i.template)||!Ie(i.templateFile),Pe={};Ce||(Te=$e);var Ee=!1;if(i.propertyOrder)for(var Ve=0;Ve<i.propertyOrder.length;Ve++)if(i.propertyOrder[Ve]in i.properties){Ee=!0;break}const e=!0===i.inline;let o=!1;for(var Me in i.properties)if(i.properties.hasOwnProperty(Me)){(It=n)&&""!=It?It+="['"+Me+"']":It=Me,null!=A&&void 0!==i.editMinimize&&i.editMinimize,c=c&&i.hasOwnProperty("isSpan")&&i.isSpan,i.hasOwnProperty("nolabel")&&i.nolabel&&(u=!1);var Ue=i.properties[Me],qe=ke.replace(/\['/g,".").replace(/'|\[|\]|[\[0-9\]]+/g,"")+"."+Me;0==qe.indexOf(".")&&(qe=qe.substring(1)),e&&o&&(Ue.display=void 0);var Je=rt(i,a,Ue,r+1,It,[{"ffead-pth":qe}],[Oe[Me],Oe],c,u,Me,g,void 0,b,!0===i.inline);o=!0,Ue&&!0===Ue.groupMarker&&(Je+=Fg.getString(Ne.form.groupMarker.html)),Ce||Ee?Pe[Me]=Je:Te+=Je}if(Ce)Te=Ie(i.template)?p[i.templateFile]?p[i.templateFile].apply(null,[Pe]):t.templateEngine(i.templateFile,Pe,!1,!0):$t(i.template,Pe,!1);else if(Ee){for(Ve=0;Ve<i.propertyOrder.length;Ve++)i.propertyOrder[Ve]in Pe&&(Te+=Pe[i.propertyOrder[Ve]],delete Pe[i.propertyOrder[Ve]]);for(var Me in Pe)Pe.hasOwnProperty(Me)&&(Te+=Pe[Me])}if(isTreeView&&!T){let e="",t="";i.display&&(e=i.display),i["display-desc"]&&(t=i["display-desc"]);let a="open",r="⬆",n=" faug-object-tree-cont";!1===i.open&&(a="close",r="⬇",n+=" hidden"),Te='<p class="col-md-12" style="margin-top:10px;"><a state="'+a+'" class="faug-object-ctrl">'+r+'</a><span class="faug-object-title" title='+t+">"+e+"</span></p>"+(Te='<div class="faug-cont col-md-12'+n+'">'+Te+"</div>")}else Te='<div class="faug-cont col-md-12">'+Te+"</div>";return S&&(V+=" col-md-12"),Mt(q,null,E,V,z,Te,!0)}}else if("array"==i.type){if(i.showForAliases&&i.showForAliases.length>0&&-1==i.showForAliases.indexOf(a.name)||i.hideForAliases&&i.hideForAliases.length>0&&-1!=i.hideForAliases.indexOf(a.name))return"";if(i.condition&&!Re(i.condition,void 0,[a,i,A]))return"";if(i.hasOwnProperty("items")){void 0===i.custom&&(i.custom={}),void 0===i.items.custom&&(i.items.custom={}),(It=n)&&""!=It||(It=""),_.hasOwnProperty(It)||(_[It]=0),w[It]=i.items;Oe=null==A?[]:A;if(i.initialentries&&(null==Oe||0==Oe.length)){Oe=[];for(ye=0;ye<i.initialentries;ye++)Oe.push(null)}Oe.length>_[It]&&(rvalue=Oe[_[It]]);$e="",ne=f.substring(0,1).toUpperCase()+f.substring(1);i.hasOwnProperty("display")&&(ne=i.display);L=!0;i.hasOwnProperty("show")&&(L=i.show);E=Fg.getString(Ne.form.array.container.style),V=Fg.getString(Ne.form.array.container.class),z={id:It+"_cont"},q=Fg.getString(Ne.form.array.container.ele);if(E=(Ot=tt(i.custom,E,V,z,q))[0],V=Ot[1],z=Ot[2],q=Ot[3],L||(E+="display:none;"),q=Be(q,"div"),null!=s&&void 0!==s)if(je("Array",s))for(M=0;M<s.length;M++)for(var R in s[M])s[M].hasOwnProperty(R)&&(z+=" "+Fg.eh(R)+'="'+Fg.eh(s[M][R])+'" ');else if(je("Object",s))for(var R in s)z+=" "+Fg.eh(R)+'="'+Fg.eh(s[R])+'" ';!1===i.nolabel&&($e=i.hasOwnProperty("section")?Mt(Fg.getString(Ne.form.array.section.ele),i.custom.headerlb,Fg.getString(Ne.form.array.section.style),null,null,i.section,!0,!1,!1,null,null):Mt(Fg.getString(Ne.form.array.section.eleIfAbsent),i.custom.headerlb,Fg.getString(Ne.form.array.section.style),null,null,ne,!0,!1,!1,null,null));var We="";if(!1===i.noaddbutton&&!b){void 0===i.custom.addButton&&(i.custom.addButton={}),void 0===i.custom.addButton.custom&&(i.custom.addButton.custom={}),i.custom.addButton.custom.attrpos="append";var Ye="Add";i.custom.addButton.text&&(Ye=i.custom.addButton.text),i.custom.addButton.html&&(Ye=i.custom.addButton.html),We=at(Ne.form.array.addButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.array.addButton.style),Fg.getString(Ne.form.array.addButton.class)+" faug-comp-add-button",{type:"button",list_value_cls:It}],i.custom.addButton,Ye,g,!1,!1,null,!1,null,!0)}var Qe="";if(!1===i.norembutton&&!b){void 0===i.custom.remButton&&(i.custom.remButton={}),void 0===i.custom.remButton.custom&&(i.custom.remButton.custom={}),i.custom.remButton.custom.attrpos="append";Ye="Remove";i.custom.remButton.text&&(Ye=i.custom.remButton.text),i.custom.remButton.html&&(Ye=i.custom.remButton.html),Qe=at(Ne.form.array.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.array.remButton.style),Fg.getString(Ne.form.array.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:It}],i.custom.remButton,Ye,g,!1,!1,null,!1,null,!0)}Te=Mt(Fg.getString(Ne.form.array.header.ele),i.custom.header,Fg.getString(Ne.form.array.header.style),null,null,$e+Qe+We,!0,!1,!1,null,null),u=null==i.items.nolabel||!i.items.nolabel;if(Oe.length>0){!0;var Ke=Fg.getString(Ne.form.array.this.container.ele),Ze=Fg.getString(Ne.form.array.this.container.style),et=Fg.getString(Ne.form.array.this.container.class),it=Fg.copy(Ne.form.array.this.container.attrs);Ze=(Ot=tt(i.items.custom.container,Ze,et,it,Ke))[0],et=Ot[1],it=Ot[2],Ke=Ot[3],Ke=Be(Ke,"div");var nt=Fg.getString(Ne.form.array.this.header.ele);void 0!==i.items.custom&&(nt=i.items.custom.el),null!=nt&&""!==nt||(nt="div");var st=Oe.length;z+=" faug-tot-size="+st,st>20&&(st=void 0!==i.maxobjects?(st=i.maxobjects)>Oe.length?Oe.length:st:20),z+=" faug-curr-size="+st,z+=" faug-offset="+st;for(var ot=0;ot<st;ot++){var lt=It+"["+ot+"]";_[It]=ot;var dt="",ct="",ut="";if(!0===i.items.itemrembutton){void 0===i.items.custom.remButton&&(i.items.custom.remButton={}),void 0===i.items.custom.remButton.custom&&(i.items.custom.remButton.custom={}),i.items.custom.remButton.custom.attrpos="append";Ye="Remove";i.items.custom.remButton.text&&(Ye=i.items.custom.remButton.text),i.items.custom.remButton.html&&(Ye=i.items.custom.remButton.html),ut=at(Ne.form.array.this.header.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.array.this.header.remButton.style),Fg.getString(Ne.form.array.this.header.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:It,"ffead-el-link":lt+"_cont"}],i.items.custom.remButton,Ye,g,!1,!1,null,!1,null,!0)}if(!1===i.items.nominmaxbutton){if(Oe[ot])if(i.items.summaryTemplate){var ft=!(!Ie(i.summaryTemplateDynamic)&&!0!==i.summaryTemplateDynamic);ct+=$t(i.items.summaryTemplate,Oe[ot],ft)}else if(i.items.summaryTemplateFunc){(Nt=Ge(i.items.summaryTemplateFunc,[Oe[ot]])).valid&&(ct+=Nt.result)}if(!b){var mt="display:none;";null!=A&&void 0!==i.items.editMinimize&&i.items.editMinimize&&(mt=""),ct=Mt(Fg.getString(Ne.form.array.this.header.minlabel.ele),i.items.custom.minlabel,mt,null,null,ct,!0,!1,!1,null,null),void 0===i.custom.minmaxbutton&&(i.custom.minmaxbutton={}),void 0===i.custom.minmaxbutton.custom&&(i.custom.minmaxbutton.custom={}),i.custom.minmaxbutton.custom.attrpos="append";var ht=Wt(lt,"'"),gt=Wt(It,"'");(Ct={})["faug-comp-min-state"]=i.custom.minmaxbutton.custom["faug-comp-min-state"],Ct["faug-comp-max-state"]=i.custom.minmaxbutton.custom["faug-comp-max-state"],Ct["faug-comp-min-state"]||(Ct["faug-comp-min-state"]="-"),Ct["faug-comp-max-state"]||(Ct["faug-comp-max-state"]="+"),Ct.cntid=ht,Ct.schnm=gt,Ct.type="button";var pt=Ct["faug-comp-min-state"],vt="faug-comp-min-button faug-comp-min-state";null!=A&&void 0!==i.items.editMinimize&&i.items.editMinimize&&(pt=Ct["faug-comp-max-state"],vt="faug-comp-max-button faug-comp-max-state"),ct+=Mt(Fg.getString(Ne.form.array.this.header.minmaxButton.ele),i.items.custom.minmaxbutton,Fg.getString(Ne.form.array.this.header.minmaxButton.style),vt,Ct,pt,!0)}}dt+=Mt(nt,i.items.custom,null,"clearfix",null,ut+ct,!0,!1,!1,null,null);var yt=rt(i.items,a,i.items,r+1,lt,{},[Oe[ot],Oe],!1,u,Pt,g,void 0,b);!0===i.items.groupMarker&&(yt+=Fg.getString(Ne.form.groupMarker.html));var bt=it+' data-pos="'+ot+'"';Te+=Mt(Ke,i.custom.container,Ze,et,bt,dt+yt,!0)}if(Oe.length>st){var wt=(new Date).getTime();F[It]=Oe;var xt=It;xt=(xt=(xt=xt.replace(/\[/g,"")).replace(/\]/g,".")).replace(/'/g,""),h[a.name]["faug-load-more"]={__internal__:void 0},Te+=Mt("a",i.custom.loadmore,null,"faug-load-more",{posref:xt,schname:a.name,ident:wt,total:Oe.length,size:st,current:st,list_value_cls:It},"Load More...",!0)}}else z+=" faug-tot-size=0 faug-curr-size=0 faug-offset=0";if(isTreeView){let e="",t="";i.display&&(e=i.display),i["display-desc"]&&(t=i["display-desc"]);let a="open",r="⬆",n=" faug-object-tree-cont";!1===i.open&&(a="close",r="⬇",n+=" hidden"),Te='<p class="col-md-12" style="margin-top:10px;"><a state="'+a+'" class="faug-object-ctrl">'+r+'</a><span class="faug-object-title" title='+t+">"+e+"</span></p>"+(Te='<div class="faug-cont col-md-12'+n+'">'+Te+"</div>")}else Te='<div class="faug-cont col-md-12">'+Te+"</div>";return S&&(V+=" col-md-12"),Mt(q,null,E,V,z,Te,!0)}}else if("marray"==i.type){if(i.showForAliases&&i.showForAliases.length>0&&-1==i.showForAliases.indexOf(a.name)||i.hideForAliases&&i.hideForAliases.length>0&&-1!=i.hideForAliases.indexOf(a.name))return"";if(i.condition&&!Re(i.condition,void 0,[a,i,A]))return"";if(i.hasOwnProperty("items")){(It=n)&&""!=It||(It=""),_.hasOwnProperty(It)||(_[It]=0),w[It]=i.items;Oe=null==A?{}:A,$e="",ne=f.substring(0,1).toUpperCase()+f.substring(1);i.hasOwnProperty("display")&&(ne=i.display);L=!0;i.hasOwnProperty("show")&&(L=i.show);E=Fg.getString(Ne.form.array.container.style),V=Fg.getString(Ne.form.array.container.class),z={id:It+"_cont"},q=Fg.getString(Ne.form.array.container.ele);if(E=(Ot=tt(i.custom,E,V,z,q))[0],V=Ot[1],z=Ot[2],q=Ot[3],L||(E+="display:none;"),q=Be(q,"div"),null!=s&&void 0!==s)if(je("Array",s))for(M=0;M<s.length;M++)for(var R in s[M])s[M].hasOwnProperty(R)&&(z+=" "+Fg.eh(R)+'="'+Fg.eh(s[M][R])+'" ');else if(je("Object",s))for(var R in s)z+=" "+Fg.eh(R)+'="'+Fg.eh(s[R])+'" ';!1===i.nolabel&&($e=i.hasOwnProperty("section")?Mt(Fg.getString(Ne.form.array.section.ele),i.custom.headerlb,Fg.getString(Ne.form.array.section.style),null,null,i.section,!0,!1,!1,null,null):Mt(Fg.getString(Ne.form.array.section.eleIfAbsent),i.custom.headerlb,Fg.getString(Ne.form.array.section.style),null,null,ne,!0,!1,!1,null,null));We="";if(!1===i.noaddbutton&&!b){void 0===i.custom.addButton&&(i.custom.addButton={}),void 0===i.custom.addButton.custom&&(i.custom.addButton.custom={}),i.custom.addButton.custom.attrpos="append";Ye="Add";i.custom.addButton.text&&(Ye=i.custom.addButton.text),i.custom.addButton.html&&(Ye=i.custom.addButton.html),We=at(Ne.form.array.addButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.array.addButton.style),Fg.getString(Ne.form.array.addButton.class)+" faug-comp-add-button",{type:"button",list_value_cls:It}],i.custom.addButton,Ye,g,!1,!1,null,!1,null,!0)}Qe="";if(!1===i.norembutton&&!b){void 0===i.custom.remButton&&(i.custom.remButton={}),void 0===i.custom.remButton.custom&&(i.custom.remButton.custom={}),i.custom.remButton.custom.attrpos="append";Ye="Remove";i.custom.remButton.text&&(Ye=i.custom.remButton.text),i.custom.remButton.html&&(Ye=i.custom.remButton.html),Qe=at(Ne.form.array.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.array.remButton.style),Fg.getString(Ne.form.array.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:It}],i.custom.remButton,Ye,g,!1,!1,null,!1,null,!0)}Te=Mt(Fg.getString(Ne.form.array.header.ele),i.custom.header,Fg.getString(Ne.form.array.header.style),null,null,$e+Qe+We,!0,!1,!1,null,null);var Ot,kt=null!=i.items.isSpan&&i.items.isSpan,St=(u=null==i.items.nolabel||!i.items.nolabel,Ue=i.items.properties.value,i.items.properties.key);Ke=Fg.getString(Ne.form.array.this.container.ele),Ze=Fg.getString(Ne.form.array.this.container.style),et=Fg.getString(Ne.form.array.this.container.class),it=Fg.copy(Ne.form.array.this.container.attrs);Ze=(Ot=tt(i.items.custom.container,Ze,et,it,Ke))[0],et=Ot[1],it=Ot[2],Ke=Ot[3],Ke=Be(Ke,"div");nt=Fg.getString(Ne.form.array.this.header.ele);void 0!==i.items.custom&&(nt=i.items.custom.el),null!=nt&&""!==nt||(nt="div"),"object"!=Ue.type&&(w[It].showMinMax=!1);var At=0;for(var Me in Oe){lt=It+"["+At+"]";if(Oe.hasOwnProperty(Me)){ct="";if(!0===i.items.itemrembutton&&!b){void 0===i.items.custom.remButton&&(i.items.custom.remButton={}),void 0===i.items.custom.remButton.custom&&(i.items.custom.remButton.custom={}),i.items.custom.remButton.custom.attrpos="append";Ye="Remove";i.items.custom.remButton.text&&(Ye=i.items.custom.remButton.text),i.custom.remButton.html&&(Ye=i.items.custom.remButton.html),ct=at(Ne.form.array.this.header.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.array.this.header.remButton.style),Fg.getString(Ne.form.array.this.header.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:It,"ffead-el-link":lt+"_cont"}],i.items.custom.remButton,Ye,g,!1,!1,null,!1,null,!0)}if(!1===i.items.nominmaxbutton){if(Oe[Me])if(i.items.summaryTemplate){ft=!(!Ie(i.summaryTemplateDynamic)&&!0!==i.summaryTemplateDynamic);ct+=$t(i.items.summaryTemplate,Oe[Me],ft)}else if(i.items.summaryTemplateFunc){var Nt;(Nt=Ge(i.items.summaryTemplateFunc,[Oe[Me]])).valid&&(ct+=Nt.result)}if(!b){mt="display:none;";null!=A&&void 0!==i.items.editMinimize&&i.items.editMinimize&&(mt=""),ct=Mt(Fg.getString(Ne.form.array.this.header.minlabel.ele),i.items.custom.minlabel,mt,null,null,ct,!0,!1,!1,null,null),void 0===i.custom.minmaxbutton&&(i.custom.minmaxbutton={}),void 0===i.custom.minmaxbutton.custom&&(i.custom.minmaxbutton.custom={}),i.custom.minmaxbutton.custom.attrpos="append",void 0===i.items.custom.minmaxbutton&&(i.items.custom.minmaxbutton={}),void 0===i.items.custom.minmaxbutton.custom&&(i.items.custom.minmaxbutton.custom={}),i.items.custom.minmaxbutton.custom.attrpos="append";var Ct;ht=Wt(lt,"'"),gt=Wt(It,"'");(Ct={})["faug-comp-min-state"]=i.custom.minmaxbutton.custom["faug-comp-min-state"],Ct["faug-comp-max-state"]=i.custom.minmaxbutton.custom["faug-comp-max-state"],Ct["faug-comp-min-state"]||(Ct["faug-comp-min-state"]="-"),Ct["faug-comp-max-state"]||(Ct["faug-comp-max-state"]="+"),Ct.cntid=ht,Ct.schnm=gt,Ct.type="button";pt=Ct["faug-comp-min-state"],vt="faug-comp-min-button faug-comp-min-state";null!=A&&void 0!==i.items.editMinimize&&i.items.editMinimize&&(pt=Ct["faug-comp-max-state"],vt="faug-comp-max-button faug-comp-max-state"),ct+=Mt(Fg.getString(Ne.form.array.this.header.minmaxButton.ele),i.items.custom.minmaxbutton,Fg.getString(Ne.form.array.this.header.minmaxButton.style),vt,Ct,pt,!0)}}Te+=Mt(nt,i.items.custom,"clearfix",null,null,ct,!0,!1,!1,null,null);var Pt=It+"["+At+"]['key']",jt=rt(i.items,a,St,r+1,Pt,[{orig_val_cls:Pt}],[Me],kt,u,Me,g,void 0,b);Pt=It+"["+At+"]['value']",jt+=rt(i.items,a,Ue,r+1,Pt,[{}],[Oe[Me],Oe],kt,u,Pt,g,void 0,b),Te+=Mt(Ke,i.custom.container,Ze,et,it,jt,!0),At++}}if(_[It]=At,0==At?z+=" faug-tot-size=0 faug-curr-size=0 faug-offset=0":(z+=" faug-tot-size="+At,At>20&&(At=void 0!==i.maxobjects?i.maxobjects:20),z+=" faug-curr-size="+At,z+=" faug-offset="+At),isTreeView){let e="",t="";i.display&&(e=i.display),i["display-desc"]&&(t=i["display-desc"]);let a="open",r="⬆",n=" faug-object-tree-cont";!1===i.open&&(a="close",r="⬇",n+=" hidden"),Te='<p class="col-md-12" style="margin-top:10px;"><a state="'+a+'" class="faug-object-ctrl">'+r+'</a><span class="faug-object-title" title='+t+">"+e+"</span></p>"+(Te='<div class="faug-cont col-md-12'+n+'">'+Te+"</div>")}else Te='<div class="faug-cont col-md-12">'+Te+"</div>";return S&&(V+=" col-md-12"),Mt(q,null,E,V,z,Te,!0)}}else if("map"==i.type){var It;if((It=n)||(It=""),i.hasOwnProperty("types")&&i.types.hasOwnProperty("key")&&i.types.hasOwnProperty("value")){var Bt={type:"marray",mtype:"map"};return i.hasOwnProperty("display")&&(Bt.display=i.display),i.hasOwnProperty("show")&&(Bt.show=i.show),i.hasOwnProperty("custom")&&(Bt.custom=i.custom),Bt.items={},i.types.hasOwnProperty("summaryTemplate")&&(Bt.items.summaryTemplate=i.types.summaryTemplate),i.types.hasOwnProperty("summaryTemplateFunc")&&(Bt.items.summaryTemplateFunc=i.types.summaryTemplateFunc),i.types.hasOwnProperty("custom")&&(Bt.items.custom=i.types.custom),Bt.noaddbutton=i.noaddbutton,Bt.norembutton=i.norembutton,Bt.nolabel=i.nolabel,Bt.items.mtype="marray",Bt.items.isSpan="object"!=i.types.value.type,Bt.items.nolabel="object"!=i.types.value.type,Bt.items.type="object",Bt.items.properties={},Bt.items.properties.key=i.types.key,Bt.items.properties.value=i.types.value,"object"==i.types.value.type&&(Bt.items.properties.value.isGroup=!0),Bt.label=i.label,w[It+"_dummymap"]=Bt,rt(Bt.items,a,Bt,r,It,s,o,!1,!0,f,g,void 0,b)}}else if("group"==i.type&&i["html-pre"]&&i["html-post"]&&i.properties&&"object"===i.properties.type){let e=i["html-pre"];return e+=rt(i,i.details,i.properties,r,"","",[data],!1,!0,"",g,void 0,b),e+=i["html-post"],e}return""}this.isInteger=function(e){return e==parseInt(e)},this.isFloat=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1=="0123456789.".indexOf(e.charAt(t)))return!1;return!(e.split(".")>1)},this.isStrictAlpha=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1=="abcdefghijklmnopqrstuvwxyz".indexOf(e.charAt(t)))return e="",!1;return!0},this.isAlpha=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1==it.indexOf(e.charAt(t)))return!1;return!0},this.isNumber=function(e){return!isNaN(e)},this.isAlphaNumeric=function(e){if(""==e)return!0;e=e.toLowerCase();for(var t=0;t<e.length;t++)if(-1==it.indexOf(e.charAt(t))&&-1=="0123456789".indexOf(e.charAt(t)))return!1;return!0},this.isBoolean=function(e){return""==e||("string"==typeof e&&("true"==e.toLowerCase()||"yes"==e.toLowerCase()||"1"==e||"false"==e.toLowerCase()||"no"==e.toLowerCase()||"0"==e)||1==e||0==e)},this.showHideGroupedEntity=function(e,t,a,i,r){if(e.preventDefault(),$(t).hasClass("faug-comp-min-state")){if($(t).removeClass("faug-comp-min-state"),$(t).addClass("faug-comp-max-state"),De(a+"_cont").hide(),t.innerHTML=$(t).attr("faug-comp-max-state"),void 0!==w[i].summaryTemplate){var n=De(a+"_cont").serializeObject(a),s=!(!Ie(w[i].summaryTemplateDynamic)&&!0!==w[i].summaryTemplateDynamic);$(t).prev().html($t(w[i].summaryTemplate,n,s))}else if(w[i].summaryTemplateFunc){n=De(a+"_cont").serializeObject(a);var o=Ge(w[i].summaryTemplateFunc,[n]);o.valid&&$(t).prev().html(o.result)}$(t).prev().show()}else $(t).removeClass("faug-comp-max-state"),$(t).addClass("faug-comp-min-state"),De(a+"_cont").show(),t.innerHTML=$(t).attr("faug-comp-min-state"),$(t).prev().hide(),Dt(a,u[r].details,a+"_cont");return!1};var nt=!1;this.init=function(e){nt||(0==n.cmdlist.length&&(n=new Faug.FgRecorder(e)),Faug.execFunc("onInit",[]).valid||console.log("No onInit method found to bootstrap"),$(document).on("click",(function(e){var t=e.target;$(t).hasClass("faug-ctxt-action-menu")||$(t).parents().hasClass("faug-ctxt-action-menu")||$(t).parents().hasClass("faug-valid-row")||$(".faug-ctxt-action-menu").hide(),$(".dropdown, .open").removeClass("open"),$(t).hasClass("faug-object-ctrl")&&("open"==$(t).attr("state")?($(t).parent().siblings(".faug-object-tree-cont").addClass("hidden"),$(t).attr("state","close"),$(t).html("⬇")):($(t).parent().siblings(".faug-object-tree-cont").removeClass("hidden"),$(t).attr("state","open"),$(t).html("⬆")))})),!0===ve&&$(document).on("contextmenu",(function(e){return e.stopPropagation(),!1})),nt=!0)},this.i=this.init,this.startRecording=function(){n.startRecording()},this.stopRecording=function(){n.stopRecording()},this.executeCommand=function(e){n.execute(e)},this.play=function(e){n.play(e)},this.translate=function(e){return t?t.translate(e):e},this.t=this.translate,this.l=this.t,this.ref=function(e,t,a){t=(""+t).split(a=void 0===a?".":a);for(var i=0;i<t.length;i++){if(!e)return;e=e[t[i]]}return e};var st=this.ref;this.setref=function(e,t,a,i){t=(""+t).split(i=void 0===i?".":i);for(var r=0;r<t.length;r++)r==t.length-1?e[t[r]]=a:e=e[t[r]]};var ot=this.setref;this.setrefNewObj=function(e,t,a,i){t=(""+t).split(i=void 0===i?".":i);for(var r=0;r<t.length;r++)r==t.length-1?e[t[r]]=a:(e[t[r]]||(e[t[r]]={}),e=e[t[r]])};this.setrefNewObj;this.delref=function(e,t,a){t=(""+t).split(a=void 0===a?".":a);for(var i=0;i<t.length-1;i++){if(!e)return;e=e[t[i]]}delete e[t[i]]};var lt=this.delref;function dt(e,t,a,i,r,n,s,o,l,d){if(!0!==d){var c=t.details;if(n)(p=s.reset)||(p={}),De(r).prepend(at(Ne.form.resetButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.resetButton.style),Fg.getString(Ne.form.resetButton.class)+" faug-input-reset",{type:"button"}],p,"Reset",l,!1,!1,null)+"<br/>"),$(".faug-input-reset").off("click.reset").on("click.reset",(function(){return mt(c.name),!1}));if(y[t.details.name]){var f=s.progress,m=r+"_progressbar",h="progress";f&&f.custom&&f.custom.el&&(h=f.custom.el);var g=Mt(h,f,"","",{max:100,value:0,id:m},null,!0);De(r).append(g)}var p,v=c.name+"_submit_butt"+i,_={type:"submit",id:v,value:e};(p=s.submit)||(p={});var w="append";p&&(p.addId=!0,w=/^(append|prepend)$/i.test(p.position)?p.position.toLowerCase():w),"append"==w?De(r).append(at(Ne.form.submitButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.submitButton.style),Fg.getString(Ne.form.submitButton.class)+" btn faug-input-submit",_],p,e,void 0,!1,!1,null)):De(r).prepend(at(Ne.form.submitButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.submitButton.style),Fg.getString(Ne.form.submitButton.class)+" btn faug-input-submit",_],p,e,void 0,!1,!1,null)),a&&a[i]&&a[i].url?De(v).off("click.faug submit.faug").off("click.faug submit.faug").on("click.faug submit.faug",function(e,t,a,i,r,n){return function(s){if($(".faug-scrollable-menu").is(":visible"))return!1;if(s.preventDefault(),$(this).attr("disabled")){if("disabled"==$(this).attr("disabled"))return!1}else $(this).attr("disabled","disabled");!function(e,t,a,i,r,n,s,o){var l=e[t],d=a.details;if(!0===a.details.__ishelper){var c=De(d.id).serializeObject(d.name,!0);return void Ft({schemaName:d.schemaName,op:d.crudopName},d.defviewerId,!0,!0,c,void 0,void 0,o)}l.callbacks&&l.callbacks.beforeOp&&Xe(void 0,l.callbacks.beforeOp,[De(i).serializeObject(d.name,!0)]);for(var f=De(i).serializeObject(d.name,!0),m=De(i).find(".faug-load-more"),h=De(i).data("data"),g=0;g<m.length;g++){var p=$(m[g]).attr("list_value_cls"),v=1*$(m[g]).parent().attr("faug-tot-size"),_=1*$(m[g]).parent().attr("faug-curr-size");"."==(p=(p=(p=(p=p.replace(d.name,"")).replace(/\[/g,"")).replace(/\]/g,".")).replace(/'/g,"")).charAt(p.length-1)&&(p=p.substr(0,p.length-1));for(var w=st(h,p),F=_;F<v;F++)st(f,p)[F]=w[F]}var x=e[t].url,O=void 0;if(l.callbacks&&l.callbacks.onOp&&(O=Xe(void 0,l.callbacks.onOp,[f,o])).valid)return Xe(l.callbacks,"afterOp",[void 0,void 0,null,O.result,!0]),!1;l.callbacks&&l.callbacks.onValidateOp&&(O=void 0,O=Xe(void 0,l.callbacks.onValidateOp,[f,i,o]));var k=De(i),T=!1!==d.form.validateHiddenElements;if(k.length>0&&!Ut(d.name,"",void 0,T))return alert(Ne.form.validationErrorMsg+""),o.removeAttr("disabled"),!1;if(!0!==d.form.noHtml5Validation&&!k[0].checkValidity())return alert(Ne.form.validationErrorMsg+""),o.removeAttr("disabled"),!1;if(O&&O.valid&&!1===O.result)return o.removeAttr("disabled"),!1;var S={},A=e[t].vars,N=Vt();for(var C in N)N.hasOwnProperty(C)&&(S[C]=N[C]);var P={};if(!Ie(A))for(var C in A)if(A.hasOwnProperty(C)){var j=ze(A[C]);j[0]&&(S[C]=j[1])}if(e[t].transientVars){for(var C in e[t].transientVars)e[t].transientVars.hasOwnProperty(C)&&(S[C]=e[t].transientVars[C],P[C]=e[t].transientVars[C]);e[t].transientVars=void 0}for(var C in f)f.hasOwnProperty(C)&&(S[C]=f[C]);var D=function(e,t,a,i){return a||(a=De(t).serializeObject(i,!0)),Ie(e.serializeTemplate)?JSON.stringify(a,void 0,"\t"):$t(e.serializeTemplate,a,void 0,void 0,!1)}(a,i,f,d.name);if((O=Xe(void 0,l.callbacks.serializeContent,[D])).valid)if(O.result)D=O.result;else if(Ie(O.result)||!1===O.result)return!1;if(x=$t(x,S,void 0,void 0,!1),x=encodeURI(x),y[d.name]){var I={};return b&&("queryparam"==b.aTokenWhere?-1==x.indexOf("?")?x+="?"+b.aTokenName+"="+b.aTokenValue:"?"==x[x.length-1]?x+=b.aTokenName+"="+b.aTokenValue:x+="&"+b.aTokenName+"="+b.aTokenValue:"header"==b.aTokenWhere&&(I[b.aTokenName]=b.aTokenValue)),qt(i,x,I,d,function(e,t,a,i,r,n,s,o){return function(e){var t=a.details;i[r].successRsMsg&&Fg.alertDialog(i[r].successRsMsg),n==t.form.id?!0===t.form.resetOnDone&&mt(t.name):s.isModal?De(n+"_tr").modal("hide"):De(n).parent().parent().hide(),Xe(i[r].callbacks,"afterOp",[void 0,void 0,null,e,!0])}}(0,0,a,e,t,i,n),function(e,t){return function(a){Xe(e.callbacks,"failure",[a,!1]),t.removeAttr("disabled")}}(e[t],o),i+"_progressbar",[r,f,a,e,t,i,n,o])}Ze(!0,e[t].meth,x,e[t].contentType,D,e[t].headers?Fg.copy(e[t].headers):{},(function(e,t,a,i,r,n,s,o,l){if(r[n].successRsMsg&&alert(r[n].successRsMsg),s==i.form.id?!0===i.form.resetOnDone&&mt(i.name):o.isModal&&De(s+"_tr").modal("hide"),Xe(r[n].callbacks,"afterOp",[void 0,void 0,null,e,!0]),t){var d=t.attr("faug-data-crudopnm"),c=1*t.attr("faug-data-rownum"),f=t.data("viewerid"),m=i.__viewer[f],h=r[d].columns;if(!h&&u[i.name].properties)for(var g in h=[],u[i.name].properties)if(u[i.name].properties.hasOwnProperty(g)&&(Ie(u[i.name].properties[g].show)||u[i.name].properties[g].show)){var p=g.substring(0,1).toUpperCase()+g.substring(1);u[i.name].properties[g].display&&(p=u[i.name].properties[g].display),h.push([p,g])}je("Object",e)?t.html(bt(i,m,r[d],e,c,h)):t.html(bt(i,m,r[d],a,c,h)),De(f).parent().find(".faug-edit-button").on("click",function(e){return function(){Nt(u[e.name],$(this).closest(".faug-valid-row"),$(this))}}(i)),De(f).parent().find(".faug-delete-button").on("click",(function(){At(u[i.name],$(this).closest(".faug-valid-row"),$(this))}))}else r[d]}),(function(e,t,a,i,r,n){Xe(i[r].callbacks,"failure",[e,!1]),n.removeAttr("disabled")}),!0,[r,f,d,e,t,i,n,o],[f,a,e,t,o])}(e,t,a,i,r,n,0,$(this))}}(a,i,t,r,o,s)):De(r).off("submit.faug").on("submit.faug",(function(e){$(this).find(".faug-input-submit").is(":visible")||e.preventDefault()}))}}this.triggerDynamicAspect=function(){};this.triggerDynamicAspect;function ct(e,t,a,i,r,n){var s=e.details.form,o=T;if(i&&e.details.editForm&&e.details.editForm.id&&(s=e.details.editForm),m[e.details.name]=!1,i&&(m[e.details.name]=!0,o=S),!1!==a&&(a=!0),Xe(s.callbacks,"beforeDraw",[e.details.name]),h[e.details.name]={},g[e.details.name]={},e.dynamicAspects){var l={};if(e.__changed_properties__)for(var d in e.__changed_properties__)e.__changed_properties__.hasOwnProperty(d)&&(void 0!==e.__changed_properties__[d]?ot(e,d,e.__changed_properties__[d]):lt(e,d));else{if(je("Object",e.dynamicAspects)){for(var d in e.dynamicAspects)if(e.dynamicAspects.hasOwnProperty(d)){var c=st(e,d);l[d]=c}}else if(je("Array",e.dynamicAspects))for(var u=0;u<e.dynamicAspects.length;u++)if(je("Object",e.dynamicAspects[u])&&e.dynamicAspects[u].cond&&je("Object",e.dynamicAspects[u].valueset))for(var d in e.dynamicAspects[u].valueset)if(e.dynamicAspects[u].valueset.hasOwnProperty(d)){c=st(e,d);l[d]=c}e.__changed_properties__=l}if(je("Object",e.dynamicAspects))for(var d in e.dynamicAspects){if(e.dynamicAspects.hasOwnProperty(d))if(je("String",e.dynamicAspects[d])&&-1!=e.dynamicAspects[d].indexOf("@"))(f=ze(e.dynamicAspects[d]))[0]&&(void 0===f[1]?lt(e,d):ot(e,d,f[1]));else if(je("Object",e.dynamicAspects[d])&&e.dynamicAspects[d].cond&&e.dynamicAspects[d].value){if(Re(e.dynamicAspects[d].cond,null))if(je("String",e.dynamicAspects[d].value)&&-1!=e.dynamicAspects[d].value.indexOf("@"))(f=ze(e.dynamicAspects[d].value))[0]&&(void 0===f[1]?lt(e,d):ot(e,d,f[1]));else void 0===e.dynamicAspects[d].value?lt(e,d):ot(e,d,e.dynamicAspects[d].value)}else void 0===e.dynamicAspects[d]?lt(e,d):ot(e,d,e.dynamicAspects[d])}else if(je("Array",e.dynamicAspects))for(u=0;u<e.dynamicAspects.length;u++){if(je("Object",e.dynamicAspects[u])&&e.dynamicAspects[u].cond&&je("Object",e.dynamicAspects[u].valueset))if(Re(e.dynamicAspects[u].cond,null))for(var d in e.dynamicAspects[u].valueset){var f;if(e.dynamicAspects[u].valueset.hasOwnProperty(d))if(je("String",e.dynamicAspects[u].valueset[d])&&-1!=e.dynamicAspects[u].valueset[d].indexOf("@"))(f=ze(e.dynamicAspects[u].valueset[d]))[0]&&(void 0===f[1]?lt(e,d):ot(e,d,f[1]));else void 0===e.dynamicAspects[u].valueset[d]?lt(e,d):ot(e,d,e.dynamicAspects[u].valueset[d])}}}e.details.hasOwnProperty("labelEleId")&&De(e.details.labelEleId).html(e.details.label);var p,v=s.id;if(Mt(Fg.getString(Ne.form.ele),s,Fg.getString(Ne.form.style),Fg.getString(Ne.form.class),{role:"form",id:s.id},null,!1,!0,!0,void 0,r),s.custom&&s.custom.properties&&(p=s.custom.properties),De(s.id).addClass("faug-form"),De(s.id).attr("faug-sch-name",e.details.name),De(s.id).html(rt(e,e.details,e,0,"","",[t],!1,!0,"",p,0,n,!1,!0)),i&&De(s.id).data("editData",t),void 0===e.details.__ishelper||!0===e.details.__ishelper&&void 0!==s.submit){var y=void 0===s.submit||void 0===s.submit.label?Fg.getString(Ne.form.submitButton.label):s.submit.label;o=!0===e.details.__ishelper&&void 0!==s.submit?e.details.crudopName:o,dt(y,e,e.crud,o,s.id,s.showReset,s,void 0,p,n)}if(Xe(s.callbacks,"afterDraw",[void 0,s.id]),!e.__namedCallbacks&&s.callbacks&&s.callbacks.afterDraw&&s.callbacks.afterDraw.controlEvents&&s.callbacks.afterDraw.controlEvents.length>0){e.__namedCallbacks={};for(var b=0;b<s.callbacks.afterDraw.controlEvents.length;b++){var _=s.callbacks.afterDraw.controlEvents[b].name;_&&(e.__namedCallbacks[_]={},e.__namedCallbacks[_].controlEvents=[s.callbacks.afterDraw.controlEvents[b]])}}s.callbacks&&s.callbacks.transformElements&&Xe(void 0,s.callbacks.transformElements,[]).valid;if(void 0!==s.visibilityControl&&void 0!==s.visibilityControl.eleId){var w=s.visibilityControl,F=w.eleId,x=w.event,O=w.type;null!=x&&""!=x||(x="click"),null!=O&&""!=O||(O="showhide"),De(F).on(x,function(e,t,a){return function(i){var r=De(e).is(":visible");"showhide"!=a&&"hide"!=a||!r?"showhide"!=a&&"show"!=a||(s.isModal?De(e).modal({show:!0}):De(e).show()):s.isModal?De(e).modal("hide"):De(e).hide(),Ge(s.callbacks.visibilityEventCallback,[t,!r])}}(v,e.details,O))}a&&(De(v).show(),s.isModal&&De(v).modal({show:!0})),Dt(void 0,e.details,s.id)}this.drawCreateForm=function(e,t,a,i,r,n){u[e]&&u[e].details.form?ct(u[e],t,a,!1,i,r):L[e]&&Qe(L[e][0],e,function(e,t,a,r,n,s){return function(){ct(e[t],a,r,!1,i,n),s&&s()}}(u,e,t,a,r,n))};var ut=this.drawCreateForm;this.dcf=this.drawCreateForm,this.drawEditForm=function(e,t,a,i,r,n){u[e]&&u[e].details.form?ct(u[e],t,a,!0,i,r):L[e]&&Qe(L[e][0],e,function(e,t,a,r,n,s){return function(){ct(e[t],a,r,!0,i,n),s&&s()}}(u,e,t,a,r,n))};var ft=this.drawEditForm;this.def=this.drawEditForm;var mt=function(e){var t;(m[e]=!1,h[e]={},u[e].details.form.custom&&u[e].details.form.custom.properties&&(t=u[e].details.form.custom.properties),De(u[e].details.form.id).html(rt(u[e],u[e].details,u[e],0,"","",null,!1,!0,"",t,0,!1,!1,!0)),Dt(void 0,u[e].details,u[e].details.form.id),dt(void 0===u[e].details.form.submit||void 0===u[e].details.form.submit.label?Fg.getString(Ne.form.submitButton.label):u[e].details.form.submit.label,u[e],u[e].crud,T,u[e].details.form.id,u[e].details.form.showReset,u[e].details.form,void 0,t),Xe(u[e].details.form.callbacks,"onReset",[]),Xe(u[e].details.form.callbacks,"afterDraw",[void 0,u[e].details.form.id]),u[e].details.form.callbacks&&u[e].details.form.callbacks.transformElements)&&Xe(void 0,u[e].details.form.callbacks.transformElements,[]).valid};this.resetTheForm=mt,this.rtf=this.resetTheForm,this.loadSchema=function(e,t,a,i,r,n,s,o,l){if(!0===o&&delete u[e],u[e]){var d=u[e],c=d.details.__defviewerId;return l?void l():(a&&void 0!==d.details.form&&ct(d,null,i,!1),void(r&&yt(d,c,n,s)))}!t&&L[e]&&(t=L[e][0]),Xe(null,"beforeLoad",[e]),Ze(!0,"GET",t,"application/json","",{},vt,(function(e,t,a){var i=t||"";i+="("+a+")",console.log("Error loading schema "+i)}),!0,[a,i,r,n,s,!0,l,o],[e,t])};this.loadSchema;function ht(e){void 0===e.details.callbacks&&(e.details.callbacks={});var t=null;if(e.details.__viewer={},void 0!==e.details.viewer){for(var a=0;a<e.details.viewer.length;a++){var i=e.details.viewer[a];void 0!==i.id&&(null==t&&(t=i.id),void 0===i.custom&&(i.custom={}),void 0===i.callbacks&&(i.callbacks={}),e.details.__viewer[i.id]=i)}e.details.viewer.custom={},e.details.__defviewerId=t}void 0!==e.details.form&&void 0===e.details.form.custom&&(e.details.form.custom={}),void 0!==e.details.form&&void 0===e.details.form.callbacks&&(e.details.form.callbacks={}),void 0===e.details.editForm&&(e.details.editForm={})}this.ls=this.loadSchema;var gt=function(e,t,a){(!Fg.isN(a)&&!1!==a||v.hasOwnProperty(e[0]))&&!0!==a||(v[e[0]]="",t.push(e))};function pt(e,t,a,i){var r;if("object"===t.type?r=t.properties:"array"==t.type&&t.items&&(r=t.items.properties),r)for(var n in r)if("object"!=r[n].type&&"array"!=r[n].type){if(r.hasOwnProperty(n)&&!Ie(r[n].optionTemplateFile)?gt([r[n].optionTemplateFile,"html",!0,1],a,i):r.hasOwnProperty(n)&&!Ie(r[n].genericOptionTemplateFile)?gt([r[n].genericOptionTemplateFile,"html",!0,2],a,i):r.hasOwnProperty(n)&&!Ie(r[n].templateFile)?gt([r[n].templateFile,"html",!0,1],a,i):r.hasOwnProperty(n)&&!Ie(r[n].genericTemplateFile)&&gt([r[n].genericTemplateFile,"html",!0,2],a,i),e.namedEvents&&je("Object",e.namedEvents)&&r.hasOwnProperty(n)&&r[n].events)for(var s in r[n].events)if(r[n].events.hasOwnProperty(s))if(je("String",r[n].events[s])&&e.namedEvents[r[n].events[s]])r[n].events[s]=e.namedEvents[r[n].events[s]];else if(je("Array",r[n].events[s]))for(var o=0;o<r[n].events[s].length;o++)je("String",r[n].events[s][o])&&e.namedEvents[r[n].events[s][o]]&&(r[n].events[s][o]=e.namedEvents[r[n].events[s][o]])}else pt(e,r[n],a,i)}this.onSchemaLoad=function(e,t,a,i,r,n,s,o,l){if(Fg.is("Object",e)){ht(e);var d=[];if(e.templateFile&&gt([e.templateFile,"html",!0,4],d,l),pt(e,e,d,l),e.details&&e.details.viewer)for(var c=0;c<e.details.viewer.length;c++){var f=e.details.viewer[c];f&&f.helperArea&&f.helperArea.schema&&(void 0===f.helperArea.details.form&&(f.helperArea.details.form=Fg.copy(f.helperArea.details),f.helperArea.details.custom&&delete f.helperArea.details.custom,f.helperArea.details.form.crudop&&delete f.helperArea.details.form.crudop,f.helperArea.details.form.callbacks&&delete f.helperArea.details.form.callbacks),pt(f=f.helperArea.schema,f,d,l))}for(var m in e.crud)if(e.crud[m].callbacks||(e.crud[m].callbacks={}),e.crud.hasOwnProperty(m)&&e.crud[m].template)if(je("Object",e.crud[m].template)&&e.crud[m].template.vars&&e.crud[m].template.values&&e.crud[m].template.vars.length>0&&e.crud[m].template.values.length>0)for(var h=e.crud[m].template,g=h.vars,p=0;p<h.values.length;p++){h.values[p][0].length==g.length&&gt([h.values[p][1],"html",!0,0],d,l)}else gt([e.crud[m].template,"html",!0,0],d,l);for(var m in e.crud)if(e.crud.hasOwnProperty(m)){var v=e.crud[m].callbacksRef;for(var y in v&&e.crud[v]&&e.crud[v].callbacks&&(e.crud[m].callbacks=e.crud[v].callbacks),e.crud[m]){if(e.crud[m].hasOwnProperty(y))(v=e.crud[m][y].controlEventsAppend)&&e.crud[v]&&e.crud[v][y].controlEvents&&(e.crud[m][y].controlEvents?e.crud[m][y].controlEvents.push.apply(e.crud[m][y].controlEvents,e.crud[v][y].controlEvents):e.crud[m][y].controlEvents=e.crud[v][y].controlEvents)}}if(ie&&pe&&pe.schemas&&pe.schemas[e.details.name]&&(e.details.name=pe.schemas[e.details.name]),s&&d.length>0)Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(d,(function(e,t,a,i){t&&(1===i[3]||2===i[3]?Ot(i[0],a.responseText,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null},void 0,l):4===i[3]?Ot(i[0],a.responseText,null,4,l):Ot(i[0],a.responseText,{rows:null,options:null},void 0,l),X[i[0]]=[a.responseText,i[3]])})).done(function(t,a,i,r,n){return function(){if(_(e),Fg.freezeUI(!1),n)n();else if(a&&(yt(t,e.details.__defviewerId,i,r),t.aliases&&t.aliases.length>0))for(var s=0;s<t.aliases.length;s++){var o=u[t.aliases[s].name];yt(o,o.details.__defviewerId,i&&t.aliases[s].isDrawViewer,r&&t.aliases[s].isShowViewer)}}}(e,i,r,n,o)).fail((function(e){Fg.freezeUI(!1),alert("Problem loading required template files")}));else if(o)_(e),o();else if(i){if(_(e),yt(e,e.details.__defviewerId,r,n),e.aliases&&e.aliases.length>0)for(p=0;p<e.aliases.length;p++){var b=u[e.aliases[p].name];yt(b,b.details.__defviewerId,r&&e.aliases[p].isDrawViewer,n&&e.aliases[p].isShowViewer)}}else _(e);return d}function _(e){if(e.aliases&&e.aliases.length>0)for(var i=0;i<e.aliases.length;i++){var r=jQuery.extend(!0,{},e);r.details.name=e.aliases[i].name,r.aliases=void 0,e.aliases[i].details&&(r.details=e.aliases[i].details,ht(r)),r.details.__defviewerId=e.aliases[i].defViewerId,e.aliases[i].defViewerId in e.details.__viewer||console.log("Could not find default viewer id "+e.aliases[i].defViewerId+" for schema "+e.aliases[i].name),u[r.details.name]=r,Xe(r.details.callbacks,"afterLoad",[r]),t&&e.aliases[i].isdrawCreateForm&&void 0!==r.details.form&&ct(r,null,a&&e.aliases[i].isShowCreateForm,!1)}u[e.details.name]=e,Xe(e.details.callbacks,"afterLoad",[e]),t&&void 0!==e.details.form&&ct(e,null,a,!1)}};var vt=this.onSchemaLoad;function yt(e,t,a,i){var r=N;void 0!==e.defaultOp&&(r=e.defaultOp),void 0!==e.crud[r]&&(void 0!==e.crud[r].viewerId&&(t=e.crud[r].viewerId),null!=t&&void 0!==e.details.__viewer[t]&&Ft({schemaName:e.details.name,op:r},t,a,i))}function bt(e,t,a,i,r,n){var s="",o="",l=-1,d=-1;void 0!==t.editButton&&t.editButton.colNum>0&&(s=Mt(Fg.getString(Ne.viewer.editButton.ele),t.editButton,Fg.getString(Ne.viewer.editButton.style),"faug-edit-button",{},Fg.getString(Ne.viewer.deleteButton.label),!0),l=t.editButton.colNum),void 0!==t.deleteButton&&t.deleteButton.colNum>0&&(o=Mt(Fg.getString(Ne.viewer.deleteButton.ele),t.deleteButton,Fg.getString(Ne.viewer.deleteButton.style),"faug-delete-button",{},Fg.getString(Ne.viewer.deleteButton.label),!0),d=t.deleteButton.colNum);for(var c="",u=0;u<n.length;u++)if(u+1==l)c+=Mt(Fg.getString(Ne.viewer.this.table.column.ele),t.custom.td,Fg.getString(Ne.viewer.this.table.column.style),Fg.getString(Ne.viewer.this.table.column.class),{},s,!0);else if(u+1==d)c+=Mt(Fg.getString(Ne.viewer.this.table.column.ele),t.custom.td,Fg.getString(Ne.viewer.this.table.column.style),Fg.getString(Ne.viewer.this.table.column.class),{},o,!0);else{var f=i[n[u][1]];if(a.callbacks&&a.callbacks.viewerColumnDataTf){var m=Xe(void 0,a.callbacks.viewerColumnDataTf,[i,r,u]);m.valid&&void 0!==m.result?f=m.result:3!=n[u].length||Ie(n[u][2])||(m=Ge(n[u][2],[i,n[u][1]])).valid&&void 0!==m.result&&(f=m.result)}c+=Mt(Fg.getString(Ne.viewer.this.table.column.ele),t.custom.td,Fg.getString(Ne.viewer.this.table.column.style),Fg.getString(Ne.viewer.this.table.column.class),{},f,!0)}return c}this.invokeCrudOp=function(e,t,a,i,r,n){if(i=i||!0,r=r||!0,u[e]){var s=u[e],o=n;o||void 0===s.details.viewer||(o=s.details.__defviewerId);var l=a;a||void 0===s.defaultOp||(l=s.defaultOp),l||(l=N),void 0!==s.crud[l]&&(void 0!==s.crud[l].viewerId&&(o=s.crud[l].viewerId),o&&s.details.__viewer[o]?(t&&(s.crud[l].transientVars=t),Ft({schemaName:s.details.name,op:l},o,i,r)):console.log("Could not find viewer by viewer id "+o))}else L[e]&&Qe(L[e][0],e,function(e,t,a,i,r,n,s){return function(){var o=e[t],l=s;l||void 0===o.details.viewer||(l=o.details.__defviewerId);var d=i;i||void 0===o.defaultOp||(d=o.defaultOp),d||(d=N),void 0!==o.crud[d]&&(void 0!==o.crud[d].viewerId&&(l=o.crud[d].viewerId),l&&o.details.__viewer[l]?(a&&(o.crud[d].transientVars=a),Ft({schemaName:o.details.name,op:d},l,r,n)):console.log("Could not find viewer by viewer id "+l))}}(u,e,t,a,i,r,n))},this.ic=this.invokeCrudOp,this.invokeCrudOpNoViewer=function(e,t,a,i){if(u[e]){var r=u[e],n=i,s=a;a||void 0===r.defaultOp||(s=r.defaultOp),s||(s=N),void 0!==r.crud[s]&&(n?(t&&(r.crud[s].transientVars=t),Ft({schemaName:r.details.name,op:s},n)):console.log("Could not find element by viewer id "+n))}else L[schemaName]&&Qe(L[schemaName][0],schemaName,function(t,a,i,r,n){return function(){var a=t[e],s=n,o=r;r||void 0===a.defaultOp||(o=a.defaultOp),o||(o=N),void 0!==a.crud[o]&&(s?(i&&(a.crud[o].transientVars=i),Ft({schemaName:a.details.name,op:o},s)):console.log("Could not find element by viewer id "+s))}}(u,schemaName,t,a,i))},this.icnv=this.invokeCrudOpNoViewer,this.mergeVars=function(e,t,a){var i={};if(e)for(var r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);if(t)for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);if(a)for(var r in a)a.hasOwnProperty(r)&&(i[r]=a[r]);return i};var _t=this.mergeVars;this.mergeVarsLR=function(e,t,a){var i={};if(!0===a){var r=!1;if(e)for(var n in e)t&&t.hasOwnProperty(n)&&(i[n]=t[n],r=!0),e.hasOwnProperty(n)&&(i[n]=e[n],r=!0);if(!r&&t)for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n])}else if(!1===a){r=!1;if(t)for(var n in t)e&&e.hasOwnProperty(n)&&(i[n]=e[n],r=!0),t.hasOwnProperty(n)&&(i[n]=t[n],r=!0);if(!r&&e)for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n])}return i};var wt=this.mergeVarsLR;function Ft(e,t,a,i,r,n,s,o){o&&o.removeAttr("disabled");var l=e.schemaName,d=e.op,c=u[l];if(c.dynamicAspects){var f={};if(c.__changed_properties__)for(var m in c.__changed_properties__)c.__changed_properties__.hasOwnProperty(m)&&(void 0!==c.__changed_properties__[m]?ot(c,m,c.__changed_properties__[m]):lt(c,m));else{if(je("Object",c.dynamicAspects)){for(var m in c.dynamicAspects)if(c.dynamicAspects.hasOwnProperty(m)){var g=st(c,m);f[m]=g}}else if(je("Array",c.dynamicAspects))for(var p=0;p<c.dynamicAspects.length;p++)if(je("Object",c.dynamicAspects[p])&&c.dynamicAspects[p].cond&&je("Object",c.dynamicAspects[p].valueset))for(var m in c.dynamicAspects[p].valueset)if(c.dynamicAspects[p].valueset.hasOwnProperty(m)){g=st(c,m);f[m]=g}c.__changed_properties__=f}if(je("Object",c.dynamicAspects))for(var m in c.dynamicAspects){if(c.dynamicAspects.hasOwnProperty(m))if(je("String",c.dynamicAspects[m])&&-1!=c.dynamicAspects[m].indexOf("@"))(k=ze(c.dynamicAspects[m]))[0]&&(void 0===k[1]?lt(c,m):ot(c,m,k[1]));else if(je("Object",c.dynamicAspects[m])&&c.dynamicAspects[m].cond&&c.dynamicAspects[m].value){if(C=Re(c.dynamicAspects[m].cond,null))if(je("String",c.dynamicAspects[m].value)&&-1!=c.dynamicAspects[m].value.indexOf("@"))(k=ze(c.dynamicAspects[m].value))[0]&&(void 0===k[1]?lt(c,m):ot(c,m,k[1]));else void 0===c.dynamicAspects[m].value?lt(c,m):ot(c,m,c.dynamicAspects[m].value)}else void 0===c.dynamicAspects[m]?lt(c,m):ot(c,m,c.dynamicAspects[m])}else if(je("Array",c.dynamicAspects))for(p=0;p<c.dynamicAspects.length;p++){if(je("Object",c.dynamicAspects[p])&&c.dynamicAspects[p].cond&&je("Object",c.dynamicAspects[p].valueset))if(C=Re(c.dynamicAspects[p].cond,null))for(var m in c.dynamicAspects[p].valueset){if(c.dynamicAspects[p].valueset.hasOwnProperty(m))if(je("String",c.dynamicAspects[p].valueset[m])&&-1!=c.dynamicAspects[p].valueset[m].indexOf("@"))(k=ze(c.dynamicAspects[p].valueset[m]))[0]&&(void 0===k[1]?lt(c,m):ot(c,m,k[1]));else void 0===c.dynamicAspects[p].valueset[m]?lt(c,m):ot(c,m,c.dynamicAspects[p].valueset[m])}}}var v=c.crud[d],y=c.details.__viewer[t];(Ie(a)||!1===a)&&(y={});var b={},_=v.vars,w=Vt();for(var F in w)w.hasOwnProperty(F)&&(b[F]=w[F]);var O={};if(!Ie(_))for(var F in _){var k;if(_.hasOwnProperty(F))(k=ze(_[F]))[0]&&(b[F]=k[1])}if(v.transientVars){for(var F in v.transientVars)v.transientVars.hasOwnProperty(F)&&(b[F]=v.transientVars[F],O[F]=v.transientVars[F]);v.transientVars=void 0}var T=v.template;if(void 0===T||null==T||""==T)T=void 0;else if(je("Object",T)&&T.vars&&T.values&&T.vars.length>0&&T.values.length>0){for(var S=T.vars,A=0;A<T.values.length;A++){for(var N=T.values[A][0],C=N.length==S.length,P=0;P<S.length;P++)C&=Ee(S[P],b,N[P]);if(C){T=T.values[A][1];break}}je("Object",T)&&(T=void 0)}if(s&&0!=s.length||0==(s=De(t)).length&&(s=$(t)),a){var j=St(y.callbacks,v.callbacks,"beforeDraw");Xe(j,"beforeDraw",[l]),s.length>0&&$.fn.DataTable.fnIsDataTable(s)&&(s.dataTable().fnDestroy(),s.empty()),s.length>0&&((!0!==x[q]||!0!==y.diff&&"true"!==y.diff)&&s.empty(),s.parent().find(".faug-trigger-read-prev-button").remove(),s.parent().find(".faug-trigger-read-next-button").remove()),s.off();var D=v.columns,I=t;if(!T&&D&&(Mt(Fg.getString(Ne.viewer.this.table.ele),y,Fg.getString(Ne.viewer.this.table.style),Fg.getString(Ne.viewer.this.table.class),{id:I},null,!1,!0,!0,Fg.getString(Ne.viewer.this.table.container.ele),null,Fg.getString(Ne.viewer.this.table.container.style)),s&&0!=s.length||(s=De(t)),0==s.find(Fg.getString(Ne.viewer.this.table.header.ele)).length)){var B="";if(!D&&c.properties)for(var E in D=[],c.properties)if(c.properties.hasOwnProperty(E)&&(Ie(c.properties[E].show)||c.properties[E].show)){var z=E.substring(0,1).toUpperCase()+E.substring(1);c.properties[E].display&&(z=c.properties[E].display),D.push([z,E])}for(A=0;A<D.length;A++)B+=Mt(Fg.getString(Ne.viewer.this.table.header.colEle),y.custom.theadtrth,"","",{},D[A][0],!0);B=Mt(Fg.getString(Ne.viewer.this.table.header.rowEle),y.custom.theadtr,"","",{},B,!0),B=Mt(Fg.getString(Ne.viewer.this.table.header.ele),y.custom.thead,"","",{},B,!0),s.append(B)}if(void 0!==y.helperArea){var V=d;y.helperArea.details&&y.helperArea.details.crudopName&&(V=y.helperArea.details.crudopName);var M=c.crud[V];if(function(e,t,a,i,r,n,s,o){if(Xe(a.helperArea.callbacks,"beforeDraw",[e]),void 0!==a.helperArea.details&&void 0!==a.helperArea.details.form&&void 0!==a.helperArea.schema){var l=a.helperArea.details.form.id;if(!(De(l).length>0)){var d=a.helperArea.details;null==d.callbacks&&(d.callbacks={}),d.crudopName=n,d.defviewerId=s,d.crudop=r,d.__ishelper=!0,d.schemaName=e,d.initObject=a.helperArea.initObject,void 0===h[d.name]&&(h[d.name]={});var c=a.helperArea.schema;c.details=d,u[d.name]=c,c.crud={},c.crud[n]=r;var f=void 0;if(!Fg.isN(d.initObject))if(je("String",d.initObject)){var m=Ge(d.initObject);m.valid&&(f=m.result)}else f=d.initObject;ut(d.name,f,!1,l,!1)}}}(l,c.details,y,0,M,V,t),y.helperArea.initObject){if(je("String",y.helperArea.initObject))(G=Ge(y.helperArea.initObject)).valid&&(r=G.result);else r=y.helperArea.initObject;var R=De(y.helperArea.details.id).serializeObject(y.helperArea.details.name,!0);r=wt(r,R,!1)}else r=De(y.helperArea.details.id).serializeObject(y.helperArea.details.name,!0)}if(i&&(y.isModal?De(I).modal({show:!0}):s.show()),void 0!==y.visibilityControl&&void 0!==y.visibilityControl.eleId){var L=y.visibilityControl,U=L.eleId,H=L.event,J=L.type;null!=H&&""!=H||(H="click"),null!=J&&""!=J||(J="showhide"),De(U).on(H,function(e,t,a){return function(i){var r=De(e).is(":visible");"showhide"!=a&&"hide"!=a||!r?"showhide"!=a&&"show"!=a||(y.isModal?De(e).modal({show:!0}):De(e).parent().show()):y.isModal?De(e).modal("hide"):De(e).parent().hide(),Ge(y.callbacks.visibilityEventCallback,[t,!r])}}(I,c.details,J))}}if("local"!=v.type){var W=v.url;if(v.callbacks&&v.callbacks.beforeOp){ie=Xe(void 0,v.callbacks.beforeOp,[v.url]);W=v.url,ie.valid&&(W=ie.result)}if(v.associatedViewerId){var X=c.details.__viewer[v.associatedViewerId];if(X.helperArea.initObject){var G;if(je("String",X.helperArea.initObject))(G=Ge(X.helperArea.initObject)).valid&&(r=G.result);else r=X.helperArea.initObject;R=De(X.helperArea.details.id).serializeObject(X.helperArea.details.name,!0);r=wt(r,R,!1)}else r=De(X.helperArea.details.id).serializeObject(X.helperArea.details.name,!0)}void 0===b._f_start&&(b._f_start=0),void 0===b._f_pagenum&&(b._f_pagenum=0),void 0===b._f_search_text&&(b._f_search_text=""),v.table&&(v.table.schemaName=c.details.name,v.table.op=d,isNaN(b._f_count)&&v.table.pagination&&!0===v.table.pagination.enabled&&(b._f_count=v.table.pagination.numpages&&v.table.pagination.numpages.length>0?v.table.pagination.numpages[0]:10)),void 0===b._f_count&&(b._f_count=10);var Y={_f_start:b._f_start,_f_pagenum:b._f_pagenum,_f_count:b._f_count,_f_search_text:b._f_search_text,_f_prev_state:b._f_prev_state,_f_originated_from:b._f_originated_from},Q=_t(b,r);W=$t(W,Q,void 0,void 0,!1),W=encodeURI(W);var K=v.content;if("GET"!=v.meth)if(K){if(K=$t(K,Q,void 0,void 0,!1),r)try{var Z=JSON.parse(K),ee=!0;for(var te in Z)Z.hasOwnProperty(te)&&(ee&=r.hasOwnProperty(te));ee&&(K=JSON.stringify(r))}catch(e){}}else r&&(K=JSON.stringify(r));var ae=!0!==x[q];!0===v.freezeUi?ae=!0:!1===v.freezeUi&&(ae=!1),Ze(ae,v.meth,W,v.contentType,K,v.headers?Fg.copy(v.headers):{},xt,(function(e,t,a,i,r,n,s){var o=St(s.callbacks,a.callbacks,"failure");Xe(o,"failure",[e,!0,i,r,n])}),!0,[a,c,T,D,v,s,t,e,O,n,d,y,Y],[c,v,T,s,t,y])}else{v.callbacks&&v.callbacks.beforeOp&&Xe(void 0,v.callbacks.beforeOp,[]);var ie,re=v.from,ne=re;0==re.indexOf("f:")?(ie=Ge(re.substring(2))).valid&&(ne=ie.result):0==re.indexOf("v:")&&(ne=b[re.substring(2)]),xt(ne,a,c,T,D,v,s,t,e,O,n,d,y)}}this.crudOpCallback=function(e,t,a,i,r,n,s,o,l,d,u,m,h,g){var v=e;n.dataRef&&(v=st(e,n.dataRef));var y=je("Array",v);if(void 0!==n.storeAs)if(je("Object",n.storeAs)&&n.storeAs.name)if(y&&n.storeAs.key)for(var b=0;b<v.length;b++)f[n.storeAs.name]||ot(f,n.storeAs.name,{}),ot(f,n.storeAs.name+"."+e[b][n.storeAs.key],v[b]);else v[n.storeAs.key]?ot(f,n.storeAs.name+"."+n.storeAs.key,v):ot(f,n.storeAs.name,v);else je("String",n.storeAs)&&ot(f,n.storeAs,v);if(c[a.details.name]=e,Xe(n.callbacks,"afterOp",[e]),!(P=Xe(n.callbacks,"beforeDraw",[e])).valid||!1!==oid.result){!0!==n.forTemplate&&(v=e);var _=void 0;""!==l.drawSchmemaForm&&(_=l.drawSchmemaForm);var w,F,O,T=void 0;if(n.table&&(T=new Fg.table(n.table)),n.canvasDataGrid&&!0===n.canvasDataGrid.enabled&&(w=n.canvasDataGrid),x[U]=void 0,_&&je("Object",v))ut(_,v);else if(!i&&r){if(y)for(var S=0;S<v.length;S++){var A=a.details.name+"_inlinearea_"+S,N=a.details.name+"_inlinearea_"+S+"_ttr";html="";var C=n.callbacks&&n.callbacks.drawViewerColumns;if(Ie(C))html+=bt(a.details,h,n,v[S],S,r);else(P=Xe(void 0,n.callbacks.drawViewerColumns,[v[S],S])).valid&&(html+=P.result);html=Mt(Fg.getString(Ne.viewer.this.table.row.ele),h.tr,"","faug-valid-row",{id:N,"faug-data-inlfid":A,"faug-data-rownum":S,"faug-data-crudopnm":m,"faug-data-op-col-len":r.length,"faug-data-schemanm":a.details.name},html,!0),s.append(html)}else for(var S in v)if(v.hasOwnProperty(S)){A=a.details.name+"_inlinearea_"+S,N=a.details.name+"_inlinearea_"+S+"_ttr";html="";var P;C=n.callbacks&&n.callbacks.drawViewerColumns;if(Ie(C))html+=bt(a.details,h,n,v[S],S,r);else(P=Xe(void 0,n.callbacks.drawViewerColumns,[v[S],S])).valid&&(html+=P.result);html=Mt(Fg.getString(Ne.viewer.this.table.row.ele),h.tr,"","faug-valid-row",{id:N,"faug-data-inlfid":A,"faug-data-rownum":S,"faug-data-crudopnm":m,"faug-data-op-col-len":r.length,"faug-data-schemanm":a.details.name},html,!0),s.append(html)}var j=s.find(".faug-valid-row");for(S=0;S<j.length;S++){var D=S;void 0!==(M=$(j[S]).attr("faug-data-rownum"))&&!1!==M&&(D=M),$(j[S]).data("data",st(v,D))}}else if(i&&function(e,t){return p[t]}(a.details.name,i)){if(u&&(_e=-2),u&&0==v.length)kt(i,v,d);else if(u&&v.length>0){if(faugScrollableListLength=v.length,s.html(Mt(Fg.getString(Ne.viewer.this.dropdown.ele),h.dropdown,Fg.getString(Ne.viewer.this.dropdown.style),Fg.getString(Ne.viewer.this.dropdown.class)+" dropdown-menu faug-scrollable-menu",{role:"menu"},kt(i,v,d),!0)),(V=x[U])||(V=v),"rtl"===$(document).prop("dir")&&s.find(".faug-scrollable-menu").css("left",""),s.length>0)for(j=s.find(".faug-valid-row"),S=0;S<j.length;S++){N=a.details.name+"_inlinearea_"+S+"_ttr";$(j[S]).attr("id",N);D=S;void 0!==(M=$(j[S]).attr("faug-data-rownum"))&&!1!==M?D=M:$(j[S]).attr("faug-data-rownum",S),$(j[S]).attr("faug-data-schemanm",a.details.name),void 0!==(M=$(j[S]).attr("faug-data-ind-sep"))&&!1!==M&&(R=M),$(j[S]).data("data",st(V,D,R))}n.dropdownmenuItem&&n.dropdownmenuItem.click&&s.on("click",".dropdown-menu, .faug-scrollable-menu "+Fg.getString(Ne.viewer.this.dropdown.itemEle),(F=n.dropdownmenuItem.click,function(e){if($(this).prop("tagName")==Ne.viewer.this.dropdown.itemEle.toUpperCase()+""){var t=Faug.getFaugValidRowData($(this)),a=$(this).parent().parent(),i=a.attr("faug-data-ddtrgid"),r=De(i);if(i||(i=a.attr("faug-data-ddtrgcls"),r=$(i)),F.attrAssign){var n=F.attrAssign;je("Array",F.attrAssign)||(n=[F.attrAssign]);for(var s=0;s<n.length;s++)if(Re(n[s].cond,$(this)))if(t&&n[s].fromData){var o=st(t,n[s].fromData);if(n[s].tF){var l=st(window,n[s].tF);(u=Ge(l,[d],!0)).valid&&(d=u.result)}!je("Object",n[s].to)||Ie(n[s].to.attr)||Ie(n[s].to.selector)?Ie(n[s].to)?r.first().attr(n[s].fromData,d):r.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d)}else if(n[s].fromVar){var d=Vt(n[s].fromVar);n[s].tF&&(l=st(window,n[s].tF),(u=Ge(l,[d],!0)).valid&&(d=u.result)),!je("Object",n[s].to)||Ie(n[s].to.attr)||Ie(n[s].to.selector)?Ie(n[s].to)?r.first().attr(n[s].fromVar,d):r.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d)}else n[s].fromAttr?(d=$(this).attr(n[s].fromAttr),n[s].tF&&(l=st(window,n[s].tF),(u=Ge(l,[d],!0)).valid&&(d=u.result)),!je("Object",n[s].to)||Ie(n[s].to.attr)||Ie(n[s].to.selector)?Ie(n[s].to)?r.first().attr(n[s].fromAttr,d):r.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d)):n[s].to&&(d=$(this).val(),n[s].tF&&(l=st(window,n[s].tF),(u=Ge(l,[d],!0)).valid&&(d=u.result)),!je("Object",n[s].to)||Ie(n[s].to.attr)||Ie(n[s].to.selector)?Ie(n[s].to)||r.first().attr(n[s].to,d):$(n[s].to.selector).first().attr(n[s].to.attr,d))}if(F.valueAssign){var c=F.valueAssign;for(je("Array",F.valueAssign)||(c=[F.valueAssign]),s=0;s<c.length;s++)if(Re(c[s].cond,$(this)))if(t&&c[s].fromData)o=st(t,c[s].fromData),c[s].tF&&(l=st(window,c[s].tF),(u=Ge(l,[o],!0)).valid&&(o=u.result)),"value"!=c[s].to?$(c[s].to).first().val(o):r.first().val(o);else if(c[s].fromVar)o=Vt(c[s].fromVar),n[s].tF&&(l=st(window,c[s].tF),(u=Ge(l,[o],!0)).valid&&(o=u.result)),"value"!=c[s].to?$(c[s].to).first().val(o):r.first().val(o);else if(c[s].fromAttr)o=$(this).attr(c[s].fromAttr),c[s].tF&&(l=st(window,c[s].tF),(u=Ge(l,[o],!0)).valid&&(o=u.result)),"value"!=c[s].to?$(c[s].to).first().val(o):r.first().val(o);else{var u;if(o=$(this).text(),c[s].tF)l=st(window,c[s].tF),(u=Ge(l,[o],!0)).valid&&(o=u.result);"value"!=c[s].to?$(c[s].to).first().val(o):r.first().val(o)}}(F.crudop||F.func||F.outfunc)&&Ue(F)(e,$(this)),a.removeClass("open")}}))}else if(!u){var I=De(h.parentEleId),B=(!0===h.diff||h.diff,Fg.getString(Ne.viewer.this.default.ele));if(h.ele&&(B=h.ele),I.length>0){var E=Mt(B,h.container,Fg.getString(Ne.viewer.this.default.style),Fg.getString(Ne.viewer.this.default.class),{id:h.id+"_container"},"",!0);De(h.id+"_container").remove(),h.position&&"append"!=h.position?"clear"==h.position?I.html(E):"prepend"==h.position&&I.prepend(E):I.append(E),s=$("#"+h.id+"_container")}var z=kt(i,v,d);if(s.html(z),(V=x[U])||(V=v),s.length>0){for(j=s.find(".faug-valid-row"),S=0;S<j.length;S++){A=a.details.name+"_inlinearea_"+S,N=a.details.name+"_inlinearea_"+S+"_ttr";$(j[S]).attr("id",N),$(j[S]).attr("faug-data-inlfid",A);D=S;void 0!==(M=$(j[S]).attr("faug-data-rownum"))&&!1!==M?D=M:$(j[S]).attr("faug-data-rownum",S),$(j[S]).attr("faug-data-crudopnm",m),$(j[S]).attr("faug-data-op-col-len",r?r.length:0),$(j[S]).attr("faug-data-schemanm",a.details.name),void 0!==(M=$(j[S]).attr("faug-data-ind-sep"))&&!1!==M&&(R=M),$(j[S]).data("data",st(V,D,R))}s.find(".faug-valid-row-stateful").on("click",(function(e){Faug.setProperty("previousElement",$(e.currentTarget))})),T&&T.paint(void 0,void 0,g)}}}else if(n.func){var V;I=De(h.parentEleId);if(Fg.execFunc(n.func,[v,h.parentEleId]),s=I,(V=x[U])||(V=v),s.length>0){s.data("data",v);for(j=s.find(".faug-valid-row"),S=0;S<j.length;S++){A=a.details.name+"_inlinearea_"+S,N=a.details.name+"_inlinearea_"+S+"_ttr";$(j[S]).attr("id",N),$(j[S]).attr("faug-data-inlfid",A);var M,R;D=S;void 0!==(M=$(j[S]).attr("faug-data-rownum"))&&!1!==M?D=M:$(j[S]).attr("faug-data-rownum",S),$(j[S]).attr("faug-data-crudopnm",m),$(j[S]).attr("faug-data-op-col-len",r?r.length:0),$(j[S]).attr("faug-data-schemanm",a.details.name),void 0!==(M=$(j[S]).attr("faug-data-ind-sep"))&&!1!==M&&(R=M),$(j[S]).data("data",st(V,D,R))}s.find(".faug-valid-row-stateful").on("click",(function(e){Faug.setProperty("previousElement",$(e.currentTarget))})),T&&T.paint(void 0,void 0,g)}}else if(w){var L=w.schema;w.schemaFunc&&(v=Fg.execFunc(w.schemaFunc,[]));var q=v;if(w.dataFunc&&(q=Fg.execFunc(w.dataFunc,[v])),!L&&v)for(var H in L=[],q[0])q[0].hasOwnProperty(H)&&L.push({name:H});if(q&&L&&Fg.is("Array",q)){(I=De(h.parentEleId)).grid&&I.grid.dispose(),I.html("");var J=canvasDatagrid({parentNode:I[0],borderDragBehavior:"move",allowMovingSelection:!0,columnHeaderClickBehavior:"select",allowFreezingRows:!0,allowFreezingColumns:!0,allowRowReordering:!0,tree:!1,debug:!1,showPerformance:!1});J.style.height="800px",J.style.width="100%",J.schema=L,J.data=v,I.grid=J}else{(I=De(h.parentEleId)).html("<p>No data found</p>")}}else if(je("String",e)){(I=De(h.parentEleId)).html(e)}else i&&k&&console.log("No template "+i+" found for "+a.details.name);if(u&&s.hasClass("dropdown")&&v.length>0&&s.addClass("open"),a.details.editForm&&(O=a.details.editForm.showEvent),void 0!==h.editButton&&h.editButton.colNum>0);else if("contextmenu"==O||"click"==O){var W=function(e,t){var a=!0,i=!0,r=void 0,n="Edit",s="Delete";void 0!==t&&(r=tt(t.custom,"","list-group",{},null),t.isedit&&(a=t.isedit),t.isdelete&&(i=t.isdelete),Ie(t.editlabel)||(n=t.editlabel),Ie(t.deletelabel)||(s=t.deletelabel));var o=e+"_actionMenu";De(o).remove();var l='<ul id="'+o+'" class="list-group faug-ctxt-action-menu">';return a&&(l+='<li class="list-group-item" faug-data-ctxt-action="Edit">'+n+"</li>"),i&&(l+='<li class="list-group-item" faug-data-ctxt-action="Delete">'+s+"</li>"),l+="</ul>",$(l).appendTo("body"),r&&(De(o).attr("style",r[0]),De(o).attr("class",r[1])),o}(o,h.custom.actionsArea),X=De(W);void 0!==h.custom.actionsArea&&void 0!==h.custom.actionsArea.custom&&void 0!==h.custom.actionsArea.custom.li&&(void 0===h.custom.actionsArea.custom.li.custom&&(h.custom.actionsArea.custom.li.custom={}),h.custom.actionsArea.custom.li.custom.attrpos="append",sca=tt(h.custom.actionsArea.custom.li.custom,"","list-group-item",{},null),X.children().attr("style",sca[0]),X.children().attr("class",sca[1])),X.attr("data-viewerid",o),s.on(O,".faug-valid-row",function(e){return function(t){t.preventDefault(),e.is(":visible")?e.hide():(De($(this).attr("faug-data-inlfid")+"_tr").hide(),e.css("left",t.pageX),e.css("top",t.pageY),e.show(),e.attr("faug-data-rownum",$(this).attr("faug-data-rownum")),e.attr("faug-data-inlfid",$(this).attr("faug-data-inlfid")),e.attr("faug-data-thistrid",$(this).attr("id"))),t.preventDefault()}}(X)),"contextmenu"==O&&s.on("click",".faug-valid-row",(function(e){De($(this).attr("faug-data-inlfid")+"_tr").hide(),e.preventDefault()})),X.on("click","li",function(e,t){return function(a){t.is(":visible")&&t.hide(),"Edit"==$(this).attr("faug-data-ctxt-action")?Nt(e,De($(this).parent().attr("faug-data-thistrid")),$(this)):"Delete"==$(this).attr("faug-data-ctxt-action")&&At(e,De($(this).parent().attr("faug-data-thistrid")),$(this))}}(a,X))}var G=!1,Y=!1;if(!T&&void 0!==h.isDataTable&&h.isDataTable&&(G=!0),void 0!==h.serverPaginate&&(Y=h.serverPaginate),void 0!==n.serverPaginate&&(Y=n.serverPaginate),s.find(".faug-valid-row").data("viewerid",o),s.parent().find(".faug-edit-button").on("click",function(e){return function(){Nt(e,$(this).closest(".faug-valid-row"),$(this))}}(a)),s.parent().find(".faug-delete-button").on("click",function(e){return function(){At(e,$(this).closest(".faug-valid-row"),$(this))}}(a)),v.length>0&&G){var Q={bDestroy:!0};Y&&(Q.pagingType="simple");var K=Xe(void 0,h.dataTableConfigFunc,[Fg.copy(h),o]);K.valid&&void 0!==K.result&&(Q=K.result),s.dataTable(Q),Y&&0==De(o+"_wrapper").find(".faug-trigger-read-prev-button").length&&(De(o+"_wrapper").find("li.paginate_button.previous").removeClass("disabled"),De(o+"_wrapper").find("li.paginate_button.previous").addClass("faug-trigger-read-prev-button"),De(o+"_wrapper").find("li.paginate_button.next").removeClass("disabled"),De(o+"_wrapper").find("li.paginate_button.previous").addClass("faug-trigger-read-next-button"))}if(Y){var Z=!1!==h.defaultnextprevbuttons;!G&&Z&&s.parent().append(Fg.getString(Ne.viewer.pagination.html));var ee=G?De(o+"_wrapper").find("li.paginate_button.previous"):s.parent().find(".faug-trigger-read-prev-button"),te=G?De(o+"_wrapper").find("li.paginate_button.next"):s.parent().find(".faug-trigger-read-next-button");ee.on("click",function(e,t,i){return function(r){var n=a.crud[t];n.start--,n.start<0?(n.start=0,$(this).attr("disabled","disabled")):Ft({schemaName:e,op:t},i,!0,!0)}}(a.details.name,m,o)),te.on("click",function(e,t,i,r){return function(n){var s=a.crud[t];s.start++,0==s.start&&r.removeAttr("disabled"),Ft({schemaName:e,op:t},i,!0,!0)}}(a.details.name,m,o,ee))}var ae=St(h.callbacks,n.callbacks,"afterDraw");Xe(ae,"afterDraw",[void 0,e,o])}};var xt=this.crudOpCallback;this.refreshSchemaTemplate=function(e,t,a,i,r,n,s){if(u[e]){x[U]=void 0;var o=p[t].apply(null,[{rows:a}]);if(o){var l=De(i);l.html(o);var d=De(r).length>0?De(r):l;if(d.length>0){var c=x[U];c||(c=a);for(var f=d.find(".faug-valid-row"),m=0;m<f.length;m++){var h=e+"_inlinearea_"+m,g=e+"_inlinearea_"+m+"_ttr";$(f[m]).attr("id",g),$(f[m]).attr("faug-data-inlfid",h);var v,y=$(f[m]).attr("faug-data-rownum"),b=m;void 0!==y&&!1!==y?b=y:$(f[m]).attr("faug-data-rownum",m),$(f[m]).attr("faug-data-crudopnm",n),$(f[m]).attr("faug-data-op-col-len",$(f[m]).find("td").length),$(f[m]).attr("faug-data-schemanm",e),void 0!==(y=$(f[m]).attr("faug-data-ind-sep"))&&!1!==y&&(v=y),$(f[m]).data("data",st(c,b,v))}}n&&s&&Xe(u[e].crud[n].callbacks,s,[a])}}};this.refreshSchemaTemplate;function Ot(e,a,i,r,n){p[e]&&!n||(p[e]=4!=r?t.templateEngine(a,i,!0):t.templateEngine(a,i,!0,!0))}this.rst=this.refreshSchemaTemplate,this.getTemplate=function(e,t){if(Fg.is("String",e))return e;if(e.template&&(Fg.isN(e.items)||0==e.items.length)&&(Fg.isN(e.cond)||Re(e.cond,t)))return e.template;var a="";if(Fg.isN(e.cond)||Re(e.cond,t)){for(var i in e.items)t[i]=Fg.getTemplate(e.items[i],t);a=e.template}return Fg.templatize(a,t,!0,null,!1)},this.templatize=function(a,i,r,n,s,o){if(s=!1!==s,r=!1!==r){if(p[a]){if(je("String",p[a]))return t.templateEngine(p[a],i,!0,!0,s).apply(null,[i]);if(je("Function",p[a]))return p[l].apply(null,[i])||""}return t.templateEngine(a,i,!0,!0,s).apply(null,[i])}var l=Fg.isN(o)?a:o;if(n||p[l]||(p[l]=t.templateEngine(a,i,!0,!1,s)),p[l])return p[l].apply(null,[i])||"";n&&e[l]&&Ye(l,function(e,t,a,i){return function(){var r=e[t].apply(null,[a]);i(r)}}(p,l,i,n))};var $t=this.templatize;this.tz=this.templatize,this.templatizeByName=function(e,t,a,i){return kt(e,t,a,i)};this.templatizeByName;this.tzn=this.templatizeByName,this.templatizeSchemaTemplate=function(t,a,i,r){if(p[t]){var n=p[t].apply(null,[{rows:a,options:i}]);return n||""}if(r&&e[t]){if(!r){var s=t,o={rows:null,options:null,row:null},l=0;je("Array",e[t])&&(s=e[t][0],o=e[t][1],l=3==e[t].length?e[t][2]:0);a=$.get(s).then();return X[s]=o?[a,3,o]:[a,l],Ot(s,a,o,o?3:0),new Promise.resolve(a)}Ye(t,function(e,t,a,i,r){return function(){var n=e[t].apply(null,[{rows:a,options:i}]);r(n)}}(p,t,a,i,r))}};var kt=this.templatizeSchemaTemplate;this.tst=this.templatizeSchemaTemplate,this.templatizeSchemaPropOptionTemplate=function(t,a,i){if(p[t])try{var r=p[t].apply(null,[a]);return r||""}catch(e){return console.log(e),""}else i&&e[t]&&Ye(t,function(e,t,a,i){return function(){var r=e[t].apply(null,[a]);i(r)}}(p,t,a,i))};var Tt=this.templatizeSchemaPropOptionTemplate;function St(e,t,a){return e&&e[a]?e:t&&t[a]?t:void 0}function At(e,a,i){var r=A;if(a.attr("faug-crud-name")&&(r=a.attr("faug-crud-name")),void 0!==e.crud[r]){var n=e.crud[r],s=a.data("viewerid"),o=e.details.__viewer[s],l=1*a.attr("faug-data-rownum"),d=c[e.details.name][l],u=(n.url,Fg.getString(Ne.viewer.deleteButton.msg));void 0!==o.deleteButton&&void 0!==o.deleteButton.msg&&""!=o.deleteButton.msg&&(u=$t(o.deleteButton.msg,d,void 0,void 0,!1)),t.getDialogConfirm(u,function(e,t,a,i,r,n){return function(i){if(i){if(e.callbacks&&e.callbacks.beforeOp){var s=Xe(void 0,e.callbacks.beforeOp,[n,e.url,a]);s.valid&&s.result&&(u=s.result)}if(e.callbacks&&e.callbacks.onOp){var o=Xe(void 0,e.callbacks.onOp,[a]);if(o.valid)return Xe(e.callbacks,"afterOp",[void 0,void 0,a,o.result,!0]),!1}var l=t.crud,d=r,c=JSON.stringify(a,void 0,"\t"),u=$t(l[d].url,a,void 0,void 0,!1);Ze(!0,l[d].meth,u,l[d].contentType,c,l[d].headers?Fg.copy(l[d].headers):{},(function(e){Xe(l[d].callbacks,"afterOp",[void 0,void 0,a,e,!0])}),(function(e){Xe(l[d].callbacks,"failure",[a,!1,e])}))}else Xe(e.callbacks,"onCancelDialog",[n,a])}}(n,e,d,0,r,i))}}this.tspot=this.templatizeSchemaPropOptionTemplate;this.alertDialog=function(e,a){t.getDialogAlert(e,a)},this.ad=this.alertDialog;function Nt(e,t,a){Pt(!0);var i=e.details,r=t.attr("faug-data-inlfid"),n=1*t.attr("faug-data-rownum"),s=i.form.id,o=i.form.showReset,l=t.attr("faug-data-op-col-len");if(i.editForm.isInline){De((s=r)+"_tr").remove();var d=s+"_tr",f='<form id="'+s+'" class="form" role="form"></form>',h=t.prop("tagName");"tr"==h.toLowerCase()?De(s+"_ttr").after('<tr id="'+d+'" style="display:none;background-color:#f5f5f5"><td colspan="'+l+'">'+f+"</td></tr>"):De(s+"_ttr").after("<"+h+' id="'+d+'" style="display:none;background-color:#f5f5f5">'+f+"</"+h+">"),De(s+"_tr").show(),o=!1}else if(i.editForm.isModal){De((s=r)+"_tr").remove();d=s+"_tr";jt(f='<div><form id="'+s+'" class="form" role="form"></form></div>',s+"_tr","Edit "+i.name,!0,void 0,!1),De(s+"_tr").modal({show:!0}),De(s+"_tr").show(),o=!1}else!0===i.editForm.create&&i.editForm.form_cont&&Mt("form",i.editForm,"width:95%;","form",{role:"form",id:i.editForm.id},null,!1,!0,!0);!function(e,t,a,i,r){var n;Xe(u[e].details.editForm.callbacks,"beforeDraw",[e]),m[e]=!0,u[e].details.form.custom&&u[e].details.form.custom.properties&&(n=u[e].details.form.custom.properties),u[e].details.editForm.custom&&u[e].details.editForm.custom.properties&&(n=u[e].details.editForm.custom.properties),De(a).html(rt(u[e],u[e].details,u[e],0,"","",[c[e][t]],!1,!0,"",n,0,!1,!1,!0)),De(a).data("data",c[e][t]),Dt(void 0,u[e].details,a),dt(void 0===u[e].details.editForm.submit||void 0===u[e].details.editForm.submit.label?Fg.getString(Ne.form.submitButton.editlabel):u[e].details.editForm.submit.label,u[e],u[e].crud,S,a,i,u[e].details.editForm,r,n),Xe(u[e].details.editForm.callbacks,"afterDraw",[void 0,c[e][t],a]),u[e].details.editForm.callbacks&&u[e].details.editForm.callbacks.transformElements&&Xe(void 0,u[e].details.editForm.callbacks.transformElements,[]).valid,Dt(void 0,u[e].details,u[e].details.editForm.id)}(i.name,n,s,o,t),Pt(!1)}function Ct(e,t,a,i,r){if(t&&t.op){var n=a[1],s=u[t.schemaName].crud[t.op];if(!s)return!1;var o=n?n.closest(".faug-valid-row"):$(""),l=a[0],d=void 0,f=s.viewerId;if(!f&&t.viewerId&&(f=t.viewerId),n&&n.find(f).length>0&&(d=n.find(f)),n&&"next-relative"==t.viewerPos&&n.next().length>0&&n.next().find(f).length>0?d=n.next().find(f).first():n&&"prev-relative"==t.viewerPos&&n.next().length>0&&n.prev().find(f).length>0?d=n.prev().find(f).first():n&&"relative"==t.viewerPos&&n.find(f).length>0?d=n.find(f).first():"absolute"==t.viewerPos&&$(f).length>0&&(d=$(f).first()),!f&&u[t.schemaName].details&&u[t.schemaName].details.viewer&&u[t.schemaName].details.viewer[0]&&(f=u[t.schemaName].details.viewer[0].id),!Ie(t)&&!0===t.related&&o.length>0){var m=o.attr("faug-data-schemanm"),h=1*o.attr("faug-data-rownum"),g=c[m][h];if(s.inline){f=o.attr("faug-data-inlfid");var p=o.attr("faug-data-op-col-len"),v=f+"_tr";De(v).remove();var y=o.prop("tagName"),b={callbacks:{},custom:{}};t.viewer&&(b=t.viewer);var _=Mt("table",b,"width:100%;","table table-striped table-bordered table-hover",{id:f},null,!0,!1,!1,"div");"tr"==y.toLowerCase()?o.after('<tr id="'+v+'" style="background-color:#f5f5f5"><td colspan="'+p+'">'+_+"</td></tr>"):o.after("<"+y+' id="'+v+'" style="background-color:#f5f5f5">'+_+"</"+y+">"),u[t.schemaName].details.__viewer[f]=b}if(f)return l&&l.stopPropagation(),Ft(t,f,!0,!0,g,!1,d),!1}else if(!Ie(t)){if(l&&l.stopPropagation(),!0!==s.showdropdownmenu){b={callbacks:{},custom:{}};u[t.schemaName].details.__viewer[f]||(t.viewer&&(b=t.viewer),u[t.schemaName].details.__viewer[f]=b),Ft(t,f,!0,!0,null,!1,d)}else{f="dd_"+t.schemaName+"_"+t.op,De(f).length>0&&De(f).remove();b={callbacks:{},custom:{}};t.viewer&&(b=t.viewer),u[t.schemaName].details.__viewer[f]=b,i=Ie(i)?'" faug-data-ddtrgcls="'+r+'"':'" faug-data-ddtrgid="'+i+'"';var w=$('<div class="dropdown" id="'+f+i+"></div>");n.after(w),w.css({position:"absolute",bottom:0}),Ft(t,f,!0,!0,null,!0,void 0)}return!1}}}this.confirmDialog=function(e,a){t.getDialogConfirm(e,a)},this.cd=this.confirmDialog,this.freezeUI=function(e,t){if(t||(t=E),0==De(t).length){var a=z;if(z||!(a=window.freezeLoaderHtml)&&Ne.freezeLoaderHtml&&(a=Fg.getString(Ne.freezeLoaderHtml)),window.freezeUiContainer)var i=Fg.templatize(window.freezeUiContainer,{freezeLoaderHtml:a},!0,void 0,!1);else if(Fg.isN(Ne.freezeUiContainer))i='<div style="z-index: 1000; border: none; margin: 0px; padding: 0px; width: 100%; \t\t\t\t\theight: 100%; top: 0px; left: 0px; cursor: wait; position: fixed; opacity: 0.323537741574588; \t\t\t\t\t"></div><div style="z-index: 1011; position: fixed; padding: 0px; margin: 0px; \t\t\t\t\twidth: 30%; top: 40%; left: 35%; text-align: center; cursor: wait; opacity: 0.539229547863922;">'+a+"</div>";else var i=Fg.templatize(Fg.getString(Ne.freezeUiContainer),{freezeLoaderHtml:a},!0,void 0,!1);$('<div id="'+E+'">'+i+"</div>").appendTo("body")}var r=De(t);e?(r.is(":visible")||r.show(),V++):--V<=0&&(V=0,r.hide())};var Pt=this.freezeUI;this.fz=this.freezeUI,this.unFreezeUI=function(e){e||(e=E);var t=De(e);V=0,t.hide()},this.freezeUIFor=function(e){isNaN(e)||e<100||(Fg.freezeUI(!0),setTimeout((function(){Fg.freezeUI(!1)}),e))},this.fzf=this.freezeUIFor,this.showModalForm=function(e,t,a,i,r,n,s,o,l){void 0===s&&(s="75%"),void 0===o&&(o="300px;"),this.isN(s)||(s="width: "+s+";"),this.isN(o)||(o="height: "+o+";");var d="";this.isN(a)||(d+=a),i&&(d+='<button type="button" class="close" data-dismiss="modal">&times;</button>'),""!=d&&(d='<div class="modal-header">'+d+"</div>");var c="";n&&(c='<div class="modal-footer">'+(this.isN(r)?"":r)+"</div>"),this.byId(t).remove(),$("body").append('<div id="'+t+'" class="modal fade" role="dialog"> \t\t\t\t<div class="modal-dialog" style="'+s+o+';"> \t\t\t\t<div class="modal-content"> \t\t\t\t'+d+' \t\t\t\t<div class="modal-body clearfix">'+e+"</div> \t\t\t\t"+c+" \t\t\t\t</div> \t\t\t\t</div> \t\t\t\t</div>"),l&&function(e){e.css("display","block");var t=e.find(".modal-dialog"),a=($(window).height()-t.height())/2,i=parseInt(t.css("marginBottom"),10);a<i&&(a=i),t.css("margin-top",a)}(this.byId(t))};var jt=this.showModalForm;function Dt(e,t,a,i,r,n){for(var s in r=r||!1,a&&Fg.byId(a).length>0&&(Fg.byId(a).find(".faug-comp-add-button,.faug-comp-remove-button").off("click.addrem").on("click.addrem",(function(e){return Faug.plusminuslistfunc(e,t.name,$(this)[0],$(this).hasClass("faug-comp-add-button"))})),Fg.byId(a).find(".faug-comp-max-button,.faug-comp-min-button").off("click.maxmin").on("click.maxmin",(function(e){var a=$(this).attr("cntid").replace(/\\'/g,"'"),i=$(this).attr("schnm").replace(/\\'/g,"'");return Faug.showHideGroupedEntity(e,$(this)[0],a,i,t.name)})),Fg.byId(a).find(".faug-load-more").off("click.more").on("click.more",(function(e){return Faug.plusminuslistfuncLoadMore(e,t.name,$(this)[0],!1)}))),h[t.name])if(h[t.name].hasOwnProperty(s)&&(void 0===e||0!=!s.indexOf(e))&&(void 0===i||i==s)){var o=h[t.name][s],l=[];for(var d in o)if(o.hasOwnProperty(d)){var c=o[d],f=d.split(","),m=!1;"defaultOnce"in o&&(m=!0);for(var g=0;g<f.length;g++)if("trigger"==f[g]){var p=u[t.name];p.__namedCallbacks&&Xe(p.__namedCallbacks,c,void 0,!1)}else if("defaultOnce"!=f[g]||r){if("default"==f[g]&&(!r&&!m||r&&m))zt(void 0,$(document.getElementsByName(s)[0]),c,s,a,t.name);else if("defaultOnce"!=f[g]&&"default"!=f[g]){var v=document.getElementsByName(s),y=f[g]+"."+g;$(v).off(y),$(v).on(y,function(e,t,a,i,r){return function(a){Fg.isN($(this).attr("name"))||t==$(this).attr("name")||(t=$(this).attr("name")),zt(a,$(this),e,t,i,r)}}(c,s,f[g],a,t.name))}}else l.push(d),zt(void 0,$(document.getElementsByName(s)[0]),c,s,a,t.name)}for(g=0;g<l.length;g++)delete o[l[g]]}}function It(e,t,a){t=(""+t).split(a=void 0===a?".":a);for(var i=0;i<t.length;i++)e.properties&&e.properties[t[i]]?e=e.properties[t[i]]:e.items&&e.items.properties&&e.items.properties[t[i]]&&(e=e.items.properties[t[i]]);return e}function Bt(e,t,a,i,r,n,s,o,l){var d=e;t.storeAs&&(f[t.storeAs]=e);var c=t.target,m=null;c?(i!=r&&(c=i+"['"+t.target+"']"),a=$(document.getElementsByName(c)[0])):c=r;var h=u[s];if(a&&a.length>0&&"select"==a.prop("tagName").toLowerCase()){var g=!1;if(m=Fg.ueh(a.parent().attr("acvalue"))){var p=m.substring(0,4);m=m.substring(4),"jsn@"==p?m=JSON.parse(m):"ind@"==p&&!isNaN(m)&&!Ie(e)&&e.length>0&&(m=e[Number(m)])}g="true"===a.parent().attr("faug-read-only"),d="",Ie(m)&&!Ie(e)&&e.length;var v=c.substring(c.indexOf("[")+2).replace(/\['/g,".properties.").replace(/'\]/g,"").replace(/(\[[0-9]*\])/g,"");T=It(T=u[s],v),!m&&!isNaN(T.defaultIndex)&&!Ie(e)&&e.length>T.defaultIndex&&(m=e[T.defaultIndex]);var y={};for(var b in T.vars){if(T.vars.hasOwnProperty(b))(O=ze(T.vars[b],a))[0]&&(y[b]=O[1])}var _={isTransient:!0===T.transient||"true"===T.transient,elName:c,rows:e,selectedVal:m,details:h.details,vars:y};if(g)d=m;else if(T.optionTemplate)d=$t(T.optionTemplate,_,!1);else if(T.genericOptionTemplateFile)d=Tt(T.genericOptionTemplateFile,_);else if(T.optionTemplateFile)d=Tt(T.optionTemplateFile,_);else if(!Ie(e))if(je("Array",e))for(var w=0;w<e.length;w++){var F=1==e[w].length?e[w][0]:e[w][1],x=e[w][0]==m?"selected":"";d+='<option value="'+e[w][0]+'" '+x+">"+Fg.eh(F)+"</option>"}else for(var O in e){F=e[O];d+='<option value="'+O+'" '+(x=O==m?"selected":"")+">"+Fg.eh(F)+"</option>"}if(a.html(d),m&&""!=m||(a.val(a.find("option:first").val()),a.find("option:first").attr("selected",!0)),Dt(void 0,h.details,n,c,!0),void 0!==t.done)zt(o,a,t.done,r,n,s)}else{var k=De(c+"_cont");if((g="true"===k.attr("faug-read-only"))||a.length>0&&(a.remove(),a=void 0),(g||void 0===a||0==a.length)&&k.length>0){if(m=Fg.ueh(k.attr("acvalue"))){p=m.substring(0,4);m=m.substring(4),"jsn@"==p?m=JSON.parse(m):"ind@"==p&&!isNaN(m)&&!Ie(e)&&e.length>0&&(m=e[Number(m)])}var T;k.attr("ffead-pth"),v=c.substring(c.indexOf("[")+2).replace(/\['/g,".properties.").replace(/'\]/g,"").replace(/(\[[0-9]*\])/g,""),(T=It(T=u[s],v)).enum;!m&&!isNaN(T.defaultIndex)&&!Ie(e)&&e.length>T.defaultIndex&&(m=e[T.defaultIndex]);y={};for(var b in T.vars){if(T.vars.hasOwnProperty(b))(O=ze(T.vars[b],a))[0]&&(y[b]=O[1])}_={isTransient:!0===T.transient||"true"===T.transient,elName:c,rows:e,selectedVal:m,details:h.details,vars:y};var S,A=!1;if(g)Fg.byName(c).html(m);else if(T.optionTemplate)d=$t(T.optionTemplate,{isTransient:!0===T.transient||"true"===T.transient,elName:c,rows:e,selectedVal:m,details:h.details,vars:y},!1);else if(T.genericOptionTemplateFile)d=Tt(T.genericOptionTemplateFile,_);else if(T.optionTemplateFile)d=Tt(T.optionTemplateFile,_);else{var N;A=!0,(N=jQuery.extend(!0,{},T)).events&&N.events.default&&(N.events.default=void 0),N.enum=e,d=rt(T,h.details,N,0,c,[{}],[m],!1,!0,t.target,void 0)}if(!g)if(""!=d)if(A)k.replaceWith(d);else(N=jQuery.extend(!0,{},T)).elementHtml=d,delete N.enum,S=u[s].details.form.custom.properties,d=rt(T,h.details,N,0,c,[{}],[m],!1,!0,t.target,S),k.html($(d).html());if(Dt(void 0,h.details,n,c,!0),void 0!==t.done)zt(o,a=$(document.getElementsByName(c)[0]),t.done,r,n,s)}else{if(a.val(d),void 0!==t.done)zt(o,a,t.done,r,n,s)}}}this.sm=this.showModalForm;var Et=[];function zt(e,t,a,i,r,n){for(var s=0;s<a.length;s++)if(a[s]){if("function"==typeof a[s])return void a[s](t,e);var o=void 0===a[s].show?[]:a[s].show,l=void 0===a[s].hide?[]:a[s].hide,d=void 0===a[s].values?[]:a[s].values,c=void 0===a[s].how?"display":a[s].how,f=a[s].from;if(o.length>0){-1!=(y=j=i).indexOf("[")&&"."==(y=y.substring(y.indexOf("[")).replace(/'/g,"").replace(/\[/g,"").replace(/\]/g,"."))[y.length-1]&&(y=y.substring(0,y.length-1));var m=$(document.getElementsByName(j)),h=t.val();if(m.length>1&&(h=st(De(r).serializeObject(n),y)),f&&f.length>1)!0===(b=ze(f,t))[0]&&(h=b[1]);else void 0===h&&Fg.byId(j+"_cont").length>0&&(h=Fg.getActualValue(Fg.byId(j+"_cont"),!0));for(var g=0;g<o.length;g++){var p=m.attr("name")+"_cont";w=-1==(w=Fg.byId(p).attr("ffead-pth")).indexOf(".")?"":w.substring(0,w.lastIndexOf(".")+1);var v=$("div[ffead-pth='"+w+o[g]+"']");if((F=$("div[ffead-pth='"+o[g]+"']")).length>0?_=F.attr("id"):v.length>0&&(_=v.attr("id")),_)if(-1!==$.inArray(h,d))Ie(c)||"display"==c?De(_).show():De(_).removeClass(c),(x=De(_).find("input[_faug-tmp-req],select[_faug-tmp-req],textarea[_faug-tmp-req]")).attr("required",!0),x.removeAttr("_faug-tmp-req");else Ie(c)||"display"==c?De(_).hide():De(_).addClass(c),(x=De(_).find("input[required],select[required],textarea[required]")).attr("_faug-tmp-req",!0),x.removeAttr("required")}}if(l.length>0){var y;-1!=(y=j=i).indexOf("[")&&"."==(y=y.substring(y.indexOf("[")).replace(/'/g,"").replace(/\[/g,"").replace(/\]/g,"."))[y.length-1]&&(y=y.substring(0,y.length-1));var b;m=$(document.getElementsByName(j)),h=t.val();if(m.length>1&&(h=st(De(r).serializeObject(n),y)),f&&f.length>1)!0===(b=ze(f,t))[0]&&(h=b[1]);else void 0===h&&Fg.byId(j+"_cont").length>0&&(h=Fg.getActualValue(Fg.byId(j+"_cont"),!0));for(g=0;g<l.length;g++){var _,w;p=m.attr("name")+"_cont";w=-1==(w=Fg.byId(p).attr("ffead-pth")).indexOf(".")?"":w.substring(0,w.lastIndexOf(".")+1);var F,x;v=$("div[ffead-pth='"+w+l[g]+"']");if((F=$("div[ffead-pth='"+l[g]+"']")).length>0?_=F.attr("id"):v.length>0&&(_=v.attr("id")),_)if(-1!==$.inArray(h,d))Ie(c)||"display"==c?De(_).hide():De(_).addClass(c),(x=De(_).find("input[required],select[required],textarea[required]")).attr("_faug-tmp-req",!0),x.removeAttr("required");else Ie(c)||"display"==c?De(_).show():De(_).removeClass(c),(x=De(_).find("input[_faug-tmp-req],select[_faug-tmp-req],textarea[_faug-tmp-req]")).attr("required",!0),x.removeAttr("_faug-tmp-req")}}var O=void 0===a[s].type?null:a[s].type;if("ajax"==O){function T(e,t,a,i,r,n,s){if(a[s].cond&&Fg.is("Array",a[s].cond)&&a[s].cond.length>0&&!Re(a[s].cond,i)){void 0!==a[s].done&&zt(e,t,a[s].done,nele,r,n)}else{var o,l=i;-1!=i.indexOf("[")?(l=i.substring(0,i.lastIndexOf("[")),o=De(l+"_cont").serializeObject(l)):o=De(r).serializeObject(n);var d=u[n];if(!0===d.details.__ishelper&&d.details.initObject){var c;if(je("String",d.details.initObject)){var f=Ge(d.details.initObject);f.valid&&(c=f.result)}else c=d.details.initObject;o=wt(c,o,!1)}if(a[s].udvars)for(var m in a[s].udvars)if(a[s].udvars.hasOwnProperty(m)){var h=ze(a[s].udvars[m],t);h[0]&&void 0===o[m]&&(o[m]=h[1])}var g=$t(a[s].url,o,void 0,void 0,!1),p="";cont=a[s].content,"GET"!=a[s].meth&&cont?(cont=$t(cont,o,void 0,void 0,!1),p="application/json"):"GET"!=a[s].meth&&(o=De(r).serializeObject(n,!0),cont=JSON.stringify(o,void 0,"\t"),p="application/json");var v=Fg.isN(a[s].freezeUi)||!0===a[s].freezeUi||"true"===a[s].freezeUi;et(v,a[s].meth,g,p,cont,a[s].headers?Fg.copy(a[s].headers):{},a[s].cachedTime).done(function(e,t,a,i,r,n,s,o){return function(o){Bt(o,e,t,a,i,r,n,s)}}(a[s],t,l,i,r,n,e,cont)).fail((function(e){k&&alert("Cannot fetch data elements")}))}}Fg.is("String",a[s].id)&&""!=a[s].id.trim()?-1==Et.indexOf(a[s].id.trim())&&(Et.push(a[s].id.trim()),setTimeout(function(e,t,a,i,r,n,s,o){var l=Et.indexOf(i[o].id.trim());return-1!==l&&Et.splice(l,1),function(){e(t,a,i,r,n,s,o)}}(T,e,t,a,i,r,n,s),50)):T(e,t,a,i,r,n,s)}else if("func"==O){var S=void 0===a[s].func?null:a[s].func,A=void 0===a[s].fromVar?null:a[s].fromVar;if(A)P=Vt(A);else{var N,C=window[S],P=null,j=i;-1!=i.indexOf("[")?(j=i.substring(0,i.lastIndexOf("[")),N=De(j+"_cont").serializeObject(j)):N=De(r).serializeObject(n),P="function"==typeof C?C([t,N]):C}Bt(P,a[s],t,j,i,r,n,e)}else if("full"==O){if(Ue(a[s])(e,t),void 0!==a[s].done)zt(e,t,a[s].done,i,r,n)}}}function Vt(e){return e?e in x?Fg.g(e):e in re?re[e]:e in f?f[e]:void 0:_t(x,re,f)}function Mt(e,t,a,i,r,n,s,o,l,d,c,u){var f="";if(Ie(t)||Ie(t.custom)||void 0===t.custom.html){null==a&&(a=""),null==i&&(i=""),null==r&&(r={}),null==n&&(n="");var m=e,h=tt(t?t.custom:null,a,i,r,m);a=h[0],i=h[1],r=h[2],m=h[3],f="<"+(e=Be(m,e))+' style="'+a+'" class="'+i+'" '+r+">"+n+"</"+e+">";var g=void 0;Ie(t)||Ie(t.custom)||(g=t.custom.parent),g&&(f=Mt(g.el?"div":g.el,g||null,"","",{},f,!0))}else f=t.custom.html;if(void 0!==d&&""!=d&&null!==d&&(u||(u=""),f="<"+d+" "+u+">"+f+"</"+d+">"),s)return f;if(t.hasOwnProperty("create")&&t.create){De(t.id).remove();var p=t.position,v=De(t.parentEleId);if(je("String",c)&&(c=De(c)),null!=c&&c.length>0&&(v=c),v.length>0)"prepend"==p?v.prepend(f):l&&"clear"==p?v.html(f):v.append(f);else if(o&&t.isModal){var y=t.id+"_mdct";De(t.id).remove(),De(y).remove(),jt(f,y,t.header,!0,void 0,!1)}}}function Rt(e,t,a,i,r,n){var s=w[a],o=document.getElementById(a+"_cont"),l=1*$(o).attr("faug-curr-size");if(i||0!=l){if(!i){if(e&&e.attr("ffead-el-link")){var d=1*Fg.byId(e.attr("ffead-el-link")).parent().attr("data-pos"),c=e.attr("ffead-el-link");c=c.substr(0,c.lastIndexOf("[")),Fg.byId(e.attr("ffead-el-link")).parent().remove(),0==l&&(l=1),$(o).attr("faug-curr-size",l-1);for(var u=d+1;u<l;u++){var f=c+"["+u+"]",m=c+"["+(u-1)+"]";Fg.byId(c+"_cont").find('[id^="'+$.escapeSelector(f)+'"]').each((function(){var e=$(this).attr("id").replace(f,m);$(this).attr("id",e)})),Fg.byId(c+"_cont").find('[name^="'+$.escapeSelector(f)+'"]').each((function(){var e=$(this).attr("name").replace(f,m);$(this).attr("name",e)})),Fg.byId(m+"_cont").parent().attr("data-pos",u-1)}return}if(s.minitems&&1*s.minitems==l)return;var h=$(o).find(".faug-cont")[0].childNodes[$(o).find(".faug-cont")[0].childNodes.length-1];return h.remove(),0==l&&(l=1),$(o).attr("faug-curr-size",l-1),h}if(!s.maxitems||1*s.maxitems!=l){var g=l,p=a+"["+g+"]",v=null!=w[a].isSpan&&w[a].isSpan,y=null==w[a].nolabel||!w[a].nolabel,b=rt(w[a],t,w[a],-1,p,{},[r],v,y,"",n),_=Fg.getString(Ne.form.array.this.container.ele),F=Fg.getString(Ne.form.array.this.container.style),x=Fg.getString(Ne.form.array.this.container.class),O=Fg.copy(Ne.form.array.this.container.attrs),k=tt(w[a].custom.container,F,x,O);F=k[0],x=k[1],O=k[2];var T="";if("object"==s.type&&(void 0===s.showMinMax||s.showMinMax)){var S="",A="",N="display:none;",C="faug-comp-min-state faug-comp-min-button",P="faug-comp-min-state",j="div";if(!0===s.itemrembutton){void 0===s.custom.remButton&&(s.custom.remButton={}),void 0===s.custom.remButton.custom&&(s.custom.remButton.custom={}),s.custom.remButton.custom.attrpos="append";var D="Remove";s.custom.remButton.text&&(D=s.custom.remButton.text),s.custom.remButton.html&&(D=s.custom.remButton.html),A=at(Ne.form.array.this.header.remButton.ele+"",void 0,void 0,void 0,[Fg.getString(Ne.form.array.this.header.remButton.style),Fg.getString(Ne.form.array.this.header.remButton.class)+" faug-comp-remove-button",{type:"button",list_value_cls:a,"ffead-el-link":p+"_cont"}],s.custom.remButton,D,n,!1,!1,null,!1,null,!0)}if(r){if(s.summaryTemplate){var I=!(!Ie(s.summaryTemplateDynamic)&&!0!==s.summaryTemplateDynamic);S+=$t(s.summaryTemplate,r,I)}else if(s.summaryTemplateFunc){var B=Ge(s.summaryTemplateFunc,[r]);B.valid&&(S+=B.result)}if(""==S)for(var E in s.properties)if(s.properties.hasOwnProperty(E)){var z=E;null!=z&&(z=z.substring(0,1).toUpperCase()+z.substring(1)),s.properties[E].hasOwnProperty("display")&&(z=s.properties[E].display),S=z+": "+r[E];break}void 0!==s.editMinimize&&s.editMinimize&&(N="",C="faug-comp-max-state faug-comp-max-button",P="faug-comp-max-state")}if(!1===s.nominmaxbutton){j=Fg.getString(Ne.form.array.this.header.ele),void 0!==s.custom&&(j=s.custom.el),null!=j&&""!==j||(j="div");var V=Mt(Fg.getString(Ne.form.array.this.header.minlabel.ele),s.custom.minlabel,N,null,null,S,!0,!1,!1,null,null);void 0===s.custom.minmaxbutton&&(s.custom.minmaxbutton={}),void 0===s.custom.minmaxbutton.custom&&(s.custom.minmaxbutton.custom={}),s.custom.minmaxbutton.custom.attrpos="append";var M=Wt(a+"["+g+"]","'"),R=Wt(a,"'"),L={};L["faug-comp-min-state"]=s.custom.minmaxbutton.custom["faug-comp-min-state"],L["faug-comp-max-state"]=s.custom.minmaxbutton.custom["faug-comp-max-state"],L["faug-comp-min-state"]||(L["faug-comp-min-state"]="-"),L["faug-comp-max-state"]||(L["faug-comp-max-state"]="+"),L.cntid=M,L.schnm=R,L.type="button",A+=V+=Mt(Fg.getString(Ne.form.array.this.header.minmaxButton.ele),s.custom.minmaxbutton,Fg.getString(Ne.form.array.this.header.minmaxButton.style),C,L,L[P],!0)}T+=Mt(j,s.custom,null,"clearfix",null,A,!0,!1,!1,null,null)}O+=' data-pos="'+l+'"';var U=$("<"+_+' class="'+x+'" style="'+F+'" '+O+">");return U.html(T+b),$(o).attr("faug-curr-size",l+1),U}}}this.setScopedVar=function(e){x[U]=e},this.sscv=this.setScopedVar,this.setActualValue=function(e,t,a){var i="str@"+t;je("Array",t)&&t.length>1&&(i="jsn@"+Wt(JSON.stringify(t))),(e=!0===a?e:e.parent()).attr("acvalue",Fg.eh(i))},this.getActualValue=function(e,t){e=!0===t?e:e.parent();var a=Fg.ueh(e.attr("acvalue"));if(a){var i=a.substring(0,4);return a=a.substring(4),"jsn@"==i&&(a=JSON.parse(a)),a}},this.addGlobalVar=function(e,t,a){e in x&&void 0!==a&&!0!==a||(x[e]=t,e+"_write"in O&&O[e+"_write"](x[e]))},this.ag=this.addGlobalVar,this.addGlobalReadIntercept=function(e,t){e+"_read"in O||"function"!=typeof t||(O[e+"_read"]=t)},this.addGlobalWriteIntercept=function(e,t){e+"_write"in O||"function"!=typeof t||(O[e+"_write"]=t)},this.getGlobalVar=function(e){return e+"_read"in O&&O[e+"_read"](x[e]),x[e]},this.g=this.getGlobalVar,this.existsGlobalVar=function(e){return x.hasOwnProperty(e)},this.eg=this.existsGlobalVar,this.deleteGlobalVar=function(e){delete x[e]},this.dg=this.deleteGlobalVar,this.addVar=function(e,t,a){e in re&&void 0!==a&&!0!==a||(re[e]=t)},this.av=this.addVar,this.getVar=function(e){return e in re?re[e]:x[e]},this.v=this.getVar,this.deleteVar=function(e){delete re[e]},this.dv=this.deleteVar,this.getStoreVar=function(e){return f[e]},this.gstv=this.getStoreVar,this.addStoreVar=function(e,t,a){f[e]&&void 0!==a&&!0!==a||(f[e]=t)},this.astv=this.addStoreVar,this.getSchema=function(e){return this.copy(u[e])},this.gs=this.getSchema,this.getNodeValue=function(e,t){var a=t.split(".");t="";for(var i=0;i<a.length;i++)t+="['"+a[i]+"']";var r=$(document.getElementsByName(e+t));if(r.length>0){var n=r.first().val();if(r.attr("faug-serialize-position")){var s=r.attr("faug-serialize-position");"text"==s?n=r.text():"html"==s?n=r.html():"value"!=s&&(n=r.attr(s));var o=r.attr("faug-serialize-function");if(o&&""!==o.trim()){var l=Ge(o,[n,r]);l.valid&&(n=l.result)}}return n}return null},this.gnv=this.getNodeValue,this.setNodeValue=function(e,t,a){var i=t.split(".");t="";for(var r=0;r<i.length;r++)t+="['"+i[r]+"']";var n=$(document.getElementsByName(e+t));if(n.length>0&&n.attr("faug-serialize-position")){var s=n.attr("faug-serialize-position");"text"==s?n.first().text(a):"html"==s?n.first().html(a):"value"==s?n.first().val(a):"function"!=s&&n.first().attr(s,a)}return null},this.snv=this.setNodeValue,this.showNode=function(e,t){var a=t.split(".");t="";for(var i=0;i<a.length;i++)t+="['"+a[i]+"']";var r=$(document.getElementsByName(e+t+"_cont"));if(r.length>0)return r.show()},this.shn=this.showNode,this.hideNode=function(e,t){var a=t.split(".");t="";for(var i=0;i<a.length;i++)t+="['"+a[i]+"']";var r=$(document.getElementsByName(e+t+"_cont"));if(r.length>0)return r.hide()},this.hdn=this.hideNode,this.getNode=function(e,t){var a=t.split(".");t="";for(var i=0;i<a.length;i++)t+="['"+a[i]+"']";return $(document.getElementsByName(e+t))},this.gn=this.getNode,this.getNodeContainer=function(e,t){var a=t.split(".");t="";for(var i=0;i<a.length;i++)t+="['"+a[i]+"']";return $(document.getElementsByName(e+t+"_cont"))},this.gnc=this.getNodeContainer,this.getFormContainer=function(e){return $(document.getElementById(e+"_cont"))},this.gfc=this.getFormContainer,this.getForm=function(e){if(u[e]&&u[e].details&&u[e].details.form)return Fg.byId(u[e].details.form.id)},this.gf=this.getForm,this.formBind=function(e){if(u[e]&&u[e].details&&u[e].details.form&&"function"==typeof FgBind)return Fg.byId(u[e].details.form.id).data("fg-bind")},this.fd=this.formData,this.formData=function(e){if(u[e]&&u[e].details&&u[e].details.form)return Fg.byId(u[e].details.form.id).serializeObject(e)},this.fd=this.formData,this.formSerialize=function(e){if(u[e]&&u[e].details&&u[e].details.form)return Fg.byId(u[e].details.form.id).serializeObject(e)},this.fs=this.formSerialize,this.o=function(e){var t={form:function(){return Fg.gf(e)},data:function(){return Fg.fd(e)},bind:function(){return Fg.fb(e)},formContainer:function(){return Fg.gfc(e)},serialize:function(){return Fg.fs(e)},property:function(t){var a=Fg.getNode(e,t),i={get:function(){return a},change:function(e,t){a.val(e),t=Fg.isN(t)?"change":t,a.trigger(t)},val:function(e){if(void 0===e){var t;if(a.length>1)for(var i=0;i<a.length;i++){var r=$(a[i]);if("radio"==r.attr("type"))a[i].checked&&(t=r);else{var n=a.val();r.val()==n&&(t=r)}}else t=a;var s=t.val();if(t.attr("faug-serialize-position")){var o=t.attr("faug-serialize-position");"text"==o?s=t.text():"html"==o?s=t.html():"value"!=o&&(s=t.attr(o));var l=t.attr("faug-serialize-function");if(l&&""!==l.trim()){var d=Fg.execFunc(l,[s,t]);d.valid&&(s=d.result)}}return s}a.val(e)},text:function(){if(!(a.length>1))return""==(i=a.text())&&""!=a.parent().text()?a.parent().text():i;for(var e=0;e<a.length;e++){var t=$(a[e]);if("radio"==t.attr("type")){if(a[e].checked)return""==(i=t.text())&&""!=t.parent().text()?t.parent().text():i}else{var i,r=a.val();if(t.val()==r)return i=t.text()}}}};return i.g=i.get,i.c=i.change,i.v=i.val,i.t=i.text,i}};return t.f=t.form,t.fd=t.data,t.fb=t.bind,t.f=t.form,t.fc=t.formContainer,t.p=t.property,t.s=t.serialize,t},this.clearSchemaActivityArea=function(e,t,a){Ie(t)&&(t=!0),Ie(a)&&(a=!0);var i=u[e];if(null!=i){if(void 0!==i.details.form&&t){var r=i.details.form.id;De(r).hide()}if(a&&!Ie(i.details.viewer)&&0!=i.details.viewer.length)for(var n=0;n<i.details.viewer.length;n++){var s=i.details.viewer[n];0!=De(s.id).length&&$.fn.DataTable.fnIsDataTable(De(s.id))?(De(s.id).dataTable().fnDestroy(),De(s.id).off(),De(s.id).empty(),De(s.id).parent().hide()):De(s.id).length>0&&(De(s.id).empty(),De(s.id).parent().hide())}}},this.plusminuslistfuncLoadMore=function(e,t,a){if("a"==a.nodeName.toLowerCase()||"button"==a.nodeName.toLowerCase()){var i=$(document.getElementById(a.getAttribute("list_value_cls")+"_cont")),r=a.getAttribute("list_value_cls"),n=r,s=1*i.attr("faug-tot-size"),o=1*i.attr("faug-curr-size"),l=i.attr("faug-offset");"."==(n=(n=(n=(n=n.replace(t,"")).replace(/\[/g,"")).replace(/\]/g,".")).replace(/'/g,"")).charAt(n.length-1)&&(n=n.substr(0,n.length-1));var d=F[r];if(o<d.length){var c=1*o+1*l;c>d.length&&(c=d.length);for(var f=o;f<c;f++){var m;u[t].details.form.custom&&u[t].details.form.custom.properties&&(m=u[t].details.form.custom.properties),Rt(void 0,u[t].details,r,!0,d[f],m).insertBefore(a);var h=o;Dt(a.getAttribute("list_value_cls")+"["+h+"]",u[t].details)}Dt(a.getAttribute("list_value_cls")+"["+c-1+"]",u[t].details,a.getAttribute("list_value_cls")+"_cont"),c==s?(a.setAttribute("current",c),i.attr("faug-curr-size",c),$(a).remove()):(a.setAttribute("current",c),i.attr("faug-curr-size",c))}}return e.preventDefault(),!1},this.pmlflm=this.plusminuslistfuncLoadMore,this.plusminuslistfunc=function(e,t,a,i){if("a"==a.nodeName.toLowerCase()||"button"==a.nodeName.toLowerCase()){var r=$(document.getElementById(a.getAttribute("list_value_cls")+"_cont")),n=a.getAttribute("list_value_cls"),s=w[n];if(s.callbacks&&s.callbacks.isAddRemove)if((c=Fg.execFunc(s.callbacks.isAddRemove,[i,t])).valid&&!1===c.result)return!1;var o,l=1*r.attr("faug-curr-size");u[t].details.form.custom&&u[t].details.form.custom.properties&&(o=u[t].details.form.custom.properties);var d=null;if(i&&s.callbacks)if(s.callbacks.initDataGvar&&Fg.g(s.callbacks.initDataGvar))d=Fg.g(s.callbacks.initDataGvar);else if(s.callbacks.initData){var c;(c=Fg.execFunc(s.callbacks.initData,[])).valid&&c.result&&(d=c.result)}var f=Rt($(e.currentTarget),u[t].details,n,i,d,o);if(i){$(document.getElementById(n+"_cont")).find(".faug-cont").eq(0).append(f);var m=l;Fg.execCallBack(s.callbacks,"addItem",[!0,f]),Dt(a.getAttribute("list_value_cls")+"["+m+"]",u[t].details,a.getAttribute("list_value_cls")+"_cont")}else{m=l;Fg.execCallBack(s.callbacks,"removeItem",[!1,f]),Dt(a.getAttribute("list_value_cls")+"["+m+"]",u[t].details,a.getAttribute("list_value_cls")+"_cont")}}return e.preventDefault(),!1},this.pmlf=this.plusminuslistfunc,this.getPropValue=function(e,t){var a=e.serializeObject();return-1!=t.indexOf("[")&&(t=t.replace(/\[/g,".").replace(/\]/g,"").replace(/'/g,"")),st(a,t)};var Lt=this.getPropValue;this.validateElement=function(e,t,a,i){if(!a&&u[e]&&u[e].details&&u[e].details.form&&(a=Fg.byId(u[e].details.form.id)).length>0&&a.removeClass("faug-form-error"),u[e]){var r=u[e];r=It(r,t);var n=t.split("."),s=e;if(""!=t.trim())for(var o=0;o<n.length;o++)s+="['"+n[o]+"']";if(r)if("object"==r.type||"array"==r.type){var l=r.properties;i=!0===i?i&&r.validateHiddenElements:r.validateHiddenElements;var d=!1;for(var c in!l&&r.items&&(l=r.items.properties,d=!0),l)if(l.hasOwnProperty(c)){var f=l[c];if(!f)continue;if("object"==f.type||"array"==f.type){Ut(e,t&&""!=t?t+"."+c:c,a);continue}var m=_[s];if(m>=0&&d)for(o=0;o<m;o++){var h=$(document.getElementsByName(s+"["+o+"]['"+c+"']")),g=De(s+"["+o+"]['"+c+"']_cont");if((i||g.is(":visible"))&&f.validations){var p=h.length>0?Lt(g,s+"."+o+"."+c):void 0;if(!/true|yes|1/.test(f.required)&&Fg.isN(p))continue;var v=h.length>0?[!0,Lt(g,s+"."+o+"."+c)]:void 0;if((w=Le(f.validations,h,v))[0]){if("helpText"==f.validations.errorselector){F=g.find(".help-block");g.removeClass("has-error"),g.addClass("has-success")}}else{a.addClass("faug-form-error");var y=w[1],b="";for(o=0;o<y.length;o++)if(y[o]){b+=y[o]+"<br/>";break}if("helpText"==f.validations.errorselector)(F=g.find(".help-block")).html(b),F.show(),g.addClass("has-error"),g.removeClass("has-success");1!=h.length||"text"!=h.attr("type")&&"number"!=h.attr("type")&&"url"!=h.attr("type")&&"email"!=h.attr("type")||h.val("")}}}else{h=$(document.getElementsByName(s+"['"+c+"']")),g=De(s+"['"+c+"']_cont");if(!i&&!g.is(":visible"))continue;if(f.validations){p=h.length>0?Lt(g,s+"."+c):void 0;if(!/true|yes|1/.test(f.required)&&Fg.isN(p))continue;v=h.length>0?[!0,Lt(g,s+"."+c)]:void 0;if((w=Le(f.validations,h,v))[0]){if("helpText"==f.validations.errorselector){F=g.find(".help-block");g.removeClass("has-error"),g.addClass("has-success")}}else{a.addClass("faug-form-error");for(y=w[1],b="",o=0;o<y.length;o++)if(y[o]){b+=y[o]+"<br/>";break}if("helpText"==f.validations.errorselector)(F=g.find(".help-block")).html(b),F.show(),g.addClass("has-error"),g.removeClass("has-success");1!=h.length||"text"!=h.attr("type")&&"number"!=h.attr("type")&&"url"!=h.attr("type")&&"email"!=h.attr("type")||h.val("")}}}}}else{h=$(document.getElementsByName(s)),g=De(s+"_cont");if(i||g.is(":visible")){if(r.validations){var w;p=h.length>1?Lt(g,s+"."+c):void 0;if(/true|yes|1/.test(r.required)||!Fg.isN(p))if((w=Le(r.validations,h,v))[0]){if("helpText"==r.validations.errorselector){F=g.find(".help-block");g.removeClass("has-error"),g.addClass("has-success")}}else{a.addClass("faug-form-error");var F;for(y=w[1],b="",o=0;o<y.length;o++)if(y[o]){b+=y[o]+"<br/>";break}if("helpText"==r.validations.errorselector)(F=g.find(".help-block")).html(b),F.show(),g.addClass("has-error"),g.removeClass("has-success");1!=h.length||"text"!=h.attr("type")&&"number"!=h.attr("type")&&"url"!=h.attr("type")&&"email"!=h.attr("type")||h.val("")}}}else;}}return!a.hasClass("faug-form-error")};var Ut=this.validateElement;this.ve=this.validateElement,$.fn.serializeAnything=function(e,t,a){var i=!t||!1===t,r=[],n={},s=!0===a,o=s?$(this).find("[name]").get():$(this).find(":input").get();for(var l in $.each(o,(function(){if(("yes"===$(this).attr("faug-transient")&&i||!$(this).attr("faug-transient"))&&$(this).attr("name")&&(s||this.checked||/select|textarea/i.test(this.nodeName)||/text|number|email|url|hidden|file|password/i.test(this.type)||"DIV"==this.nodeName&&"true"===$(this).parent().attr("faug-read-only"))){var t=$(this);/select/i.test(this.nodeName)&&!0!==t.prop("multiple")&&(t=$(this.options[this.selectedIndex>-1?this.selectedIndex:0]));var a=t.val();if("true"===$(this).parent().attr("faug-read-only"))a=t.html();else if($(this).attr("faug-serialize-position")){var r=$(this).attr("faug-serialize-position");"text"==r?a=t.text():"html"==r?a=t.html():"value"!=r&&(a=t.attr(r));var o=t.attr("faug-serialize-function");if(o&&""!==o.trim()){var l=Ge(o,[a,$(this)]);l.valid&&(a=l.result)}}var d=$(this).attr("name");if(d||"true"!==$(this).parent().attr("faug-read-only")||(d=$(this).attr("name")),void 0!==e&&""!=e){if(0!=d.indexOf(e))return;d=d.replace(e,"")}"["==d.charAt(0)&&"'"==d.charAt(1)&&(d=d.replace("['","").replace("']","")),void 0!==this.data&&(a=this.data),this.checked&&!0===t.prop("multiple")&&(je("Array",n[d])?n[d].push(a):a=[a]),n[d]||(n[d]=a)}})),n)n.hasOwnProperty(l)&&r.push({name:l,value:n[l]});return r},$.fn.serializeObject=function(e,t,a){for(var i=!t||!1===t,r=$(this).find("input[name],textarea[name],select[name]"),n={},s=0;s<r.length;s++){var o=r.eq(s),l=o.prop("tagName");if(("INPUT"!=l||!/radio|checkbox/i.test(o.attr("type"))||o[0].checked)&&("yes"===o.attr("faug-transient")&&i||!o.attr("faug-transient"))){var d=o.attr("name");e&&-1!=d.indexOf(e)&&(d=d.replace(e,"")),"SELECT"==l&&!0!==o.prop("multiple")&&(o=$(o[0].options[o[0].selectedIndex>-1?o[0].selectedIndex:0]));var c=o.val();if(o.length>0&&void 0!==o[0].data&&(c=o[0].data),o.attr("faug-serialize-position")){var u=o.attr("faug-serialize-position");"text"==u?c=o.text():"html"==u?c=o.html():"value"!=u&&(c=o.attr(u));var f=o.attr("faug-serialize-function");if(f&&""!==f.trim()){var m=Fg.execFunc(f,[c,o]);m.valid&&(c=m.result)}}var h=o.length>0&&o[0].checked&&!0===o.prop("multiple");if(""==c||null==c)continue;for(var g=d.split(/\[|\]/).filter((function(e){return e})),p=n,v=0;v<g.length-1;v++)-1!=g[v].indexOf("'")&&(g[v]=g[v].replace(/'/g,"")),isNaN(g[v+1])?p[g[v]]=p[g[v]]||{}:p[g[v]]=p[g[v]]||[],p=p[g[v]];-1!=g[g.length-1].indexOf("'")&&(g[g.length-1]=g[g.length-1].replace(/'/g,"")),isNaN(g[v])?h?je("Array",p[g[g.length-1]])?p[g[g.length-1]].push(c):p[g[g.length-1]]=[c]:p[g[g.length-1]]=c:h?je("Array",p[1*g[g.length-1]])?p[1*g[g.length-1]].push(c):p[1*g[g.length-1]]=[c]:p[1*g[g.length-1]]=c}}return n},$.fn.serializeAnyObject=function(e,t,a){var i={},r=this.serializeAnything(e,t,a);return $.each(r,(function(){var e=$(document.getElementsByName($(this).attr("name")));if(void 0!==i[$(this).attr("name")]){i[$(this).attr("name")].push||(i[$(this).attr("name")]=[i[$(this).attr("name")]]);var t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,i[$(this).attr("name")].push(t)):""!=t&&i[$(this).attr("name")].push(t)}else if(-1==$(this).attr("name").indexOf("[")){t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,i[$(this).attr("name")]=t):""!=t&&(i[$(this).attr("name")]=t)}else{var r=$(this).attr("name").replace(/]/g,"");if((r=r.split("[")).length>=2)for(var n=null,s=!1,o=1;o<r.length;o++)if(0==r[o].indexOf("'")&&r[o].length>2)if(s||(null==i[r[0]]&&(i[r[0]]={}),n=i[r[0]],s=!0),r[o]=r[o].substr(1,r[o].length-2),o==r.length-1){t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,n[r[o]]=t):""!=t&&(n[r[o]]=t)}else null==n[r[o]]&&(r.length>o+1&&0==r[o+1].indexOf("'")&&r[o+1].length>2?n[r[o]]={}:n[r[o]]=[]),n=n[r[o]];else if(s||(null==i[r[0]]&&(i[r[0]]=[]),n=i[r[0]],s=!0),o!=r.length-1||isNaN(r[o]))null==n[r[o]]&&(r.length>o+1&&0==r[o+1].indexOf("'")&&r[o+1].length>2?n[r[o]]={}:n[r[o]]=[]),n=n[r[o]];else{t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,n.splice(1*r[o],0,t)):""!=t&&n.splice(1*r[o],0,t)}else{t=this.value||"";e.length>0&&e[0].hasOwnProperty("data")&&null!=e[0].data?(t=e[0].data,i[$(this).attr("name")]=t):""!=t&&(i[$(this).attr("name")]=t)}}1!=a||i.hasOwnProperty($(this).attr("name"))||(i[$(this).attr("name")]=$(this).attr("value"))})),!0!==a&&(Jt(i),Ht(i,e)),i},$.fn.serializeAttrs=function(e,t,a,i,r){for(var n=a?{}:[],s=i?$(this.find("*")):$(this),o=0;o<s.length;o++){for(var l=s[o].attributes,d=a?n:{},c=0;c<l.length;c++)if((!r||!/class|style|id|name|type|require|autocomplete/i.test(l[c].nodeName))&&(Ie(e)||l[c].nodeName.startsWith(e))){var u=Ie(e)?l[c].nodeName:l[c].nodeName.substring(e.length);ot(d,u,l[c].nodeValue,t)}a||n.push(d)}return n},this.fileDownload=function(e,t){if(t){var a=document.createElement("a"),i=document.createEvent("MouseEvents");a.href=e,a.download=e.slice(e.lastIndexOf("/")+1),i.initMouseEvent("click",!0,!1,self,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i)}else{e="data:application/octet-stream,"+e;$("<iframe/>").attr("src",e).hide().appendTo("body")}};this.fileDownload;this.fld=this.fileDownload,this.uploadMultipartForm=function(e,t,a,i,r,n,s,o){var l=$(document.getElementById(s));const d=new FormData(document.getElementById(e));var c={url:t,method:"POST",type:"POST",data:d,cache:!1,contentType:!1,processData:!1,success:r,error:n,headers:a,xhr:function(){return myXhr=$.ajaxSettings.xhr(),d.fake&&(myXhr.send=xhr.sendAsBinary,c.contentType="multipart/form-data; boundary="+data.boundary,c.data=d.toString()),myXhr.upload&&l.length>0&&myXhr.upload.addEventListener("progress",function(e,t){return function(a){if(a.lengthComputable){var r=a.loaded/a.total,n=void 0;i&&i.callbacks&&i.callbacks.hanldeUpdateProgress&&(n=Xe(void 0,i.callbacks.hanldeUpdateProgress,t)),n&&n.valid&&!n.result||("progress"==e.prop("tagName").toLowerCase()?e.attr("value",100*r):e.css("width",100*r+"%"))}}}(l,o),!1),myXhr}};return $.ajax(c),!1};var qt=this.uploadMultipartForm;function Ht(e,t){if("[object Array]"===Object.prototype.toString.call(e))for(var a=0;a<e.length;a++)null==t&&(t=""),Ht(e[a],t+"["+a+"]");else if("[object Object]"===Object.prototype.toString.call(e))for(var i in e){var r,n=e[i];if(null==w[(r=null!=t?t+"['"+i+"']":i)+"_dummymap"]||null==w[r+"_dummymap"].mtype||"map"!=w[r+"_dummymap"].mtype||"array"!=w[r+"_dummymap"].type&&"marray"!=w[r+"_dummymap"].type||"[object Array]"!==Object.prototype.toString.call(n))Ht(n,r);else{var s={};for(a=0;a<n.length;a++)Ht(n[a],r+"["+a+"]"),s[n[a].key]=n[a].value;e[i]=s}}}function Jt(e){if("object"!=typeof e)return!0;var t=!1;for(var a in e)e.hasOwnProperty(a)&&null!=e[a]&&(Jt(e[a])?t=!0:delete e[a]);return t}function Wt(e,t){return je("String",e)?(t&&'"'!=t?"'"==t&&(e=e.replace(/'/g,"\\'")):e=e.replace(/"/g,"&#34;"),e):e}function Xt(e,t){return this.d=new Date,e&&(t?(this.d=Fg.parseDate(e,t),this.d||(this.d=new Date)):e?Fg.is("Date",e)?isNaN(e.getTime())||(this.d=new Date(e.getTime())):isNaN(e)||(this.d=new Date(parseInt(e))):this.d=new Date),this.elaspsedString=function(e,t,a,i,r){i=!0===i,r=!0===r;var n=!0,s=!0,o=!0,l=!0,d=!0,c=!0,u=!0,f=!0,m=!0,h=!0,g="ago",p="later",v=!1,y=!1;Fg.isN(t)||(n=!0===t.y,s=!0===t.m,o=!0===t.w,l=!0===t.d,d=!0===t.h,c=!0===t.mi,u=!0===t.s,f=!0===t.ms,m=!0===t.sd||!0===n||!0===s||!0===o||!0===l,h=!0===t.st||!0===d||!0===c||!0===u||!0===f,g=void 0===t.pastCode||""==t.pastCode.trim()?"ago":t.pastCode.trim(),p=void 0===t.futureCode||""==t.futureCode.trim()?"later":t.futureCode.trim(),v=!0===t.pastPrefix,y=!0===t.futurePrefix);var b=Fg.getDateUtil().diff(e,a||new Date),_=b.isNegative(),w=_?p:g,F=_?y:v;y===v&&(F=!1,w="");var x="";if(m){n&&Math.abs(b.years())>=1&&(x+=Math.abs(b.years()),x+=r?"y ":" years"),s&&Math.abs(b.months())>=1&&(x+=(i&&x.length>0?", ":"")+Math.abs(b.months()),x+=r?"m ":" months");var O=Math.abs(b.days());if(o&&Math.abs(b.weeks())>=1){var $=Math.floor(b.weeks());x+=(i&&x.length>0?", ":"")+$,x+=r?"w ":" weeks",O=7*(Math.abs(b.weeks())-$)}l&&O>=1&&(x+=(i&&x.length>0?", ":"")+Math.floor(O),x+=r?"d ":" days")}return h&&(d&&Math.abs(b.hours())>=1&&(x+=(i&&x.length>0?", ":"")+Math.abs(b.hours()),x+=r?"h ":" hrs"),c&&Math.abs(b.minutes())>=1&&(x+=(i&&x.length>0?", ":"")+Math.abs(b.minutes()),x+=r?m?"mi ":"m ":" mins"),u&&Math.abs(b.seconds())>=1&&(x+=(i&&x.length>0?", ":"")+Math.abs(b.seconds()),x+=r?"s ":" sec"),f&&Math.abs(b.milliseconds())>=1&&(x+=(i&&x.length>0?", ":"")+Math.abs(b.milliseconds()),x+=r?"ms ":" ms")),(F?w+" ":"")+x+(F?"":" "+w)},this.day=function(t){if(!t)return this.d.getDay();e.setDate(t)},this.month=function(t){if(!t)return this.d.getMonth();e.setMonth(t)},this.year=function(t){if(!t)return this.d.getFullYear();e.setFullYear(t)},this.hour=function(t){if(!t)return this.d.getHours();e.setHours(t)},this.minute=function(t){if(!t)return this.d.getMinutes();e.setMinutes(t)},this.second=function(t){if(!t)return this.d.getSeconds();e.setSeconds(t)},this.millisecond=function(t){if(!t)return this.d.getMilliseconds();e.setMilliseconds(t)},this.toDate=function(){return this.d},this.date=function(){return this.d},this.diff=function(e,t){var a=e,i=t;t||(t=e,e=this),e&&void 0!==e.toDate&&(a=e.toDate()),t&&void 0!==t.toDate&&(i=t.toDate());var r=!1,n=new Date(i-a);if(n.toISOString().slice(0,4)-1970<0){var s=i;i=a,a=s,n=new Date(i-a),r=!0}return new function(e,t){var r=e,n=0,s=0,o=0,l=0,d=0,c=0,u=0,f=e.getTime()/864e5;if(je("Date",r)&&!isNaN(r.getTime())){if(Math.abs(r.getTime())<864e5){var m=Math.abs(r.getTime());n=0,s=0,o=0,m-=36e5*(l=Math.floor(m/36e5)*(t?-1:1)),m-=6e4*(d=Math.floor(m/6e4)*(t?-1:1)),c=Math.floor(m/1e3)*(t?-1:1),u=m-1e3*c*(t?-1:1)}else 864e5==Math.abs(r.getTime())?(n=0,s=0,o=t?-1:1,l=0,d=0,c=0,u=0):(n=(r.toISOString().slice(0,4)-1970)*(t?-1:1),s=r.getMonth()*(r.getMonth()>0&&t?-1:1),o=r.getDate()*(r.getDate()>0&&t?-1:1),l=r.getHours()*(r.getHours()>0&&t?-1:1),d=r.getMinutes()*(r.getMinutes()>0&&t?-1:1),c=r.getSeconds()*(r.getSeconds()>0&&t?-1:1),u=r.getMilliseconds()*(r.getMilliseconds()>0&&t?-1:1),a.getYear()!=i.getYear()?(a.getDate()==i.getDate()&&(o=0),a.getMonth()==i.getMonth()&&(s=0)):a.getMonth()==i.getMonth()?(s=0,o=i.getDate()-a.getDate()):(s=i.getMonth()-a.getMonth(),i.getDate()<a.getDate()?(s-=1,o=a.getDate()-i.getDate()):o=i.getDate()-a.getDate()));t&&s>0&&(s=-s),t&&o>0&&(o=-o)}return this.isNegative=function(){return t},this.years=function(e){return!0===e?f/365:n},this.months=function(e){return!0===e?f/4380:s},this.weeks=function(e){return(!0===e?f/30660:o/7)*(t?-1:1)},this.days=function(e){return!0===e?f:o},this.hours=function(e){return!0===e?24*this.days(e):l},this.minutes=function(e){return!0===e?60*this.hours(e):d},this.seconds=function(e){return!0===e?60*this.minutes(e):c},this.milliseconds=function(e){return!0===e?1e3*this.seconds(e):u},this}(n,r)},this.add=function(e,t){e=parseInt(e);var a=0;switch(t){case"days":a=24*e,this.add(a,"hours");break;case"hours":a=60*e,this.add(a,"minutes");break;case"weeks":a=7*e,this.add(a,"days");break;case"minutes":a=60*e,this.add(a,"seconds");break;case"seconds":a=1e3*e,this.add(a,"milliseconds");break;case"months":(e+=this.d.getUTCMonth())/12>0&&(this.add(e/12,"years"),e%=12),this.d.setUTCMonth(e);break;case"milliseconds":this.d.setTime(this.d.getTime()+e);break;case"years":this.d.setFullYear(this.d.getUTCFullYear()+e);break;default:throw new Error("Invalid date increment passed")}return this},this.plus=function(e,t){return this.add(e,t),this},this.subtract=function(e,t){return this.add(-e,t),this},this.minus=function(e,t){return this.add(-e,t),this},this.format=function(e){return Fg.getDate(this.d,e)},this.startOfDay=function(){var e=new Date(this.d.getTime());return e.setHours(0,0,0,0),e},this.endOfDay=function(){var e=new Date(this.d.getTime());return e.setHours(23,59,59,999),e},this.calculateAge=function(e){var t,a=new Date;return a.setHours(0,0,0,0),e.setHours(0,0,0,0),((t={years:(t=diff(e,a)).years(),months:t.months(),days:t.days()}).years>0||0==t.months)&&1==t.days&&(t.days=0),t},this}this.umf=this.uploadMultipartForm,this.check=null,this.__check=function(){var e=!0;for(var t in this.base64Files)this.base64Files.hasOwnProperty(t)&&(e&=this.base64Files[t].status);e?clearTimeout(this.check):this.check=setTimeout(this.__check,500)},this.eventEnergize=function(e,t,a,i){u[e]&&Xe(u[e].crud[t].callbacks,a,[i])},this.evz=this.eventEnergize,this.convertDate=function(e){return Fg.getDate(new Date(e),C)},this.parseDate=function(e,a){return a||(a=C),t.parseDate(e,a)},this.getDateFromFmt=function(e,a,i){return i=i||C,e=t.parseDate(e,i),Fg.getDate(e,a)},this.gdff=this.getDateFromFmt,this.getDateUtil=function(e,t){return new Xt(e,t)},this.date=this.getDateUtil,this.d=this.getDateUtil,this.dateDiff=function(e,t){return new Xt(e).diff(t)},this.elapsedDuration=function(e,t,a){return new Xt(e).diff(t).elaspsedString(a)},this.getDate=function(e,a){a||C||(a=C);var i=t.formatDate(e,a);return!a||-1==a.indexOf("HH:")&&-1==a.indexOf("mm:")||-1==i.indexOf(".")||(i=i.replace(/\./g,":")),i},this.gd=this.getDate,this.getDateTime=function(e){fmt||(fmt=C);var a=t.formatDate(e,P);return-1==fmt.indexOf("HH:")&&-1==fmt.indexOf("mm:")||-1==a.indexOf(".")||(a=a.replace(/\./g,":")),a},this.gdt=this.getDateTime,this.formatNumber=function(e){return isNaN(e)?e:(e*=1,t.formatNumber(e))},this.parseNumber=function(e){return t.parseNumber(e)},this.formatCurrency=function(e,a,i){return isNaN(e)?e:(e*=1,t.formatNumber(e,a||ae,i))},this.getTime=function(e){fmt||(fmt=C);var a=t.formatDate(e,j);return-1==fmt.indexOf("HH:")&&-1==fmt.indexOf("mm:")||-1==a.indexOf(".")||(a=a.replace(/\./g,":")),a},this.gt=this.getTime;var Gt=function(e){var t=$("");return e&&(t=e.closest(".faug-valid-row")),t.data("data")};this.getFaugValidRowData=Gt,this.gfvrd=this.getFaugValidRowData,this.includeTemplate=function(e,t){var a=p[e].apply(null,[t]);return a||""};var Yt=this.includeTemplate;this.getModel=function(e){return this.ele=e,this.data=Gt(e),this.update=function(e,t,a){(a||this.ele).replaceWith(Yt(e,t))},this};this.getModel;this.gm=this.getModel;var Qt=void 0;this.routeTo=function(e,t){if(e&&""!=e.trim()){var a=document.location+"";if(0==e.indexOf("#")&&(e=e.substring(1)),-1!=a.indexOf("#")&&e){var i=a.substring(a.indexOf("#")+1);if(a=a.substring(0,a.indexOf("#")),a+="#"+e,i==e)return ta(void 0),void(t&&t());document.location=a}else a+="#"+e,document.location=a;t&&(Qt=t)}};var Kt=this.routeTo;this.r=this.routeTo,this.getRoute=function(e){var t=document.location+"";return t=-1!=t.indexOf("#")?t.substring(t.indexOf("#")+1):"",!0===e?t:Fe&&-1!=t.indexOf(":")?t.substring(t.indexOf(":")+1):t};this.getRoute;this.gr=this.routeTo,this.getPrevRoute=function(e){var t=a;return t?(t=-1!=t.indexOf("#")?t.substring(t.indexOf("#")+1):"",!0===e?t:Fe&&-1!=t.indexOf(":")?t.substring(t.indexOf(":")+1):t):""},this.defaultRoute=function(){""!=I.defaultroute&&void 0!==I.defaultroute&&null!==I.defaultroute&&Kt(I.defaultroute)};var Zt=this.defaultRoute;this.df=this.defaultRoute,this.firstRoute=function(){""!=I.firstroute&&void 0!==I.firstroute&&null!==I.firstroute&&Kt(I.firstroute)};this.firstRoute;this.fr=this.firstRoute,this.prevRoute=function(){Kt(a)};this.prevRoute;this.pr=this.prevRoute,this.getUrlParameters=function(e){var t={};return(e=e||location.search).substr(1).split("&").forEach((function(e){var a=e.split("="),i=a[0],r=a[1]&&decodeURIComponent(a[1]);i in t?t[i].push(r):t[i]=[r]})),t};this.getUrlParameters;this.gup=this.getUrlParameters,this.getUrlParameterByName=function(e){var t=RegExp("[?&]"+e+"=([^&]*)").exec(window.location.search);return t&&decodeURIComponent(t[1].replace(/\+/g," "))};var ea=this.getUrlParameterByName;this.gupbn=this.getUrlParameterByName,this.getCookies=function(){var e={};return document.cookie.split("&").forEach((function(t){var a=t.split("="),i=a[0],r=a[1]&&decodeURIComponent(a[1]);i in e?e[i].push(r):e[i]=[r]})),e};this.getCookies;this.gcs=this.getCookies,this.getCookie=function(e){var t=RegExp("[;]*"+e+"=([^;]*)").exec(document.cookie);return t&&decodeURIComponent(t[1].replace(/\+/g," "))};this.getCookie;this.gc=this.getCookie,this.getXPath=function(e){var t=[];if(e.attr("id"))return'//*[@id="'+e.attr("id")+'"]';for(var a=e.parents(),i=0;i<a.length;i++){if($(a[i]).attr("id")){t.push('*[@id="'+$(a[i]).attr("id")+'"]');break}if(i+1<a.length&&$(a[i+1]).children($(a[i]).prop("tagName")).length>1){var r=$(a[i+1]).children($(a[i]).prop("tagName")),n=-1;for(n=0;n<r.length&&$(r[n])[0]!=$(a[i])[0];n++);t.push($(a[i]).prop("tagName")+"["+(n+1)+"]")}else t.push($(a[i]).prop("tagName"))}if(e.parent()&&e.parent().children(e.prop("tagName")).length>1){r=e.parent().children(e.prop("tagName")),n=-1;for(n=0;n<r.length&&$(r[n])[0]!=e[0];n++);t.unshift(e.prop("tagName")+"["+(n+1)+"]")}else t.unshift(e.prop("tagName"));return t.reverse(),"//"+t.join("/")},this.xpathToCssSelector=function(e){return e.replace(/\[(\d+?)\]/g,(function(e,t){return"["+t+"]"})).replace(/\/{2}/g,"").replace(/\/+/g," > ").replace(/@/g,"").replace(/\[(\d+)\]/g,":nth-of-type($1)").replace(/^\s+/,"")},this.handleRoute=function(e,t){t||(t=!1);var a,i=document.location+"",n=(i=-1!=i.indexOf("#")?i.substring(i.indexOf("#")+1):"").split("/"),s={},o=void 0,l=I.routes[n[0]];if(je("Array",l)){for(var d,c,u=0;u<l.length;u++){var f=I.fragments[n[0]][u];if(void 0===d&&(d=f.length,c=u,s={},a=void 0,o=void 0),f.length<d&&(d=f.length,c=u,s={},a=void 0,o=void 0),p=f.length==n.length-1)for(var m=1;m<f.length+1;m++){var h=n[m];-1!=(g=f[m-1]).indexOf("a:")?s[g.substring(g.indexOf("a:")+2)]=decodeURI(n[m]):p&=g=="v:"+h}if(p){a=l[u],o=n[0];break}}a||(a=l[c],o=n[0])}else if(l){if(a=l,o=n[0],(f=I.fragments[n[0]]).length>0&&n.length>1)for(u=1;u<f.length+1;u++){var g;h=n.length>u?n[u]:void 0;if(-1!=(g=f[u-1]).indexOf("a:"))s[g.substring(g.indexOf("a:")+2)]=decodeURI(n[u]);else var p=g=="v:"+h}}return a&&(!1===a.secure||Ie(I.secure)||!1===I.secure||!0===I.secure&&!Ie(b))?(t||(x[Y]=s,r=o,I.process&&window[I.process]?Fg.execFunc(I.process,[Ue(a),e],!0):Ue(a)(e)),[!0,a.secure]):(t||(r=o,Zt()),[!1,void 0])};var ta=this.handleRoute;this.hr=this.handleRoute,this.handleRouteEvent=function(e){Z=void 0,a=i,i=location.hash,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,location.hash,e])};this.handleRouteEvent;this.hre=this.handleRouteEvent,this.loadLocale=function(e,a){t.reInitIntlLib(e,a)};this.loadLocale;function aa(e,t){if("string"==typeof t){for(var a=t,i=0;-1!=a.indexOf("%%Fg.g(",i);){var r=a.indexOf("%%Fg.g(",i);if(r>=0){var n=a.indexOf(")",r+7),s=a.substring(r+7,n);void 0!==x[s]&&""!=x[s]&&(a=a.substring(0,r)+x[s]+a.substring(n+1))}i=r+1}for(i=0;-1!=a.indexOf("%%Fg.t(",i);){if((r=a.indexOf("%%Fg.t(",i))>=0){n=a.indexOf(")",r+7),s=a.substring(r+7,n);a=a.substring(0,r)+Fg.t(s)+a.substring(n+1)}i=r+1}return a}return t}function ia(e,t,a,i){if(t.compressedSchemas&&je("String",t.compressedSchemas)&&""!=t.compressedSchemas.trim()&&t.compressedSchemaHtmlTemplates&&je("String",t.compressedSchemaHtmlTemplates)&&""!=t.compressedSchemaHtmlTemplates.trim()||t.compressedCompiledSchemaHtmlTemplates&&je("String",t.compressedCompiledSchemaHtmlTemplates)&&""!=t.compressedCompiledSchemaHtmlTemplates.trim()){try{var r=JSON.parse(t.compressedSchemas);if(a&&a.schemas)for(var n in r)r.hasOwnProperty(n)&&a.schemas[n]&&(r[n].details.name=a.schemas[n],r[a.schemas[n]]=r[n],delete r[n]);for(var n in r)if(r.hasOwnProperty(n)){var s=JSON.stringify(r[n],aa);try{s=JSON.parse(s);try{vt(s,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+n+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+n+", error = "+e)}}}catch(e){console.log("Problem parsing compressed schema"),u={}}if(t.compressedCompiledSchemaHtmlTemplates)try{var o=JSON.parse(t.compressedCompiledSchemaHtmlTemplates);for(var l in o)if(!(l in p)){s=o[l];je("String",s)?p[l]=new Function("arg",s):p[l]=s[0]}}catch(e){console.log("Problem parsing compressedCompiledSchemaHtmlTemplates")}else try{o=JSON.parse(t.compressedSchemaHtmlTemplates);for(var l in o)if(o.hasOwnProperty(l)&&!(l in p)){var d=o[l][0];0==(c=o[l][1])?Ot(l,d,{rows:null,options:null}):1==c||2==c?Ot(l,d,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==c?Ot(l,d,o[l][2]):4==c&&Ot(l,d,o[l][2],4)}}catch(e){console.log("Problem parsing compressed schema HTML templates")}}if(t.compressedSchemas&&je("String",t.compressedSchemas)&&""!=t.compressedSchemas.trim())try{r=JSON.parse(t.compressedSchemas);if(a&&a.schemas)for(var n in r)r.hasOwnProperty(n)&&a.schemas[n]&&(r[n].details.name=a.schemas[n],r[a.schemas[n]]=r[n],delete r[n]);for(var n in r)if(r.hasOwnProperty(n))try{s=JSON.stringify(r[n],aa);s=JSON.parse(s);try{vt(s,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+n+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+n+", error = "+e)}u=_t(u,r)}catch(e){console.log("Problem parsing compressed schema"),u={}}if(t.compressedSchemaHtmlTemplates&&je("String",t.compressedSchemaHtmlTemplates)&&""!=t.compressedSchemaHtmlTemplates.trim()||t.compressedCompiledSchemaHtmlTemplates&&je("String",t.compressedCompiledSchemaHtmlTemplates)&&""!=t.compressedCompiledSchemaHtmlTemplates.trim())if(t.compressedCompiledSchemaHtmlTemplates)try{o=JSON.parse(t.compressedCompiledSchemaHtmlTemplates);for(var l in o)if(!(l in p)){s=o[l];je("String",s)?p[l]=new Function("arg",s):p[l]=s[0]}}catch(e){console.log("Problem parsing compressedCompiledSchemaHtmlTemplates")}else try{o=JSON.parse(t.compressedSchemaHtmlTemplates);for(var l in o)if(o.hasOwnProperty(l)&&!(l in p)){var c;d=o[l][0];0==(c=o[l][1])?Ot(l,d,{rows:null,options:null}):1==c||2==c?Ot(l,d,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==c?Ot(l,d,o[l][2]):4==c&&Ot(l,d,o[l][2],4)}}catch(e){console.log("Problem parsing compressed schema HTML templates")}var f;if(t.schemas||t.templates){if(!ie&&t.schemas&&je("Object",t.schemas))for(var m in f=[],t.schemas)t.schemas.hasOwnProperty(m)&&f.push(t.schemas[m]);if(t.lazySchemas&&je("Object",t.schemas))for(var m in t.lazySchemas)t.lazySchemas.hasOwnProperty(m)&&(L[m]=t.lazySchemas[m]);!ie&&t.templates&&je("Array",t.templates)&&t.templates.length>0&&(o=t.templates)}if(f&&f.length>0){var h=function(e,t,a,i){if(t)try{var r=JSON.parse(a.responseText);try{var n=JSON.stringify(r,aa);r=JSON.parse(n)}catch(e){e+=" ("+i[0]+")",console.log("Problem templatizing schema "+e)}var s=vt(r,!1,!1,!1,!1,!1,!1);o=o.concat(s)}catch(e){e+=" ("+i[0]+")",console.log("Problem parsing schema "+e)}};Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(f,h).done((function(){if(Fg.freezeUI(!1),a&&a.schemas)for(var e in u)u.hasOwnProperty(e)&&a.schemas[e]&&(u[e].details.name=a.schemas[e],u[a.schemas[e]]=u[e],delete u[e]);if(o.length>0){for(var t=[],r=0;r<o.length;r++){var n=o[r],s={rows:null,options:null,row:null},l=0;je("Array",o[r])&&("html"==o[r][1]?(n=o[r][0],l=o[r][3]):(n=o[r][0],s=o[r][1],l=o[r].length>2?o[r][2]:0,Fg.isN(o[r][1])||(l=3))),t.push([n,"html",!0,l,s])}Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(t,(function(e,t,a,i){if(t){var r=i[0],n=a.responseText,s=i[3],o=i[4];0==s?Ot(r,n,{rows:null,options:null}):1==s||2==s?Ot(r,n,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==s?Ot(r,n,o):4==s&&Ot(r,n,o,4)}})).done((function(){Fg.freezeUI(!1),i()})).fail((function(){Fg.freezeUI(!1)}))}else i()})).fail((function(){Fg.freezeUI(!1)}))}else if(o&&o.length>0){for(var g=[],v=0;v<o.length;v++){var y=o[v],b={rows:null,options:null,row:null},_=0;je("Array",o[v])&&("html"==o[v][1]?(y=o[v][0],_=o[v][3]):(y=o[v][0],b=o[v][1],_=o[v].length>2?o[v][2]:0,Fg.isN(o[v][1])||(_=3))),g.push([y,"html",!0,_,b])}h=function(e,t,a,i){if(t){var r=i[0],n=a.responseText,s=i[3],o=i[4];0==s?Ot(r,n,{rows:null,options:null}):1==s||2==s?Ot(r,n,{isTransient:null,elName:null,rows:null,selectedVal:null,details:null,vars:null,options:null}):3==s?Ot(r,n,o):4==s&&Ot(r,n,o,4)}};Fg.freezeUI(!0),$.fetchMultipleFilesRawMT(g,h).done((function(){Fg.freezeUI(!1),i()})).fail((function(){Fg.freezeUI(!1)}))}else i()}this.extension=function(){return t},this.registerComponent=function(e,t){if(!e)throw"No name defined for component";if(!t)throw"No component defined";if(t.init&&"function"!=typeof t.init)throw"Init method should be a function if defined";if(t.type&&(!je("String",t.type)||!/schema|viewer|general/.test(t.type)))throw"Type should be one of schema, viewer or general";if("function"!=typeof t.use)throw"No use method defined for component";if(t.destroy&&"function"!=typeof t.destroy)throw"Destroy method should be a function if defined";ue[e]=t},this.initLib=function(){var e=[];(t=new FaugExtensionFactory(Faug)).registerLocale("en");var a=t.getDateLib();if(je("String",a)&&""!=a.trim()&&e.push([a.trim()]),je("Array",a)&&a.length>0)for(var i=0;i<a.length;i++)je("String",a[i])&&""!=a[i].trim()&&e.push([a[i].trim()]);Fg.freezeUI(!0),$.fetchMultipleFilesMT(e).done((function(){Fg.freezeUI(!1),t.registerCurrency("USD"),t.initDateLib(),t.initDateTimePickerLib(),t.initNumCurrLib(),t.initUnitLib(),t.initDialogLib(),t.initIntlLib(ee),t.initTemplateEngineLib(),t.initDomDiff()})).fail((function(e){Fg.freezeUI(!1),alert("Problem loading required files")}))};var ra=[];if(this.initRouter=function(r,n){var s=(t=new FaugExtensionFactory(Faug)).getDateFormats();s.dateformat&&(C=s.dateformat),s.datetimeformat&&(P=s.datetimeformat),s.timeformat&&(j=s.timeformat),s.timestampformat&&(D=s.timestampformat);var c=window.layerFile;if(r&&Object.keys(r).length>0){r.dependencies&&Pe(r.dependencies.list,r.dependencies.override),r.settings&&(Fg.is("Boolean",r.settings.debugEnabled)&&(k=r.settings.debugEnabled),r.settings.crudcreatename&&(T=r.settings.crudcreatename),r.settings.crudreadname&&r.settings.crudreadname,r.settings.crudupdatename&&(S=r.settings.crudupdatename),r.settings.cruddeletename&&(A=r.settings.cruddeletename),r.settings.crudreadallname&&(N=r.settings.crudreadallname),r.settings.dateformat&&(C=r.settings.dateformat),r.settings.datetimeformat&&(P=r.settings.datetimeformat),r.settings.timeformat&&(j=r.settings.timeformat),r.settings.timestampformat&&(D=r.settings.timestampformat),Fg.is("Boolean",r.settings.honourLocale)&&(B=r.settings.honourLocale),r.settings.freezeLoaderId&&(E=r.settings.freezeLoaderId),r.settings.freezeLoaderHtml&&(z=r.settings.freezeLoaderHtml),r.settings.initialLoaderScreen&&(R=r.settings.initialLoaderScreen),r.settings.numApiWebWorkers&&(W=r.settings.numApiWebWorkers),r.settings.defaultLanguage&&(Q=r.settings.defaultLanguage),Fg.is("Boolean",r.settings.schemaIntlEnabled)&&(te=r.settings.schemaIntlEnabled),r.settings.defCurrency&&(ae=r.settings.defCurrency),Fg.is("Boolean",r.settings.crossDomain)&&(oe=r.settings.crossDomain),r.settings.prefilterRegex&&(le=r.settings.prefilterRegex),window.prefilterRegex&&(le=window.prefilterRegex),r.settings.baseUrl&&(ne=r.settings.baseUrl),window.baseUrl&&(ne=window.baseUrl),r.settings.routerUrl&&(se=r.settings.routerUrl),window.routerUrl&&(se=window.routerUrl),Fg.is("Boolean",r.settings.isRecord)&&(ce=r.settings.isRecord),Fg.is("Boolean",r.settings.recordSilently)&&r.settings.recordSilently,Fg.is("Boolean",r.settings.lazyLoad)&&(ie=r.settings.lazyLoad),Fg.is("Boolean",r.settings.disableContextMenu)&&(ve=r.settings.disableContextMenu),r.settings.layerFile&&(c=r.settings.layerFile),Fg.is("Boolean",r.settings.disableBackForwardButton)&&(ye=r.settings.disableBackForwardButton),Fg.is("Boolean",r.settings.disableBackForwardButtonCompletely)&&(be=r.settings.disableBackForwardButtonCompletely),r.settings.generateCorrelationId&&(de=r.settings.generateCorrelationId),Fg.is("Boolean",r.settings.enableRouteModules)&&(Fe=r.settings.enableRouteModules),Fg.is("Boolean",r.settings.compressedModuleFiles)&&(me=r.settings.compressedModuleFiles),Fg.is("Boolean",r.settings.catchApiUncaughtExceptions)&&(he=r.settings.catchApiUncaughtExceptions),r.settings.interceptUncaughtErrors&&(window.onerror=function(e,t,a,i,r){const n=JSON.stringify(r,Object.getOwnPropertyNames(r)),s=Faug.execFunc("onInterceptError",[JSON.parse(n)],!0);if(!s.valid)return s.result}),r.settings.interceptConsoleErrors&&(window._console_error_orig=window.console.error,window.console.error=e=>{Faug.execFunc("onInterceptConsoleError",[e],!0),window._console_error_orig(e)})),!0===ye&&(!0===be?(window.history.pushState(null,null,document.URL),window.addEventListener("popstate",(function(){window.history.pushState(null,null,document.URL)}))):window.onbeforeunload=function(){return"Do you really want to navigate away from the application?"}),r.globals&&(x=_t(x,r.globals)),n&&(x=_t(x,n)),r.router&&(I=r.router),r.intlmap&&Object.keys(r.intlmap).length>0&&(ee=r.intlmap),r.overrides&&je("Object",r.overrides)&&(pe=r.overrides);var f=!0===window.onlyFaugCore?[]:Ce;!0===r.compressedScript&&(f=[])}!0!==window.onlyFaugCore||isNaN(window.numApiWebWorkers)||(W=window.numApiWebWorkers),void 0!==na&&W>0&&!o?o=new na("w-api-call.js",W,"ApiWorkerPool",(function(e,t){t&&Pt(!1)})):W=0;var m=I.routes;for(var h in I.fragments={},I.aliases)if(I.aliases.hasOwnProperty(h)&&je("Array",I.aliases[h]))for(var g=0;g<I.aliases[h].length;g++)m[I.aliases[h][g]]=m[h];for(var h in m)if(m.hasOwnProperty(h)){var v=m[h];if(!0===v.isTemplate&&je("Array",v.options)&&v.options.length>0&&je("Object",v.routes)){var y=v.routes,_=v.options;for(var w in y)if(y.hasOwnProperty(w)){var F=y[w].props;for(g=0;g<_.length;g++){var O=Fg.copy(y[w]);O.props=void 0;var V={};if(je("Array",_[g]))for(var M=0;M<_[g].length;M++)V["arg"+(M+1)]=_[g][M];else V={arg1:_[g]};var U=Fg.templatize(w,V,!0,void 0,!1);if(je("Array",F)&&F.length>0)for(M=0;M<F.length;M++){var q=st(O,F[M]);je("String",q)&&(q=Fg.templatize(q,V,!0,void 0,!1),ot(O,F[M],q))}m[U]=O}}delete m[h]}}for(var h in m)if(m.hasOwnProperty(h)){var H=h.split("/"),J=[];for(g=1;g<H.length;g++){var X;H[g]=H[g].trim(),0==H[g].indexOf(":")&&H[g].length>1?(X="a:"+H[g].substring(1),J.push(X)):H[g].length>1&&(X="v:"+H[g],J.push(X))}if(m[H[0]]&&H[0]!==h){var G=m[h];delete m[h],je("Array",m[H[0]])?(m[H[0]].push(G),I.fragments[H[0]].push(J)):(m[H[0]]=[m[H[0]],G],I.fragments[H[0]]=[I.fragments[H[0]],J])}else{G=m[h];delete m[h],m[H[0]]=G,I.fragments[H[0]]=J}}if(!0!==r.compressedScript){var Y=t.getDateLib(B);if(je("String",Y)&&""!=Y.trim()&&f.push([Y.trim()]),je("Array",Y)&&Y.length>0)for(g=0;g<Y.length;g++)je("String",Y[g])&&""!=Y[g].trim()&&f.push([Y[g].trim()]);var K=t.getNumCurrLib();if(je("String",K)&&""!=K.trim()&&f.push([K.trim()]),je("Array",K)&&K.length>0)for(g=0;g<K.length;g++)je("String",K[g])&&""!=K[g].trim()&&f.push([K[g].trim()]);var Z=t.getUnitLib();if(je("String",Z)&&""!=Z.trim()&&f.push([Z.trim()]),je("Array",Z)&&Z.length>0)for(g=0;g<Z.length;g++)je("String",Z[g])&&""!=Z[g].trim()&&f.push([Z[g].trim()]);var ue=t.getDateTimePickerLib();if(je("String",ue)&&""!=ue.trim()&&f.push([ue.trim()]),je("Array",ue)&&ue.length>0)for(g=0;g<ue.length;g++)je("String",ue[g])&&""!=ue[g].trim()&&f.push([ue[g].trim()]);var fe=t.getDialogLib();if(je("String",fe)&&""!=fe.trim()&&f.push([fe.trim()]),je("Array",fe)&&fe.length>0)for(g=0;g<fe.length;g++)je("String",fe[g])&&""!=fe[g].trim()&&f.push([fe[g].trim()]);var ge=t.getIntlLib();if(je("String",ge)&&""!=ge.trim()&&f.push([ge.trim()]),je("Array",ge)&&ge.length>0)for(g=0;g<ge.length;g++)je("String",ge[g])&&""!=ge[g].trim()&&f.push([ge[g].trim()]);var _e=t.getTemplateEngineLib();if(je("String",_e)&&""!=_e.trim()&&f.push([_e.trim()]),je("Array",_e)&&_e.length>0)for(g=0;g<_e.length;g++)je("String",_e[g])&&""!=_e[g].trim()&&f.push([_e[g].trim()]);var we=t.getDomDiffLib();if(je("String",we)&&""!=we.trim()&&f.push([we.trim()]),je("Array",we)&&we.length>0)for(g=0;g<we.length;g++)je("String",we[g])&&""!=we[g].trim()&&f.push([we[g].trim()]);if(r.modules&&r.modules.length>0){!0;for(g=0;g<r.modules.length;g++)if(je("String",r.modules[g])&&""!=r.modules[g].trim()&&f.push([r.modules[g].trim()]),je("Array",r.modules[g])&&r.modules[g].length>0)for(M=0;M<r.modules[g].length;M++)je("String",r.modules[g][M])&&""!=r.modules[g][M].trim()&&f.push([r.modules[g][M].trim()])}if(!Q){var Ne=$("html").attr("lang");void 0!==Ne&&""!=Ne.trim()&&(Q=Ne)}Q||(Q="en");var De=$("html").attr("data-faug-module");if(void 0!==De&&""!=De.trim()){!0;var Ie=De.split(",");for(g=0;g<Ie.length;g++)je("String",Ie[g])&&""!=Ie[g].trim()&&f.push([Ie[g].trim()+".js"])}}function Be(e,t){Fg.freezeUI(!0),$.fetchMultipleFilesRawMT([[e]]).done((function(e){Fg.freezeUI(!1);let a=e[0][2].responseJSON;if(!e[0][2].responseJSON)try{a=JSON.parse(e[0][2].responseText)}catch(e){}Fg.setProperty("cdfs",a),a.table.search&&a.table.search.regex&&(ke=new RegExp(a.table.search.regex),a.table.search.errorFunc&&(Te=a.table.search.errorFunc)),a.search&&a.search.regex&&(xe=a.search.selector,Oe=new RegExp(a.search.regex),a.search.errorFunc&&($e=a.search.errorFunc)),a.input&&a.input.regex&&(Se=new RegExp(a.input.regex),Ae=a.input.errorFunc,Se&&Ae&&$(document).on("input","input,textarea",(function(e){if("1"!=$(this).attr("data-rgo"))if($(this).attr("data-regex")&&Ae){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!new RegExp($(this).attr("data-regex")).test($(this).val()))return Fg.execFunc(Ae,[$(this)]),e.stopPropagation(),!1}else if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!Se.test($(this).val()))return Fg.execFunc(Ae,[$(this)]),e.stopPropagation(),!1}))),a.form.file&&a.form.file.maxSizeMb&&a.form.file.errorFunc&&(l=a.form.file.maxSizeMb,d=a.form.file.errorFunc),t()})).fail((function(e){Fg.freezeUI(!1),alert("Problem loading Faug layer file")}))}if(!0===window.onlyFaugCore)return Faug.execFunc("onBeforeInit",[]),void(je("String",c)&&-1!=c.indexOf(".json")?Be(c,(function(){Faug.init()})):Faug.init());var Ee=$("html").attr("data-route-modules");void 0!==Ee&&/true|1|yes|y|no|false|0/.test(Ee.toLowerCase())&&(Fe=/true|1|yes|y/.test(Ee.toLowerCase())),Fg.isN(ne)||0!=ne.toLowerCase().indexOf("http://")&&0!=ne.toLowerCase().indexOf("https://")||Fg.isN(le)||!(le.length>0)?(le=void 0,ne="",$.ajaxPrefilter((function(e){Faug.execFunc("onBeforeAjaxCall",[e]),!0===oe&&(e.crossDomain=oe)}))):(le=new RegExp(le),$.ajaxPrefilter((function(e){Faug.execFunc("onBeforeAjaxCall",[e]),!Fg.isN(ne)&&le.test(e.url)&&0!=e.url.indexOf(ne)&&(0==e.url.indexOf("/")?e.url=ne+e.url:e.url=ne+"/"+e.url),!0===oe&&(e.crossDomain=oe)})));var ze=function(a,i){if(a&&a.length>0)for(var r=0;r<a.length;r++)if("_schema_config_"==a[r][3][1])try{u={};var n=JSON.parse(a[r][2].responseText);if(n.data){for(var s in n=JSON.parse(n.data))if(n.hasOwnProperty(s)){var o=JSON.stringify(n[s],aa);try{o=JSON.parse(o);try{vt(o,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+s+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+s+", error = "+e)}}if(pe&&pe.schemas)for(var s in u)u.hasOwnProperty(s)&&pe.schemas[s]&&(u[s].details.name=pe.schemas[s],u[pe.schemas[s]]=u[s],delete u[s])}}catch(e){console.log("Problem parsing compressed schema"),u={}}else if("_tmpl_config_"==a[r][3][1])try{var l=JSON.parse(a[r][2].responseText);if(l.data)for(var d in l=JSON.parse(l.data)){o=l[d];je("String",o)?p[d]=new Function("arg",o):p[d]=o[0]}}catch(e){console.log("Problem parsing _tmpl_config_"),u={}}else $.globalEval(a[r][2].responseText);if(ie){L=_t(i.lazySchemas,i.schemas),e={};for(r=0;r<i.templates.length;r++){var c=i.templates[r];je("Array",i.templates[r])&&(c=i.templates[r][0]),e[c]=i.templates[r]}}if(Faug.execFunc("onBeforeInit",[]),nt){ia(0,i,pe,h=function(){var e=Faug.handleRoute(void 0,!0);!1!==e[1]||i.router.firstroute===Faug.getRoute()?(Faug.init(),Faug.firstRoute()):0==e[1]&&Faug.handleRoute(void 0)})}else{var f=ea("flocale");f&&""!=f.trim()&&(Q=f);var m=Q,h=function(){var e=Faug.handleRoute(void 0,!0);!1!==e[1]||i.router.firstroute===Faug.getRoute()?(Faug.init(),Faug.firstRoute()):0==e[1]&&Faug.handleRoute(void 0)},g=function(e,t,a){return function(){ia(0,e,t,a)}},v=t.setInitCompleteCb(g(i,pe,h));t.registerLocale(m),t.registerCurrency(ae),t.initDateLib(),t.initDateTimePickerLib(),t.initNumCurrLib(),t.initUnitLib(),t.initDialogLib(),t.initIntlLib(ee),t.initTemplateEngineLib(),t.initDomDiff(),v||g(i,pe,h)}};if($(window).on("hashchange",(function(e){re={};let t=Faug.execFunc("onBeforeRouteChange",[a,location.hash,e,!1]);if(t&&t.valid&&!1===t.result)Fg.alertDialog("Permission Error");else{if(Fe){var r=location.hash.substring(1,location.hash.indexOf(":"));if(""!=r&&-1==ra.indexOf(r))return ra.push(r),void function(e,t){if(me){let a="fjs-config_"+e+"_s.json",i="fjs-config_"+e+"_t.json";$.fetchMultipleFilesRawMT([[a,"json",!0],[i,"json",!0]]).done((function(e){if(0==e[0][0])try{var a=JSON.parse(e[0][2].responseText);for(var i in a=JSON.parse(a.data))if(a.hasOwnProperty(i)){var r=JSON.stringify(a[i],aa);try{r=JSON.parse(r);try{vt(r,!1,!1,!1,!1,!1,!1)}catch(e){console.log("Problem in onSchemaLoad for schema "+i+", error = "+e)}}catch(e){console.log("Problem templatizing schema "+i+", error = "+e)}}if(pe&&pe.schemas)for(var i in u)u.hasOwnProperty(i)&&u.schemas[i]&&(u[i].details.name=u.schemas[i],u[pe.schemas[i]]=u[i],delete u[i])}catch(e){console.log("Problem parsing compressed schema"),u={}}if(1==e[1][0])try{var n=JSON.parse(e[1][2].responseText);for(var s in n=JSON.parse(n.data))s in p||(r=n[s],je("String",r)?p[s]=new Function("arg",r):p[s]=r[0])}catch(e){console.log("Problem parsing templates"),u={}}t()})).fail((function(e){alert("Problem loading compressed module files")}))}else{var a="",i={};b&&("queryparam"==b.aTokenWhere?a="?"+b.aTokenName+"="+b.aTokenValue:"header"!=b.aTokenWhere||i.hasOwnProperty(b.aTokenName)||(i[b.aTokenName]=b.aTokenValue));let r="fjs-config_"+e+".json"+a;$.fetchMultipleFilesRawMT([[r]]).done(function(e,t){return function(e){if(!e[0][2].responseJSON)try{e[0][2].responseJSON=JSON.parse(e[0][2].responseText)}catch(e){}ia(0,e[0][2].responseJSON,void 0,t)}}(0,t)).fail((function(e){alert("Problem loading module files")}))}}(r,function(e,t){return function(){a=i,i=t,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,t,e]),Qt&&(Qt(),Qt=void 0)}}(e,location.hash));a=i,i=location.hash,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,location.hash,e])}else a=i,i=location.hash,Faug.handleRoute(e),Faug.execFunc("onRouteChange",[a,location.hash,e]);Qt&&(Qt(),Qt=void 0)}})),Faug.getProperty("initialLoaderScreen")&&Fg.freezeUI(!1),!0===r.compressedSchemasFile){delete r.compressedSchemas,delete r.schemas;let e="fjs-config_s.json";f.push([e,"_schema_config_"])}if(!0===r.compressedCompiledSchemaHtmlTemplatesFile){delete r.compressedCompiledSchemaHtmlTemplates,delete r.templates;let e="fjs-config_t.json";f.push([e,"_tmpl_config_"])}je("String",c)&&-1!=c.indexOf(".json")?Be(c,(function(){0==f.length?ze(void 0,r):$.fetchMultipleFilesRawMT(f).done(function(e){return function(t){ze(t,e)}}(r)).fail((function(e){Faug.getProperty("initialLoaderScreen")&&Fg.freezeUI(!1),alert("Problem loading required files")}))})):0==f.length?ze(void 0,r):$.fetchMultipleFilesRawMT(f).done(function(e){return function(t){ze(t,e)}}(r)).fail((function(e){Faug.getProperty("initialLoaderScreen")&&Fg.freezeUI(!1),alert("Problem loading required files")}))},this.FetchFilesPromise=function(e,t){var a,i,r=[],n=e?e.length:0,s=void 0,o=void 0,l=[],d=[];function c(e,t,a,i,r,n,s){if(t&&0!=t.length)for(var o=0;o<t.length;o++){var l=t[o],d=!(l.length>2)||l[2],c=c||{};if(b&&l[0].startsWith("fjs-config")&&l[0].endsWith(".json"))if("queryparam"==b.aTokenWhere)-1==(f=l[0]).indexOf("?")?f+="?"+b.aTokenName+"="+b.aTokenValue:"?"==f[f.length-1]?f+=b.aTokenName+"="+b.aTokenValue:f+="&"+b.aTokenName+"="+b.aTokenValue,l[0]=f;else"header"!=b.aTokenWhere||c.hasOwnProperty(b.aTokenName)||(c[b.aTokenName]=b.aTokenValue);if(je("String",de)){var u=Fg.execFunc(de,[l[0],"GET"]);if(u.valid&&u.result){var f=l[0];c["X-Correlation-Id"]=u.result,-1==f.indexOf("?")?f+="?X_Correlation_Id="+u.result:"?"==f[f.length-1]?f+="X_Correlation_Id="+u.result:f+="&X_Correlation_Id="+u.result,l[0]=f}}Fg.freezeUI(!0),$.ajax({type:"GET",url:l[0],dataType:"text",headers:c,success:function(t,a,i,r,n,s,o){return function(o,l,d){Fg.freezeUI(!1),r.push([i,!0,d,t]),a&&a(i,!0,d,t),n==r.length&&(r.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(l,a,o,i,r,n,0),error:function(t,a,i,r,n,s,o){return function(o,l,d){Fg.freezeUI(!1),r.push([i,!1,o,t,l,d]),s.push(1),a&&a(i,!1,o,t,l,d),n==r.length&&(r.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(l,a,o,i,r,n,0),cache:d,async:!0})}}je("Array",e)&&!je("Array",e[0])&&(e=[e],n=1),this.repeat=function(e,t,r,n,s){return i[0]=r?1*r:-1,i[1]=0,a=setInterval(function(e,t,a,i,r){return function(){e.push(t).proceed(undefined,r),a[0]>0&&(a[1]=a[1]+1,a[0]==a[1]&&e.stop())}}(this,e,n,0,s),t),this},this.stop=function(){return a&&clearInterval(a),this},this.schedule=function(e,t,a,i,r){var n=t;return a&&(t=Fg.getDateUtil(t,a).date().getTime(),n=(new Date).getTime()-t),setTimeout(function(e,t,a,i){return function(){e.push(t).proceed(a,i)}}(this,e,i,r),n),this},this.push=function(e){return d.push(e),this},this.proceed=function(e,t){return d.length>0&&(n=d.length,c(this,d,e,r,n,l,!0===t)),d=[],this},this.done=function(e){return s?(s(r),this):(s=e,this)},this.fail=function(e){return o?(o(r),this):(o=e,this)},c(this,e,t,r,n,l)},this.ApisPromise=function(e,t,a,i){var r,n,s=[],o=e?e.length:0,l=void 0,d=void 0,c=[],u=!0===a,f=[];function m(e,t,a,i,r,n,s,o){if(t&&0!=t.length)for(var l=0;l<t.length;l++){var d=t[l];d[0]&&Fg.freezeUI(!0);var c=d.length>5?d[5]:{};if(b)if("queryparam"==b.aTokenWhere)-1==(f=d[2]).indexOf("?")?f+="?"+b.aTokenName+"="+b.aTokenValue:"?"==f[f.length-1]?f+=b.aTokenName+"="+b.aTokenValue:f+="&"+b.aTokenName+"="+b.aTokenValue,d[2]=f;else"header"!=b.aTokenWhere||c.hasOwnProperty(b.aTokenName)||(c[b.aTokenName]=b.aTokenValue);if(je("String",de)){var u=Fg.execFunc(de,[d[2],d[1]]);if(u.valid&&u.result){var f=d[2];c["X-Correlation-Id"]=u.result,-1==f.indexOf("?")?f+="?X_Correlation_Id="+u.result:"?"==f[f.length-1]?f+="X_Correlation_Id="+u.result:f+="&X_Correlation_Id="+u.result,d[2]=f}}/get/i.test(d[1])&&(content=void 0,d.length>3&&(d[3]=void 0),d.length>4&&(d[4]=void 0)),$.ajax({headers:c,type:d[1],processData:!1,url:d[2],contentType:d.length>3?d[3]:void 0,data:d.length>4?d[4]:void 0,success:function(t,a,i,r,n,s,o,l){return function(d,c,u){t[0]&&Fg.freezeUI(!1),r.push(o?[i,!0,l?u.responseJSON?u.responseJSON:u.responseText:u]:1),a&&a(i,!0,l?u.responseJSON?u.responseJSON:u.responseText:u),n==r.length&&(o&&r.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(d,a,l,i,r,n,s,o),error:function(t,a,i,r,n,s,o){return function(l,d,c){t[0]&&Fg.freezeUI(!1),r.push(o?[i,!1,l,d,c]:0),s.push(1),a&&a(i,!1,l,d,c),n==r.length&&(o&&r.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(d,a,l,i,r,n,s)})}}je("Array",e)&&!je("Array",e[0])&&(e=[e],o=1),this.repeat=function(e,t,a,i,s){n[0]=a?1*a:-1,n[1]=0,r=setInterval(function(e,t,a,i,r){return function(){e.push(t).proceed(undefined,r),a[0]>0&&(a[1]=a[1]+1,a[0]==a[1]&&e.stop())}}(this,e,i,0,s),t)},this.stop=function(){r&&clearInterval(r)},this.schedule=function(e,t,a,i,r){var n=t;a&&(n=(t=Fg.getDateUtil(t,a).date().getTime())-(new Date).getTime()),n<=0&&(n=0),setTimeout(function(e,t,a,i){return function(){e.push(t).proceed(a,i)}}(this,e,i,r),n)},this.push=function(e){return f.push(e),this},this.proceed=function(e,t,a){return f.length>0&&(o=f.length,m(this,f,e,s,o,c,u=!0===t,a)),f=[],this},this.done=function(e){return l?(u?l(s):l(),this):(l=e,this)},this.fail=function(e){return d?(u?d(s):d(),this):(d=e,this)},m(this,e,t,s,o,c,u,i)},this.ApisPromiseMT=function(e,t,a,i,r){var n,s=[],o=e?e.length:0,l=void 0,d=void 0,c=[],u=!0===a,f=[],m=[],h=[0];function g(e,t,a,i,r,n,s,o,l){if(t&&0!=t.length)for(var d=0;d<t.length;d++){var c=t[d],u=l.length>d?l[d]:void 0;et.apply(void 0,c).done(function(t,a,i,r,n,s,o,l,d){return function(t,c,u){r.push(o?[i,!0,l?u.responseJSON?u.responseJSON:u.responseText:u,d]:1),a&&a(i,!0,l?u.responseJSON?u.responseJSON:u.responseText:u,d),n==r.length&&(o&&r.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(0,a,d,i,r,n,s,o,u)).fail(function(t,a,i,r,n,s,o,l){return function(t,d){r.push(o?[i,!1,d,l,d.statusText]:0),s.push(1),a&&a(i,!1,d,l,d.statusText),n==r.length&&(o&&r.sort((function(e,t){return e[0]-t[0]})),0==s.length?e.done():e.fail())}}(0,a,d,i,r,n,s,u))}}je("Array",e)&&!je("Array",e[0])&&(e=[e],o=1),je("Array",r)&&!je("Array",r[0])&&(r=[r]),this.repeat=function(e,t,a,i,r){h[0]=a?1*a:-1,h[1]=0,n=setInterval(function(e,t,a,i,r){return function(){e.push(t).proceed(i,r),a[0]>0&&(a[1]=a[1]+1,a[0]==a[1]&&e.stop())}}(this,e,i,h,r),t)},this.stop=function(){n&&clearInterval(n)},this.schedule=function(e,t,a,i,r){var n=t;a&&(t=Fg.getDateUtil(t,a).date().getTime(),n=(new Date).getTime()-t),setTimeout(function(e,t,a,i){return function(){e.push(t).proceed(a,i)}}(this,e,i,r),n)},this.push=function(e,t){return f.push(e),m.push(t),this},this.proceed=function(e,t,a){return f.length>0&&(o=f.length,g(this,f,e,s,o,c,u=!0===t,a,m)),f=[],m=[],this},this.done=function(e){return l?(u?l(s):l(),this):(l=e,this)},this.fail=function(e){return d?(u?d(s):d(),this):(d=e,this)},g(this,e,t,s,o,c,u,i,r)},this.columnCount=function(e){if(Fg.is("String",e)&&(e=$(e)),!e||0==e.length)return 0;var t=0;return $("tr:nth-child(1) th").each((function(){$(this).attr("colspan")?t+=+$(this).attr("colspan"):t++})),0==t&&$("tr:nth-child(1) td").each((function(){$(this).attr("colspan")?t+=+$(this).attr("colspan"):t++})),t},this.moveColumn=function(e,t,a,i){var r;t!=a&&e.find("tr").each((function(){var e=(r=$(this).children("th, td")).eq(t).is(":visible");!1===i&&e?r.eq(t).addClass("hidden"):!0!==i||e||r.eq(t).removeClass("hidden"),r.eq(t).detach().insertBefore(r.eq(a))}))},this.table=function(e){var t;function a(e,t,i){if(e&&0!=e.length){var r,n=e.state(),s=n.pagenum*n.count,o=s+n.count,l=e.find("._t_tb");e.closest("._t_mc").children("._t_gc").addClass("hidden");var d=e.closest("._t_mc").data("config");if(!0!==n.nodata){if(r=n.data.length,o=o>n.data.length?n.data.length:o,l.html(""),!0===n.sort){var c=[].concat(n.data);e.find('._t_hc[faug-sort-dir="asc"],._t_hc[faug-sort-dir="desc"],._t_hc[faug-sort-dir="none"]').each((function(){var e="none"!==$(this).attr("faug-sort-dir");e?(e="asc"===$(this).attr("faug-sort-dir"),$(this).parent().find("i").removeClass(),e?$(this).parent().find("i").addClass("fa fa-fw fa-sort-asc"):$(this).parent().find("i").addClass("fa fa-fw fa-sort-desc")):(e=void 0,$(this).parent().find("i").removeClass(),$(this).parent().find("i").addClass("fa fa-fw fa-sort"));var t=$(this).attr("faug-sort-fnc"),a=$(this).attr("faug-sort-prop");c.sort((function(i,r){var n=i[a],s=r[a];return"number"==t&&(n=parseInt(n),s=parseInt(s)),void 0===e||!0===e?n<s?-1:n>s?1:0:n>s?-1:n<s?1:0}))}))}for(var u=s;u<o;u++){var f=$(Fg.templatize(Ne.table.items.tbodytr,{},!1,void 0,void 0,"tbodytr"));f.attr("faug-row-pos",u);for(var m=0;m<n.cols.length;m++){var h=n.cols[m];if(!0===h.isLoT)f.append(Fg.templatize(Ne.table.items.tbodytd,{content:c[u][h.ct]},!1,void 0,void 0,"tbodytd"));else{var g=Fg.templatize(h.ct,{row:c[u]},!0);f.append(g)}}l.append(f)}}else{var p=e.find(">tbody>tr").not(".faug-hiden-old").not(".faug-hiden-srch");o=o>(r=p.length)?r:o;var v=(r%n.count>0?1:0)+Math.floor(r/n.count);if(!0===d.pagination.invokeApiOnChange&&(r<n.count?e.closest("._t_mc").find("._t_f31,.next").addClass("hidden"):e.closest("._t_mc").find("._t_f31,.next").removeClass("hidden")),n.pagenum>=v&&!0!==d.pagination.invokeApiOnChange)return 0==r?(e.closest("._t_mc").find("._t_fc").addClass("hidden"),e.closest("._t_mc").children("._t_gc").removeClass("hidden")):(e.closest("._t_mc").find("._t_fc").removeClass("hidden"),e.closest("._t_mc").children("._t_gc").addClass("hidden")),void F(e,d);!0===d.pagination.invokeApiOnChange&&(s=0,o=d.count);for(u=0;u<s;u++)void 0===$(p[u]).attr("faug-row-pos")&&$(p[u]).attr("faug-row-pos",u),$(p[u]).addClass("hidden");for(u=s;u<o;u++)void 0===$(p[u]).attr("faug-row-pos")&&$(p[u]).attr("faug-row-pos",u),$(p[u]).removeClass("hidden");for(u=o;u<r;u++)void 0===$(p[u]).attr("faug-row-pos")&&$(p[u]).attr("faug-row-pos",u),$(p[u]).addClass("hidden");!0===n.sort&&e.find('._t_hc[faug-sort-dir="asc"],._t_hc[faug-sort-dir="desc"],._t_hc[faug-sort-dir="none"]').each((function(){var a=1*$(this).attr("faug-tbl-pos");if(t==a){var i="none"!==$(this).attr("faug-sort-dir");i?(i="asc"===$(this).attr("faug-sort-dir"),$(this).closest("._t_hc").find("i").removeClass(),i?$(this).closest("._t_hc").find("i").addClass("fa fa-fw fa-sort-asc"):$(this).closest("._t_hc").find("i").addClass("fa fa-fw fa-sort-desc")):(i=void 0,$(this).closest("._t_hc").find("i").removeClass(),$(this).closest("._t_hc").find("i").addClass("fa fa-fw fa-sort"));var r=$(this).attr("faug-sort-fnc");$(this).attr("faug-sort-prop");p.sort((function(e,t){var n=void 0===i?1*$(e).attr("faug-row-pos"):$($(e).children("tbody tr td")[a]).text(),s=void 0===i?1*$(t).attr("faug-row-pos"):$($(t).children("tbody tr td")[a]).text();return"number"!=r&&(isNaN(n)||isNaN(s))||(n=parseInt(n),s=parseInt(s)),void 0===i||!0===i?n<s?-1:n>s?1:0:n>s?-1:n<s?1:0})),$.each(p,(function(e,t){$(t).detach()})),$.each(p,(function(t,a){e.find(">tbody").append(a)}))}}))}F(e,d);var y=e.closest("._t_mc").find("._t_f21");v=(r%n.count>0?1:0)+Math.floor(r/n.count);i&&(e.state("pagenum",0),n.pagenum=0);var b=v>0?n.pagenum+1:0,_=(b+"").length<=2?2:(b+"").length;y.find("._t_f211").css("width",10*_+"px"),y.find("._t_f211").val(b),y.find("._t_f212").html(v),y.find("._t_f211").off();if(y.find("._t_f211").on("keypress",function(e,t){return function(i){var r=i.keyCode||i.which,n=$(this).val();r=i.keyCode||i.which;if(n+=r=String.fromCharCode(r),isNaN(n))return $(this).val(e),!1;if((n*=1)>t||n<0||n==e)return $(this).val(e),!1;var s=$(this).closest("._t_mc").data("config"),o=$(this).closest("._t_mc").find("._t_tl"),l=n-1,d=1*o.state("count"),c=o.state("data"),u=o.state("nodata"),f=1*o.state("tcount");if(c&&l*d<c.length||u&&l*d<f||u&&!0===s.pagination.invokeApiOnChange)if(!0===s.pagination.invokeApiOnChange){var m=l;o.state("pagenum",m);var h=d,g=m*h;Fg.ic(s.schemaName,{_f_start:g,_f_count:h,_f_pagenum:m,_f_search_text:""},s.op)}else{l=l;var p=$("._t_mc").find("._t_ps").val();o.state("pagenum",l),a(o),$("._t_mc").find("._t_ps").val(p)}return!1}}(b,v)),0==r?(e.closest("._t_mc").find("._t_fc").addClass("hidden"),e.closest("._t_mc").children("._t_gc").removeClass("hidden")):(e.closest("._t_mc").find("._t_fc").removeClass("hidden"),e.closest("._t_mc").children("._t_gc").addClass("hidden")),d&&d.afterPaintCb&&Fg.execFunc(d.afterPaintCb,[e]),d&&d.stickyHdrOffsetFn){var w=Fg.execFunc(d.stickyHdrOffsetFn,[e]);w.valid&&w.result&&!isNaN(w.result)&&($.fn.stickyTableHeaders?e.stickyTableHeaders({fixedOffset:w.result}):console.warn("Please include jquery.stickytableheaders.min.js script"))}}function F(e,t){if(e.find("thead>tr").eq(0).find("th").length>0){var a=e.data("col-settings");function i(e,t){if(e&&Object.keys(e).length>0){var a=[];t.find("thead>tr").eq(0).find("th").each((function(e){a.push($(this).text().trim())}));var i=t.find("tr");i.each((function(){for(var t=$(this).children("th, td"),i=0;i<a.length;i++){t.eq(i).data("op",e[a[i]][0]);var r=!t.eq(e[a[i]][0]).hasClass("hidden");!e[a[i]][1]&&r?t.eq(e[a[i]][0]).addClass("hidden"):e[a[i]][1]&&!r&&t.eq(e[a[i]][0]).removeClass("hidden")}})),i.html((function(e){return $(this).children().sort((function(e,t){return $(e).data("op")-$(t).data("op")}))})),t.data("col-settings",e)}}if(!a){var r=(Fg.isN(Fg.getRoute())?location.href+"":Fg.getRoute())+(e.attr("id")?e.attr("id"):e.attr("class"));if(t.tblSettingsIdFunc){var n=Fg.execFunc(t.tblSettingsIdFunc,[e]);n.valid&&n.result&&(r=n.result);var s=localStorage.getItem(r);if(s)try{a=JSON.parse(s),Fg.freezeUI(!0),i(a,e),Fg.freezeUI(!1)}catch(e){}}else t.tblSettingsFunc&&Fg.execFunc(t.tblSettingsFunc,[e,i])}}}}function i(e,t,i,r,n,s){if(n=n||{},Fg.is("String",i)&&(i=$(i)),i&&0!=i.length){s.ttbl=i;var o=i.parent().hasClass("_t_bc"),l=void 0===e.download||!0===e.download.enabled,d=void 0===e.downloadpdf||!0===e.downloadpdf.enabled;if(Ne.table.container.items.header.items.itemperpage_yes.items={options:""},Ne.table.container.items.header.items.searchdownload.items.search.items={_f_search_text:""},e.search&&e.search.enabled&&(Ne.table.container.items.header.items.searchdownload.items.search.items._f_search_text=n._f_search_text?n._f_search_text:""),o)m=i.closest("._t_mc"),h=i.closest("._t_hc"),g=i.closest("._t_bc"),p=i.closest("._t_gc"),i.closest("._t_fc");else{var c={page_enabled:e.pagination&&!0===e.pagination.enabled,search_enabled:e.search&&e.search.enabled,dwnld_enabled:l,dwnldpdf_enabled:d,invoke_apionchange:e.pagination&&!0===e.pagination.invokeApiOnChange,options:""};if(c.page_enabled&&e.pagination.numpages){r=e.pagination.numpages[0],n&&n._f_count&&n._f_count>0&&(r=n._f_count),n&&!isNaN(n._f_count)&&0==n._f_count&&(r=0);for(var u=0;u<e.pagination.numpages.length;u++){var f=0==e.pagination.numpages[u]?"All":e.pagination.numpages[u];Ne.table.container.items.header.items.itemperpage_yes.items.options+=Fg.templatize(Ne.table.items.pagelistitem,{display:f,pagenum:e.pagination.numpages[u],selected:1*r===e.pagination.numpages[u]?"selected":""},!1,void 0,void 0,"pagelistitem")}}var m,h=(m=$(Fg.templatize(Fg.getTemplate(Ne.table.container,c),{},!1))).find("._t_hc"),g=m.find("._t_bc"),p=m.find("._t_gc");m.find("._t_fc");Ne.table.container.items.header.items.itemperpage_yes.items={options:""},Ne.table.container.items.header.items.searchdownload.items.search.items={search_text:""}}m.data("config",e);var v;r=-1;if(e.tFunc){var y=Fg.execFunc(e.tFunc,[t]);y.valid&&y.result&&Fg.is("Array",y.result)&&(t=y.result)}if(t&&Fg.is("Array",t)){if(0==t.length)i.closest("._t_mc").find("._t_fc").addClass("hidden"),p.removeClass("hidden");else{i=Fg.templatize(Ne.table.items.table,{},!1,void 0,void 0,"table");r=r<=0?t.length:r,i.state({pagenum:0,count:r,cols:e.columns,data:t,sort:e.sort&&e.sort.enabled}),g.append(i);if(e.columns){var b=Fg.getString(Ne.table.items.thead),_=Fg.getString(Ne.table.items.theadtr);b.append(_),i.append(b);for(u=0;u<e.columns.length;u++){var w=e.columns[u],F=$(Fg.templatize(Ne.table.items.theadth,{},!1,void 0,void 0,"theadth"));if(F.attr("faug-tbl-pos",u),F.html(w.ht+"-"),e.sort&&e.sort.enabled&&e.sort.fields){for(var x=!1,O="",k="",T=0;T<e.sort.fields.length;T++)if(-1!=e.sort.fields[T].indexOf(u+1)){x=!0,k=e.sort.fields[T][1],O=e.sort.fields[T].length>2?e.sort.fields[T][2]:"";break}x&&(F.attr("faug-sort-dir","none"),F.attr("faug-sort-fnc",O),F.attr("faug-sort-prop",k))}_.append(F)}var S=Fg.templatize(Ne.table.items.tbody,{},!1,void 0,void 0,"tbody");i.append(S),a(i)}}$(e.parent).append(m)}else{i.addClass("_t_tl"),i.find(">thead").addClass("_t_th"),i.find(">thead>tr").addClass("_t_hr"),i.find(">thead>tr>th").addClass("_t_hc"),i.find(">tbody").addClass("_t_tb"),i.find(">tbody>tr").addClass("_t_rw");i.find(">tbody>tr").length,i.find(">tbody>tr.hidden").length;i.find(">tbody>tr").removeClass("faug-hiden-old"),i.find(">tbody>tr.hidden").addClass("faug-hiden-old");var A=i.parent();o||(i.appendTo(g),A.append(m));var N=0;i.find(">thead>tr>th").each((function(){$(this).attr("faug-tbl-pos",N++),$(this).attr("faug-sort-dir","none"),$(this).attr("faug-sort-fnc",""),$(this).attr("faug-sort-prop",""),o||$(this).append(Ne.table.items.sorthtml)})),i.state({pagenum:n._f_pagenum?n._f_pagenum:0,count:n._f_count?n._f_count:e.pagination.numpages[0],sort:e.sort&&e.sort.enabled,nodata:!0,tcount:i.find(">tbody>tr").not("faug-hiden-old").length}),a(i)}if(l&&(h.find("._t_dw").off("click"),h.find("._t_dw").on("click",function(e){return function(){e.download()}}(s))),d&&(h.find("._t_dwpdf").off("click"),h.find("._t_dwpdf").on("click",function(e){return function(){e.downloadPdf()}}(s))),m.find("._t_stg").off("click"),m.find("._t_stg").on("click",function(e){return function(){var t=e.data("config"),a=e.find("._t_tl"),i="",r=[];if(a.find("th").length>0){var n=a.data("col-settings");if(n){for(var s=Object.keys(n).length,o=0;o<s;o++)for(var l in n)if(n.hasOwnProperty(l)&&o==n[l][0]){r.push(l);var d={name:l,active:n[l][1]?"active":""};i+=Fg.templatize(Ne.table.settings.items.itemshtml.template,d,!1);break}}else a.find("thead>tr").eq(0).find("th").each((function(){r.push($(this).text().trim());var e={name:$(this).text().trim(),active:$(this).is(":visible")?"active":""};i+=Fg.templatize(Ne.table.settings.items.itemshtml.template,e,!1)}));var c=Ne.table.settings.template.replace("<%itemshtml%>",i);Fg.showModalForm(c,"_table_settings_","<h5>Column Settings</h5>",!0,"",!1),$("#_table_settings_").find("._t_stg_lst").sortable({revert:!0}),$("#_table_settings_").find("._t_stg_lst").find("li").dblclick((function(){$(this).toggleClass("active")})),$("#_table_settings_").find("._t_stg_but").click((function(){var e=0,i=[],r={};$("#_table_settings_").find("._t_stg_lst").find("li").each((function(){r[$(this).text().trim()]=[e++,$(this).hasClass("active")]}));i=[];a.find("thead>tr").eq(0).find("th").each((function(e){i.push($(this).text().trim())}));var n=a.find("tr");n.each((function(){for(var e=$(this).children("th, td"),t=0;t<i.length;t++){e.eq(t).data("op",r[i[t]][0]);var a=!e.eq(r[i[t]][0]).hasClass("hidden");!r[i[t]][1]&&a?e.eq(r[i[t]][0]).addClass("hidden"):r[i[t]][1]&&!a&&e.eq(r[i[t]][0]).removeClass("hidden")}})),n.html((function(e){return $(this).children().sort((function(e,t){return $(e).data("op")-$(t).data("op")}))})),a.data("col-settings",r);var s=(Fg.isN(Fg.getRoute())?location.href+"":Fg.getRoute())+(a.attr("id")?a.attr("id"):a.attr("class"));if(t.tblSettingsIdFunc){var o=Fg.execFunc(t.tblSettingsIdFunc,[a]);o.valid&&o.result&&(s=o.result,localStorage.setItem(s,JSON.stringify(r)))}else t.onTblSettingsSave&&Fg.execFunc(t.onTblSettingsSave,[a,JSON.stringify(r)]);$("#_table_settings_").modal("hide")})),$("#_table_settings_").modal("show")}}}(m)),e.sort&&e.sort.enabled&&m.find("._t_hc[faug-sort-dir]").on("click",(function(e,t){var i=$(this).attr("faug-sort-dir");"none"==i?$(this).attr("faug-sort-dir","asc"):"asc"==i?$(this).attr("faug-sort-dir","desc"):$(this).attr("faug-sort-dir","none"),a($(this).closest("._t_mc").find("._t_tl"),1*$(this).attr("faug-tbl-pos"))})),e.search&&e.search.enabled&&e.search.fields){var C=m.find("._t_sb"),P=m.find("._t_sb");if(!0===e.search.invokeApiOnChange&&e.search.events){if(e.search.selector&&$(e.search.selector).length>0?(C.off(),C.addClass("hidden"),$(e.search.selector).off(),C=$(e.search.selector)):C.off(),n&&"search"===n._f_originated_from){C.focus();var j=C[0].value;C.val("").val(j)}for(var D in e.search.retainSearchVal,e.search.events)if(e.search.events.hasOwnProperty(D))for(var I=e.search.events[D],B=D.split(","),E=0;E<B.length;E++)C.on(B[E]+"."+E,function(e,t,a){return function(i){if($(this).attr("data-regex")&&Ae){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!new RegExp($(this).attr("data-regex")).test($(this).val()))return Fg.execFunc(Ae,[$(this)]),i.stopPropagation(),!1}else if(Se&&Ae){if(""!=$(this).val()&&"file"!=$(this).prop("type")&&!Se.test($(this).val()))return Fg.execFunc(Ae,[$(this)]),i.stopPropagation(),!1}else if(ke&&"file"!=$(this).prop("type")&&""!=$(this).val()&&!ke.test($(this).val()))return Fg.execFunc(Te,[$(this)]),i.stopPropagation(),!1;var r=t.parent().parent().parent().parent().find("._t_tl").state();e.crudop&&(e.crudop.vars||(e.crudop.vars={}),e.crudop.vars._f_start="value@0",e.crudop.vars._f_count="value@"+r.count,e.crudop.vars._f_pagenum="value@1",e.crudop.vars._f_search_text="value@"+$(this).val(),e.crudop.vars._f_originated_from="value@search"),t.val($(this)[0].value);var n=function(e,t,a){Ue(e)(t,a)||""!=a.val()||Ue(e)(t,a,void 0,void 0,!0)};"keyup"!=a.toLowerCase()&&"keydown"!=a.toLowerCase()&&"keypress"!=a.toLowerCase()||(n=function(e,t,a){clearTimeout(We),We=setTimeout(function(e,t,a){return function(){Ue(e)(t,a)||""!=a.val()||Ue(e)(t,a,void 0,void 0,!0)}}(e,t,a),1e3)}),n(e,i,t)}}(I,P,B[E]))}else Fg.useComponent("search-filter-table-rows",[[C,P],"keyup",function(e){return e.closest("._t_mc").find("._t_tl").find("._t_rw")},function(e){return e.children("td")},e.search.type,(v=e.search.fields,function(e,t){return-1!=v.indexOf(t+1)}),function(e){var t=e[0].closest("._t_mc").find("._t_tl");t.find(">tbody>tr").not(".hidden").removeClass("faug-hiden-srch"),t.find(">tbody>tr.hidden").addClass("faug-hiden-srch"),a(t,void 0,!0),e[0].focus()},[ke,Te]])}e.pagination&&!0===e.pagination.enabled&&(e.pagination.numpages&&(m.find("._t_ps").off("change"),m.find("._t_ps").on("change",(function(){var e=$(this).closest("._t_mc").data("config"),t=$(this).closest("._t_mc").find("._t_tl"),i=1*t.state("pagenum"),r=1*$(this).val(),n=t.state("data"),s=t.state("nodata"),o=1*t.state("tcount");if((n&&n.length/r<=i||s&&o/r<=i||s&&!0===e.pagination.invokeApiOnChange)&&(i=0),t.state("count",r),!0===e.pagination.invokeApiOnChange){t.state("pagenum",1);var l=r;Fg.ic(e.schemaName,{_f_start:0,_f_count:l,_f_pagenum:0,_f_search_text:$(this).closest("._t_mc").find("._t_sb").val()},e.op)}else t.state("pagenum",i),a(t)}))),m.find("._t_f31").off("click"),m.find("._t_f31").on("click",(function(){var e=$(this).closest("._t_mc").data("config"),t=$(this).closest("._t_mc").find("._t_tl"),i=1*t.state("pagenum"),r=1*t.state("count"),n=t.state("data"),s=t.state("nodata"),o=1*t.state("tcount");if(n&&(i+1)*r<n.length||s&&(i+1)*r<o||s&&!0===e.pagination.invokeApiOnChange)if(!0===e.pagination.invokeApiOnChange){var l=i+1;t.state("pagenum",l);var d=r,c=l*d;Fg.ic(e.schemaName,{_f_start:c,_f_count:d,_f_pagenum:l,_f_search_text:$(this).closest("._t_mc").find("._t_sb").val()},e.op)}else{i+=1;var u=$("._t_mc").find("._t_ps").val();t.state("pagenum",i),a(t),$("._t_mc").find("._t_ps").val(u)}})),m.find("._t_f11").off("click"),m.find("._t_f11").on("click",(function(){var e=$(this).closest("._t_mc").data("config"),t=$(this).closest("._t_mc").find("._t_tl"),i=1*t.state("pagenum"),r=1*t.state("count");if(i>0||!0===e.pagination.invokeApiOnChange&&t.state("pagenum")&&t.state("pagenum")>0)if(!0===e.pagination.invokeApiOnChange){var n=i-1;t.state("pagenum",n);var s=r,o=n*s;Fg.ic(e.schemaName,{_f_start:o,_f_count:s,_f_pagenum:n,_f_search_text:$(this).closest("._t_mc").find("._t_sb").val()},e.op)}else{i-=1;var l=$("._t_mc").find("._t_ps").val();t.state("pagenum",i),a(t),$("._t_mc").find("._t_ps").val(l)}})))}}function r(e,a,i){if(a&&a.id&&(e="#"+a.id),!e&&t)return t;if(Fg.is("String",e)&&(e=$(e)),e){e.parent();var r=0;e.find(">thead").length>0?0==(r=e.find(">thead>tr>th").length)&&(r=e.find(">thead>tr>td").length):r=e.find(">tbody>tr>td").length}if(a?(a.sort||(a.sort={enabled:!0,fields:[],invokeApiOnChange:!1}),a.search||(a.search={enabled:!0,fields:[],type:"ci",invokeApiOnChange:!1}),a.pagination||(a.pagination={enabled:!0,numpages:[10,25,50,100,200],invokeApiOnChange:!1})):a={sort:{enabled:!0,fields:[],invokeApiOnChange:!1},search:{enabled:!0,fields:[],type:"ci",invokeApiOnChange:!1},pagination:{enabled:!0,numpages:[10,25,50,100,200],invokeApiOnChange:!1}},e){if(!a.sort.fields||Fg.is("Array",a.sort.fields)&&0==a.sort.fields.length){a.sort.fields=[];for(var n=0;n<r;n++)a.sort.fields.push(n+1)}if(!a.search.fields||Fg.is("Array",a.search.fields)&&0==a.search.fields.length){a.search.fields=[];for(n=0;n<r;n++)a.search.fields.push(n+1)}}return t=a}return this.fromHtml=function(e,a){r(e,t)&&i(t,void 0,e,a,void 0,this)},this.paint=function(e,a,r){t&&(t.id&&(e="#"+t.id),i(t,a,e,void 0,r,this))},this.download=function(e,a){t&&(Fg.isN(e)&&(e="data_"+(new Date).getTime()+".csv"),Fg.tableToCSV(this.ttbl,e,a))},this.downloadPdf=function(e,a,i,r,n,s,o,l){t&&Fg.downloadPdf(this.ttbl,e,a,i,r,n,s,o,l)},this.c=r(void 0,e),this},this.tableToCSV=function(e,t,a,i,r){var n=Fg.isN(t)?"report.csv":t;r=!1!==r,i=!i||i.length>1?",":i;var s=[];a&&""!==a&&""!=a.trim()&&s.push(a+"\n\n\n");for(var o=e.children("thead").children("tr"),l=e.children("tbody").children("tr"),d=0;d<1;d++){for(var c=[],u=$(o[d]).children("td, th"),f=0;f<u.length;f++){-1!=(m=u[f].innerText).indexOf("\n")&&(m=m.replace(/\n/g,"\\n")),-1!=m.indexOf('"')&&(m=m.replace(/"/g,'\\"')),c.push((r?'"':"")+m+(r?'"':""))}s.push(c.join(i))}for(d=0;d<l.length;d++){for(c=[],u=$(l[d]).children("td, th"),f=0;f<u.length;f++){var m;-1!=(m=u[f].innerText).indexOf("\n")&&(m=m.replace(/\n/g,"\\n")),r&&-1!=m.indexOf('"')&&(m=m.replace(/"/g,'\\"')),m.indexOf(i),m.trim().startsWith("=")&&(m="'"+m),c.push((r?'"':"")+m+(r?'"':""))}s.push(c.join(i))}var h=new Blob([s.join("\n")],{type:"text/csv"}),g=document.createElement("a");g.download=n,g.href=window.URL.createObjectURL(h),g.style.display="none",document.body.appendChild(g),g.click()},this.paintTable=function(e,t){var a=t||{};$(e).closest("._t_mc").data("config")&&(a=$(e).closest("._t_mc").data("config")),new Fg.table(a).fromHtml(e)},this.downloadPdf=function(e,t,a,i,r,n,s,o,l){Fg.isN(a)&&(a=""),(Fg.isN(t)||isNaN(t))&&(t=e.children("thead").children("tr")?e.children("thead").children("tr").eq(0).find("th").length>0?e.children("thead").children("tr").eq(0).find("th").length:e.children("thead").children("tr").eq(0).find("td").length:e.children("tbody").children("tr")?e.children("tbody").children("tr").eq(0).find("td").length:11);var d,c=t&&t>10?new jsPDF("l"):new jsPDF;d=t&&t>10?{html:Fg.is("String",e)?"#"+e:e[0],theme:"grid",didDrawPage:function(e){c.setFontSize(20),c.setTextColor(40),c.setFontStyle("normal"),i&&c.addImage(i,"JPEG",e.settings.margin.left,15,10,10),c.text(a,e.settings.margin.left,22);var t="Page "+c.internal.getNumberOfPages();"function"==typeof c.putTotalPages&&(t+=" of {total_pages_count_string}"),c.setFontSize(10);var r=c.internal.pageSize,n=r.height?r.height:r.getHeight();c.text(t,e.settings.margin.left,n-10)},styles:{overflow:"linebreak",cellWidth:12,minCellWidth:5,fontSize:5},margin:{top:30}}:{html:Fg.is("String",e)?"#"+e:e[0],theme:"grid",didDrawPage:function(e){c.setFontSize(20),c.setTextColor(40),c.setFontStyle("normal"),i&&c.addImage(i,"JPEG",e.settings.margin.left,15,10,10),c.text(a,e.settings.margin.left,22);var t="Page "+c.internal.getNumberOfPages();"function"==typeof c.putTotalPages&&(t+=" of {total_pages_count_string}"),c.setFontSize(10);var r=c.internal.pageSize,n=r.height?r.height:r.getHeight();c.text(t,e.settings.margin.left,n-10)},margin:{top:30}},Fg.isN(n)||(d.didDrawPage=n),Fg.isN(s)||(d.styles=s),Fg.isN(o)||(d.theme=o),Fg.isN(l)||(d.margin=l),c.autoTable(d),"function"==typeof c.putTotalPages&&c.putTotalPages("{total_pages_count_string}"),c.save(Fg.isN(r)?"report.pdf":r)},"undefined"!=typeof Promise&&(this.FgRecorder=function(e){this.silent=!0===e,this.cmdlist=[],this.typedValue="",this.target,this.event,this.commands=[],this.lat,this.st=0;var t,a=(t=this,function(a){var i=a.target;if(""!=t.typedValue){var r='type "'+t.typedValue+"\" xpath@'"+Fg.getXPath($(t.target))+"'";e?t.cmdlist.push(r):console.log(r)}var n=(new Date).getTime();t.lat&&n-t.lat>100&&(r="sleep "+(n-t.lat)/1e3,t.silent?t.cmdlist.push(r):console.log(r)),t.typedValue="",t.target=i,t.event="click",t.lat=(new Date).getTime(),i.options&&i.options.selectedIndex?(t.event="select",r="select index@"+(i.options.selectedIndex-1)+" xpath@'"+Fg.getXPath($(i))+"'",t.silent?t.cmdlist.push(r):console.log(r)):(r="click xpath@'"+Fg.getXPath($(i))+"'",t.silent?t.cmdlist.push(r):console.log(r))}),i=function(e){return function(t){var a=t.target,i=t.keyCode;if(8==i)e.typedValue.length>0&&(e.typedValue=e.typedValue.substring(0,e.typedValue.length-1));else if(9==i){if(""!=e.typedValue){var r=(new Date).getTime();if(e.lat&&r-e.lat>100){var n="sleep "+(r-e.lat)/1e3;e.silent?e.cmdlist.push(n):console.log(n)}n='type "'+e.typedValue+"\" xpath@'"+Fg.getXPath($(e.target))+"'";e.silent?e.cmdlist.push(n):console.log(n)}e.typedValue=""}e.target=a,e.event="keyup",13!=i&&(e.lat=(new Date).getTime())}}(this),r=function(e){return function(t){var a=t.target;e.target=a,e.typedValue+=String.fromCharCode(t.which),e.event="keypress",13!=t.keyCode&&(e.lat=(new Date).getTime())}}(this);this.startRecording=function(){this.cmdlist.length=0,this.silent?this.cmdlist.push("open chrome"):console.log("open chrome"),this.silent?this.cmdlist.push("goto "+document.location):console.log("goto "+document.location),document.addEventListener("click",a,!0),document.addEventListener("keyup",i,!0),document.addEventListener("keypress",r,!0)},this.stopRecording=function(){this.silent||this.emit();var e=Fg.copy(this.cmdlist);return this.cmdlist.length=0,document.removeEventListener("click",a,!0),document.removeEventListener("keyup",i,!0),document.removeEventListener("keypress",r,!0),this.typedValue="",this.target=null,this.event="",this.lat=null,e};var n=/type "((?:[^"\\]|\\.)*)" xpath@"((?:[^"\\]|\\.)*)"/,s=/type "((?:[^"\\]|\\.)*)" xpath@'((?:[^'\\]|\\.)*)'/,o=/type '((?:[^"\\]|\\.)*)' xpath@"((?:[^"\\]|\\.)*)"/,l=/type '((?:[^'\\]|\\.)*)' xpath@'((?:[^'\\]|\\.)*)'/,d=/click xpath@"((?:[^"\\]|\\.)*)"/,c=/click xpath@((?:[^'\\]|\\.)*)'/,u=/select index@([0-9]+) xpath@"((?:[^"\\]|\\.)*)"/,f=/select index@([0-9]+) xpath@'((?:[^'\\]|\\.)*)'/,m=/sleep ([0-9\.]+)/;function h(e){return n.test(e)?n:s.test(e)?s:o.test(e)?o:l.test(e)?l:void 0}function g(e){return d.test(e)?d:c.test(e)?c:void 0}function p(e){return u.test(e)?u:f.test(e)?f:void 0}return this.emit=function(){console.log(this.cmdlist.join("\n"))},this.play=function(e){if(Fg.is("Array",e)){this.st=0;var t=Promise.resolve(),a=this;e.forEach((function(e){t=t.then((function(){return a.execInt(e)})).then((function(e){e&&console.log(e)}))}))}else Fg.is("String",e)&&this.execute(e)},this.execute=function(e){this.execInt(e).then((function(e){e&&console.log(e)}))},this.execInt=function(e){var t="Invalid command";if(m.test(e)){if(i=m.exec(e)){var a=1*i[1];this.st+=a,t=void 0}}else if(h(e)){var i=h(e).exec(e),r=this.st;if(this.st=0,i){a=i[1];var n=i[2];if(s=document.evaluate(n,document,null,XPathResult.ANY_TYPE,null).iterateNext())return new Promise((function(e){r<=0?($(s).focus(),$(s).val(a),$(s).blur(),e('type "'+a+"\" xpath@'"+n+"'")):(console.log("sleep "+1e3*r),setTimeout(function(e,t,a,i){return function(){$(e).focus(),$(e).val(t),$(e).blur(),i('type "'+t+"\" xpath@'"+a+"'")}}(s,a,n,e),1e3*r))}))}}else if(g(e)){i=g(e).exec(e),r=this.st;if(this.st=0,i){n=i[1];if(s=document.evaluate(n,document,null,XPathResult.ANY_TYPE,null).iterateNext())return new Promise((function(e){r<=0?($(s).click(),$(s).focus(),e("click xpath@'"+n+"'")):(console.log("sleep "+1e3*r),setTimeout(function(e,t,a){return function(){$(e).click(),$(e).focus(),a("click xpath@'"+t+"'")}}(s,n,e),1e3*r))}))}}else if(p(e).test(e)){i=p(e).exec(e),r=this.st;if(this.st=0,i){var s;a=1*i[1];if(n=(n=i[2]).replace(/\\'/g,"'"),s=document.evaluate(n,document,null,XPathResult.ANY_TYPE,null).iterateNext())return new Promise((function(e){r<=0?($(s)[0].selectedIndex=a,e("select index@"+a+" xpath@'"+n+"'")):(console.log("sleep "+1e3*r),setTimeout(function(e,t,a,i){return function(){$(e)[0].selectedIndex=t,i("select index@"+t+" xpath@'"+a+"'")}}(s,a,n,e),1e3*r))}))}}return new Promise((function(e){e(t)}))},this}),"undefined"!=typeof Worker&&(this.FaugWebWorker=function(e,t,a){var i,r,n=e,s=t,o=a;try{i=new Worker(n)}catch(e){if(!(e instanceof DOMException))throw e;var l=function(e){var t,a='importScripts("'+e+'");';try{t=new Blob([a],{type:"application/javascript"})}catch(e){var i=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);i.append(a),t=i.getBlob("application/javascript")}return t}(workerUrl),d=d||webkitURL,c=d.createObjectURL(l);i=new Worker(c),d.revokeObjectURL(c)}this.setObject=function(e){r=e},this.getObject=function(){return r},this.getName=function(){return s},this.send=function(e){i.postMessage(e)},this.setOnMsgCallback=function(e){(o=e)&&i.addEventListener("message",(function(e){o(e)}),!1)},this.stop=function(){i.terminate()}}),"undefined"!=typeof Worker){var na=function(e,t,a,i){var r=t||2,n=a||"UNWP-"+(new Date).getTime(),s=e,o=[],l=[];function d(e,t){var a,i,r=e,n=[],s=0;this.done=function(e){return s>0&&!n[s-1][3]?n[s-1][3]=e:a=e,this},this.fail=function(e){return s>0&&!n[s-1][4]?n[s-1][4]=e:i=e,this},this.__continue=function(e,t){s=e,n=t},this.resolve=function(e){if(a&&a.apply(void 0,e),s>0){s--;var t=n[e[3]];n.splice(e[3],1);var i=t[1].apply(t[0],t[2]);i.__continue(s,n),t[3]&&(i=i.done(t[3])),t[4]&&(i=i.fail(t[4]))}},this.reject=function(e){if(i&&i.apply(void 0,e),s>0){s--;var a=n[e[3]];n.splice(e[3],1);var r=a[0].apply(t,a[1]);r.__continue(s,n),a[2]&&(r=r.done(a[2])),a[3]&&(r=r.fail(a[3]))}},this.then=function(e){s++;var t=arguments;return t.push(s-1),n.push([r,r.execute,t,void 0,void 0]),this},this.get=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.get,e,void 0,void 0]),this},this.put=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.put,e,void 0,void 0]),this},this.post=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.post,e,void 0,void 0]),this},this.del=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.del,e,void 0,void 0]),this},this.api=function(e){return s++,(e=arguments).push(s-1),n.push([t,t.api,e,void 0,void 0]),this}}this.execute=function(e){var t=new d(this,Fg);if(o.length>0){var a=o.shift();a.setObject({t:e,f:t}),a.send(e)}else l.push({t:e,f:t});return t};for(var c=0;c<r;c++){var u=new Fg.FaugWebWorker(s,n+"-ApiWorker"+(c+1));u.setOnMsgCallback(function(e,t,a,i,r){return function(a){var n=a.data,s=n.shift();if(!0===s[0])if(Faug.execFunc("onAjaxCallDone",[Ke(n[1])]),!0===Fg.gp("catchApiUncaughtExceptions"))try{i.getObject().f.resolve([n[0],n[1].statusText,n[1]])}catch(a){console.error(a),n[2]&&console.log(n[2])}else i.getObject().f.resolve([n[0],n[1].statusText,n[1]]);else{if(499==n[1].status){var o=atob(n[1].responseText),l=i.getObject().t[1];return i.getObject().t[1].startsWith("/")?i.getObject().t[1]=o+i.getObject().t[1]:i.getObject().t[1]=i.getObject().t[1].replace(Fg.gp("pbaseUrl"),o),console.log(l+" ---\x3e "+i.getObject().t[1]),Fg.sp("baseUrl",o),void i.send(i.getObject().t)}if(Faug.execFunc("onAjaxCallFail",[Ke(n[1])]),!0===Fg.gp("catchApiUncaughtExceptions"))try{i.getObject().f.reject([n[0],n[1]])}catch(a){console.error(a),n[2]&&console.log(n[2])}else i.getObject().f.reject([n[0],n[1]])}if("function"==typeof r&&r(s[0],s[1]),0==e.length&&t.length>0){var d=t.shift();i.setObject(d),i.send(d.t)}else e.push(i)}}(o,l,0,u,i)),o.push(u)}return this};this.WorkerPool=na}return this.dotify=function(e){var t={};return function e(a,i){for(var r in a){var n=a[r],s=i?i+"."+r:r;n&&"object"==typeof n?e(n,s):t[s]=n}}(e),t},this.design=function(e,t){return s.render(e,t),s},this.useComponent=function(e,t,a){var i=ue[e];i&&(i.init&&i.init.apply(void 0,a),i.use.apply(void 0,t),i.destroy&&i.destroy())},this.testEquality=function(e,t){var a=[];return function e(t,i){if(t===i)return!0;if(!(t instanceof Object&&i instanceof Object))return!1;if(t.constructor!==i.constructor)return!1;for(var r in t)if(t.hasOwnProperty(r)){if(!i.hasOwnProperty(r))return!1;if(t[r]===i[r])continue;if("object"!=typeof t[r])return!1;if(-1!==a.indexOf(t[r]))throw new Error("Cannot compare some cyclical objects");if(a.push(t[r]),!e(t[r],i[r]))return!1}for(r in i)if(i.hasOwnProperty(r)&&!t.hasOwnProperty(r))return!1;return!0}(e,t)},this.diff=function(e,a){return t.getDomDiff(e,a)},this.compareAndApplyDiff=function(e,a,i){return t.compareDomAndApplyDiff(e,a,i)},this.applyDiff=function(e,a){return t.applyDomDiff(e,a)},s=new function(){var e={display:1,show:[["true","Yes"],["false","No"]],custom:1,required:[["true","Yes"],["false","No"]],attrs:1,style:1,stylepos:["append","prepend","clear"],classpos:["append","prepend","clear"],attrpos:["append","prepend","clear"],header:1,icon:1,label:1,helptext:1,customTemplate:1,showlabel:[["true","Yes"],["false","No"]],showicon:[["true","Yes"],["false","No"]],showhelptext:[["true","Yes"],["false","No"]],autocomplete:[["on","Yes"],["off","No"]],maxlength:1,placeholder:1,readonly:[["true","Yes"],["false","No"]]};function t(a,i,r,n,s,o,l,d){var c=a,u="";if(c=Fg.is("Object",i)&&i.display?i.display:a.substring(0,1).toUpperCase()+a.substring(1),Fg.is("Object",i)){u="hidden"!==i.ui&&i.show+""!="false"?'style="background-color: #bed !important;"':("hidden"!==i.ui&&i.show+""!="false"||i.required+""!="false")&&i.required+""=="false"?'style="background-color: white !important;"':'style="background-color: yellow !important;"',n>1&&(u='style="background-color: inherit !important;"');var f=[];for(var m in r=[],i)i.hasOwnProperty(m)&&(f.push(i[m]),r.push(m));i=f}var h=s;1==n?h=d+"_"+a+"_id":n>1&&(h="");for(var g='<div id="'+h+'" key="'+a+'" '+u+' class="jsonTitleCls col-md-'+(0==n?"12":"3")+" "+(0==n?"tab-pane fade "+(o?"in active":""):"conf_prop "+(1==n?"":"hidden"))+'" draggable="'+(1==n?"true":"false")+'" data-open="0" data-level="'+n+'" null>'+(0==n?"":c+'<span class="tglCls"></span><div class="clearfix addBorderCls"></div>'),p=!1,v=0;v<i.length;v++){var y=i[v],b=l+"['"+(m=r[v])+"']";if((!(n>0)||e[m])&&(0!=n||"hidden"!==y.ui))if(Fg.is("Object",y)){var _=t(m,y,null,n+1,void 0,void 0,b,s);""!=_&&(p=!0,g+=_)}else{if(p=!0,g+='<div class="conf_prop col-md-12 jsonLableWrap hidden" data-level="'+(n+1)+'" data-open="0" null><div class="conf_name" style="">'+m+':&nbsp;</div><div class="conf_value form-group" style="display:inline-block;">',1==e[m])g+='<input type="text" name="'+b+'" class="form-control" style="width:300px" value="'+Fg.eh(y)+'"/>';else{g+='<select class="form-control" name="'+b+'" style="width:300px">';for(var w=0;w<e[m].length;w++){var F=Fg.is("Array",e[m][w])?e[m][w][0]:e[m][w],x=Fg.is("Array",e[m][w])?e[m][w][1]:e[m][w];g+='<option value="'+F+'" '+(F+""==y+""?"selected":"")+">"+Fg.eh(x)+"</option>"}g+="</select>"}g+="</div></div>"}}return p?g+"</div>":""}function a(e,a,i,r){var n=[],s=[];if(i&&i.length>0)for(var o=0;o<i.length;o++)e[i[o]]&&(n.push(e[i[o]]),s.push(i[o]));else{for(var l in e)e.hasOwnProperty(l)&&"hidden"!==e[l].ui&&e[l].show+""!="false"&&"false"!==e[l].required&&(n.push(e[l]),s.push(l));for(var l in e)e.hasOwnProperty(l)&&-1==s.indexOf(l)&&"false"===e[l].required&&(n.push(e[l]),s.push(l));for(var l in e)e.hasOwnProperty(l)&&-1==s.indexOf(l)&&(n.push(e[l]),s.push(l))}return t("",n,s,0,"spec"+r,a,"properties")}var i=!1;this.renderOld=function(e,t){var r=Fg.getSchema(e),n=r.properties,s=r.dynamicAspects,o=(r.propertyOrder,"");if(s&&s.length>0){o='<ul class="nav nav-tabs jsonTabsWrap">';var l=1;o+='<li class="col-lg-3 col-md-4 col-sm-6 col-xs-12 colnopad '+(1==l?"active":"")+'"><a class="jsonTitleTruncateCls" data-toggle="tab" href="#spec'+l+++'">Default</a></li>';for(var d=0;d<s.length;d++){var c=!1;for(var u in s[d].valueset)s[d].valueset.hasOwnProperty(u)&&("propertyOrder"==u||-1!=u.indexOf("properties."))&&(c=!0);if(c){var f=s[d].cond;Fg.is("String",s[d].name)&&""!=s[d].name.trim()&&(f=s[d].name.trim()),o+='<li class="col-lg-3 col-md-4 col-sm-6 col-xs-12 colnopad '+(1==l?'class="active"':"")+'"><a class="jsonTitleTruncateCls" data-toggle="tab" title="'+f+'" href="#spec'+l+++'">'+f+"</a></li>"}}o+="</ul>",o+='<div class="tab-content col-padng-5" schemaName="'+e+'">',l=1,o+=a(n,!0,r.propertyOrder,1);var m,h=jQuery.extend({},n);for(d=0;d<s.length;d++){c=!1;for(var u in s[d].valueset)if(s[d].valueset.hasOwnProperty(u))if("propertyOrder"==u)c=!0,m=s[d].valueset[u];else if(-1!=u.indexOf("properties.")){c=!0;var g=u.replace("properties.","");Fg.setrefNewObj(h,g,s[d].valueset[u])}c&&(o+=a(h,!1,m,++l))}o+="</div>"}else o+='<div class="col-padng-5" schemaName="'+e+'">',o+=a(n,!0,r.propertyOrder,1),o+="</div>";t?$(t).html(o):$("body").html(o),$(".conf_prop").on("click",(function(e){e.stopPropagation();var t=1*$(this).attr("data-level")+1;"0"==$(this).attr("data-open")?($(this).attr("data-open","1"),$(this).find("div[data-level="+t+"]").removeClass("hidden")):($(this).attr("data-open","0"),$(this).find("div[data-level="+t+"]").addClass("hidden"))})),$(".jsonTitleCls").on("dragstart",(function(e){e.dataTransfer=e.originalEvent.dataTransfer,$("#"+e.target.id).removeClass("jsonTitleBorderCls"),$("#"+e.target.id).addClass("jsonTitleBorderCls"),i||(i=!0,e.dataTransfer.setData("text/plain",e.target.id),e.dropEffect="move",console.log(e.target.id))})),$(".jsonTitleCls").on("dragover",(function(e){e.preventDefault(),e.dataTransfer=e.originalEvent.dataTransfer,e.dataTransfer.dropEffect="move",$("#"+e.target.id).removeClass("jsonTitleBorderCls")})),$(".jsonTitleCls").on("drop",(function(e){if(i){i=!1,e.preventDefault(),e.dataTransfer=e.originalEvent.dataTransfer;var t=e.dataTransfer.getData("text/plain");console.log(t),$("#"+t).removeClass("jsonTitleBorderCls");var a=$(document.getElementById(t)),r=$(e.target),n=$("<div>").insertAfter(r);r.insertAfter(a),a.insertBefore(n),n.remove();var s=$(e.target).attr("id");$("#"+s).removeClass("jsonTitleBorderCls")}}))},this.toSchema=function(){$(".jsonTitleCls.active").serializeObject();var e=$(".jsonTitleCls.active").parent().attr("schemaName");Fg.getSchema(e)},this.render=function(e){1==$('[faug-sch-name="'+e+'"]').length&&($(".fg-designer").remove(),$('[faug-sch-name="'+e+'"]').find("div[ffead-pth]").each((function(){if(0==$(".fg-designer").length&&$("body").append('<div class="fg-designer"/>'),0==$(this).children("label").length)return;let t=$(this).find("[name]").attr("name");t&&(t=t.replace(/\[/g,".[").replace(/\[([0-9]+)\]/g,"[$1]").replace(/\[/g,"").replace(/\]/g,"").replace(/'/g,"").replace(e+".",""),$(".fg-designer").append('<div class="fg-design" data-path="'+t+'" style="position:absolute;top:'+($(this).offset().top-15)+"px;left:"+$(this).offset().left+"px;width:"+$(this).width()+"px;height:"+($(this).height()+15)+'px;z-index:100;border:1px solid #ccc;"><div class="pull-right"><button style="background-color:#ccc" class="fg-design-m" name="mandatory">M</button><button style="background-color:#ccc" class="fg-design-o" name="optional">S</button></div></div>'))})),$("div.fg-design").find("button").on("click",(function(){if("1"===$(this).data("state"))$(this).data("state","0"),$(this).css("background-color","#ccc"),$(this).closest("div.fg-design").data($(this).attr("name"),!1);else{if("mandatory"==$(this).attr("name")){let e=$(this).siblings("button.fg-design-o");e.data("state","0"),e.css("background-color","#ccc"),e.closest("div.fg-design").data(e.attr("name"),!1)}else{let e=$(this).siblings("button.fg-design-m");e.data("state","0"),e.css("background-color","#ccc"),e.closest("div.fg-design").data(e.attr("name"),!1)}$(this).data("state","1"),$(this).css("background-color","green"),$(this).closest("div.fg-design").data($(this).attr("name"),!0)}})))}},this.open=function(e,t,a){e.startsWith("http")||e.startsWith("www.")||Fg.isN(ne)||!le.test(e)||0==e.indexOf(ne)||(e=0==e.indexOf("/")?ne+e:ne+"/"+e),window.open(e,t,a)},this.eitherOf=function(){for(var e=0;e<arguments.length;e++)if(arguments[e])return arguments[e]},this.vEl=function(e,t,a){var i=$("<i>");for(const t in e)i.data(t,e[t]);for(const e in t)i.attr(e,t[e]);return i.html(a),i},this},Fg=Faug;function __loadfaugconfig(e){var t={};let a=Faug.getConfigPath();var i={};function r(e,t){!0===e.compressedScript?Faug.initRouter(e,t):$.fetchMultipleFilesMT([[e.settings.extensionFile?e.settings.extensionFile:"faug-ext-globalize.js"]]).done((function(){Faug.initRouter(e,t)})).fail((function(e){alert("Problem loading Faug extension library")}))}e&&("queryparam"==e.aTokenWhere?a+="?"+e.aTokenName+"="+e.aTokenValue:"header"==e.aTokenWhere&&(i[e.aTokenName]=e.aTokenValue)),$.ajax({dataType:"json",url:a,headers:i}).done((function(e){if((t=e).settings.globalsConfigPath){let e=t.settings.globalsConfigPath;window.configUrl&&(e=window.configUrl+"/"+t.settings.globalsConfigPath),$.ajax({dataType:"json",url:e,headers:i}).done((function(e){e&&Object.keys(e).length>0&&r(t,e)})).fail((function(e){console.log("Error loading global params ("+e+")")}))}else r(t)})).fail((function(e){console.log("Error loading config.json ("+e+")")}))}$(document).ready((function(){window.app&&app.initialize&&app.initialize(),"undefined"!=typeof FaugWebWorker&&($.fetchMultipleFilesWWASync=function(e,t){var a=$.Deferred(),i=new FaugWebWorker("w-fetch-file.js","FetchMultipleFiles");return i.setObject(t),i.setOnMsgCallback(function(e,t){return function(a){try{if(Faug.is("Object",a.data)){for(var i=0;i<a.data.r;i++)a.data.r[i][2]=xhrObj(a.data.r[2]);a.data.e?e.reject(a.data.r):e.resolve(a.data.r),t.stop()}else Faug.is("Array",a.data)?(a.data[2]=xhrObj(a.data[2]),t.getObject()&&t.getObject()(a.data)):e.reject(a)}catch(a){console.error(a),t.stop()}}}(a,i)),i.send(e),a}),$.fn.state=function(e,t){if(0!=$(this).length)if(void 0!==t)$(this)[0].__fs||($(this)[0].__fs={}),$(this)[0].__fs[e]=t;else{if(Fg.is("Object",e))return void($(this)[0].__fs=e);if($(this)[0].__fs)return void 0!==e?$(this)[0].__fs[e]:$(this)[0].__fs}};$.fetchMultipleFilesChained=function(e,t,a,i){var r,n=$.Deferred();return r=e.reduce((function(e,i){return e.pipe(function(e,t,a){return!0!==a&&!1!==a&&(a=!0),function(i){var r=e.length>1?e[1]:"";""==r&&(/\.json/.test(e[0])?r="json":/\.js/.test(e[0])?r="script":/\.html/.test(e[0])&&(r="html"));var n=!(e.length>2)||e[2];return $.ajax({type:"GET",url:e[0],dataType:r,error:function(e,t,a){console.log(a)},cache:n,async:a}).pipe(function(e,a){return function(i){return"script"==e?$.globalEval(i):t&&t([a[0],i,e,a.slice(3)]),null}}(r,e))}}(i,t,a))}),n.promise()),n.resolve(i),r},$.fetchFile=function(e,t,a,i,r){void 0===i&&(i=!1);var n=n||{},s=Fg.getProperty("authObject");return s&&("queryparam"==s.aTokenWhere?-1==e.indexOf("?")?e+="?"+s.aTokenName+"="+s.aTokenValue:"?"==e[e.length-1]?e+=s.aTokenName+"="+s.aTokenValue:e+="&"+s.aTokenName+"="+s.aTokenValue:"header"==s.aTokenWhere&&!n.hasOwnProperty(s.aTokenName)&&s.aTokenValue&&(n[s.aTokenName]=s.aTokenValue)),$.ajax({type:"GET",url:e,dataType:t,success:r,error:function(e,t,a){console.log(a)},headers:n,cache:a,async:i})},$.fetchMultipleFilesRawMT=function(e,t){for(var a=new Fg.ApisPromiseMT,i=0;i<e.length;i++)a.push([!0,"get",e[i][0]],e[i]);return a.proceed(t,!0)},$.fetchMultipleFilesMT=function(e,t){for(var a=new Fg.ApisPromiseMT,i=0;i<e.length;i++)a.push([!0,"get",e[i][0]],e[i]);return a.proceed(function(e,t){return function(a,i,r){if(!0===i){var n=e[a],s=n.length>1?n[1]:"";""==s&&(/\.json/.test(n[0])?s="json":/\.js/.test(n[0])?s="script":/\.html/.test(n[0])&&(s="html")),"script"==s?$.globalEval(r.responseText):t&&t([n[0],r.responseText,s,n.slice(3)])}}}(e,t),!0)};var e=$.fn.val;if($.fn.cleanVal=function(){const t=e.apply($(this),[]);return null==t||Fg.is("Array",t)?t:$("<div>").text(t).html()},$.fn.val=function(t){if(0==arguments.length){var a=e.apply($(this),[]);return a&&Fg.is("String",a)?a.trim():a}return e.apply($(this),[t])},this.cleanVal=function(e){return null==e?e:$("<div>").text(e).html()},Faug.setProperty("recorder",new Fg.FgRecorder(!0)),(t=Faug.execFunc("asLibrary",[])).valid)Faug.initLib();else{var t;(t=Faug.execFunc("onLoad",[])).valid&&Faug.sp("loadconfigafterauth",t.result);var a=!0===window.onlyFaugCore;Faug.gp("loadconfigafterauth")||a||__loadfaugconfig();var i=!0===window.noFaugExtension;a&&!i&&$.fetchMultipleFilesMT([["faug-ext-globalize.js"]]).done((function(){Faug.initRouter({})})).fail((function(e){alert("Problem loading Faug extension library")}))}})).on("deviceready",(function(){Faug.execFunc("onCordovaLoad",[])})),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(e){return 0==this.indexOf(e)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var a=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>a.length)&&(t=a.length),t-=e.length;var i=a.indexOf(e,t);return-1!==i&&i===t}),"undefined"!=typeof module&&module.exports&&(module.exports={Faug:Faug,Fg:Faug});